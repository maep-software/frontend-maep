webpackJsonp([1],{"+Ag5":function(e,t){},"/zf8":function(e,t){},"438B":function(e,t){},"6H7d":function(e,t,a){"use strict";var i={props:["data"],mounted:function(){console.log(this.data)},watch:{data:{handler:function(e,t){console.log(e)},deep:!0,immediate:!0}},name:"WindConfig",methods:{changeLagMax:function(e){var t=parseFloat(e);if(t>14){var a=this;this.$alert("El valor máximo aceptado por el sistema es 14",{title:"Advertencia",type:"warning",center:!0,callback:function(){a.data.lag_max="14",a.$forceUpdate()}})}else a.data.lag_max=t},changeTestingT:function(e){console.log(e),this.data.testing_t=e},changeDCorrel:function(e){console.log(e),this.data.d_correl=e},onSubmit:function(){this.$bus.emit("submitedWind",{type:"windConfig",data:this.data})},goToMain:function(){this.$router.push({name:"main"})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"Parametros de simulación"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[a("center",[e.data.lag_max<15?a("vue-numeric",{staticClass:"form-control",attrs:{type:"number",max:14,min:1,height:"200px"},model:{value:e.data.lag_max,callback:function(t){e.$set(e.data,"lag_max",t)},expression:"data.lag_max"}}):e._e()],1),e._v(" "),a("label",[e._v("Retraso máximo de prueba")])],1),e._v(" "),a("div",{staticClass:"col-md-3"},[a("center",[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"Verificar modelo"},on:{change:e.changeTestingT},model:{value:e.data.testing_t,callback:function(t){e.$set(e.data,"testing_t",t)},expression:"data.testing_t"}})],1)],1),e._v(" "),a("div",{staticClass:"col-md-3"},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"Mostrar correlaciones"},on:{change:e.changeDCorrel},model:{value:e.data.d_correl,callback:function(t){e.$set(e.data,"d_correl",t)},expression:"data.d_correl"}})],1),e._v(" "),a("div",{staticClass:"col-md-3"},[a("center",[a("b",{staticClass:"badge badge-primary"},[e._v(e._s(e.data.seasonality))])]),e._v(" "),a("label",[e._v("Retraso estacional")])],1),e._v(" "),a("div",{staticClass:"col-md-12"},[a("button",{staticClass:"btn btn-primary",on:{click:function(t){e.onSubmit()}}},[e._v("Guardar")])])])])],1)],1)},staticRenderFns:[]};var n=a("VU/8")(i,s,!1,function(e){a("/zf8")},"data-v-c7db4934",null);t.a=n.exports},"78RL":function(e,t){},BqJa:function(e,t,a){"use strict";var i=a("mtWM"),s=a.n(i);a("QmSG");t.a={getErrorsBackend:function(e){return s.a.get("results/getErrors/"+e)},getLogsBackend:function(e){return s.a.get("results/getLogs/"+e)},getChartsByArea:function(e){return s.a.get("/results/getAreasChart/"+e)},getChartsGeneral:function(e){return s.a.get("/results/getMainChart/"+e)},getTemplates:function(){return s.a.get("getTemplates")},getValidation:function(e){return s.a.get("validateProcess/"+e)},getMonths:function(){return s.a.get("/months")},createLinesExpansion:function(e){return s.a.post("/lines-expansion",e)},updateLinesExpansion:function(e,t){return s.a.put("/lines-expansion/"+e,t)},deleteLinesExpansion:function(e){return s.a.delete("/lines-expansion/"+e)},getLinesExpansion:function(e){var t="process_id:"+e+";";return s.a.get("/lines-expansion/",{params:{with:"initial;final;horizont",search:t,searchJoin:"and",searchFields:"process_id:="}})},createLines:function(e){return s.a.post("/lines",e)},updateLines:function(e,t){return s.a.put("/lines/"+e,t)},deleteLines:function(e){return s.a.delete("/lines/"+e)},getLines:function(e){var t="process_id:"+e+";";return s.a.get("/lines/",{params:{with:"initial;final",search:t,searchJoin:"and",searchFields:"process_id:="}})},createStorageExpansion:function(e){return s.a.post("/storage-expansion",e)},updateStorageExpansion:function(e,t){return s.a.put("/storage-expansion/"+e,t)},deleteStorageExpansion:function(e){return s.a.delete("/storage-expansion/"+e)},getStorageExpansion:function(e){var t="process_id:"+e+";";return s.a.get("/storage-expansion/",{params:{with:"StorageConfig;horizont",search:t,searchJoin:"and",searchFields:"process_id:="}})},createStorageConfig:function(e){return s.a.post("/storage-config",e)},updateStorageConfig:function(e,t){return s.a.put("/storage-config/"+e,t)},deleteStorageConfig:function(e){return s.a.delete("/storage-config/"+e)},getStorageConfig:function(e){var t="process_id:"+e+";";return s.a.get("/storage-config/",{params:{with:"areas;entranceStages",search:t,searchJoin:"and",searchFields:"process_id:="}})},removePowCurve:function(e){return s.a.delete("w-pow-curve-m2/"+e)},updateWPowCurve:function(e,t){return s.a.put("w-pow-curve-m2/"+e,t)},saveWPowCurve:function(e){return s.a.post("w-pow-curve-m2",e)},getWPowCurve:function(e){return s.a.get("getWPowCurveByWindConfigM2Id/"+e)},changeSelectedSegment:function(e){return s.a.put("select-segment",e)},createInflow:function(e){return s.a.post("/inflow",e)},updateInflow:function(e,t){return s.a.put("/inflow/"+e,t)},getInflowByHydroConfigId:function(e){return s.a.get("/getInflowByHydroConfigId/"+e)},deleteInflow:function(e){return s.a.delete("/inflow/"+e)},createInflowWindM2:function(e){return s.a.post("/inflow-wind-m2",e)},updateInflowWindM2:function(e,t){return s.a.put("/inflow-wind-m2/"+e,t)},getInflowWindByIdM2:function(e){return s.a.get("/getInflowWindByWindConfigIdM2/"+e)},deleteInflowWindM2:function(e){return s.a.delete("inflow-wind-m2"+e)},createInflowWind:function(e){return s.a.post("/inflow-wind",e)},updateInflowWind:function(e,t){return s.a.put("/inflow-wind/"+e,t)},getInflowWindById:function(e){return s.a.get("/getInflowWindByWindConfigId/"+e)},deleteInflowWind:function(e){return s.a.delete("/inflow-wind/"+e)},createScenario:function(e){return s.a.post("/scenario",e)},updateScenario:function(e,t){return s.a.put("/scenario/"+e,t)},deleteScenario:function(e){return s.a.delete("/scenario/"+e)},getScenarios:function(e){var t="process_id:"+e+";";return s.a.get("/scenario/",{params:{search:t,searchJoin:"and",searchFields:"process_id:="}})},createSpeedIndicesM2:function(e){return s.a.post("/speed-indices-m2",e)},updateSpeedIndicesM2:function(e,t){return s.a.put("/speed-indices-m2/"+e,t)},getSpeedIndicesByIdM2:function(e){return s.a.get("/getSpeedIndicesByWindConfigId-m2/"+e)},deleteSpeedIndicesM2:function(e){return s.a.delete("/speed-indices-m2/"+e)},createSpeedIndices:function(e){return s.a.post("/speed-indices",e)},updateSpeedIndices:function(e,t){return s.a.put("/speed-indices/"+e,t)},getSpeedIndicesById:function(e){return s.a.get("/getSpeedIndicesByWindConfigId/"+e)},deleteSpeedIndices:function(e){return s.a.delete("/speed-indices/"+e)},createWindM2Config:function(e){return s.a.post("/windM2Config",e)},updateWindM2Config:function(e,t){return s.a.put("/windM2Config/"+e,t)},getWindM2Config:function(e){var t="process_id:"+e+";";return s.a.get("/windM2Config",{params:{with:"areas;entranceStages",search:t,searchJoin:"and",searchFields:"process_id:="}})},deleteWindM2Config:function(e){return s.a.delete("/windM2Config/"+e)},createBlock:function(e){return s.a.post("/blocks",e)},updateBlock:function(e,t){return s.a.put("/blocks/"+e,t)},getBlocks:function(e){var t="process_id:"+e;return s.a.get("/blocks",{params:{search:t,searchJoin:"and",searchFields:"process_id:="}})},deleteBlock:function(e){return s.a.delete("/blocks/"+e)},createWindConfigExpansion:function(e){return s.a.post("/wind-expansion",e)},updateWindConfigExpansion:function(e,t){return s.a.put("/wind-expansion/"+e,t)},getWindExpansion:function(e){var t="process_id:"+e+";";return s.a.get("/wind-expansion",{params:{with:"windConfig;horizont",search:t,searchJoin:"and",searchFields:"process_id:="}})},deleteWindConfigExpansion:function(e){return s.a.delete("/wind-expansion/"+e)},createWindConfig:function(e){return s.a.post("/wind-config",e)},updateWindConfig:function(e,t){return console.log(t),s.a.put("/wind-config/"+e,t)},getWindConfig:function(e){var t="process_id:"+e+";";return s.a.get("/wind-config",{params:{with:"areas;entranceStages",search:t,searchJoin:"and",searchFields:"process_id:="}})},deleteWinConfig:function(e){return s.a.delete("/wind-config/"+e)},createHydroExpansionConfig:function(e){return s.a.post("/hydro-expansion",e)},updateHydroConfigExpansion:function(e,t){return s.a.put("/hydro-expansion/"+e,t)},getHydroExpansion:function(e){var t="process_id:"+e+";";return s.a.get("/hydro-expansion",{params:{with:"hydroConfig;horizont",search:t,searchJoin:"and",searchFields:"process_id:="}})},deleteHydroExpansionConfig:function(e){return s.a.delete("/hydro-expansion/"+e)},createHydroConfig:function(e){return s.a.post("/hydro-config",e)},updateHydroConfig:function(e,t){return s.a.put("/hydro-config/"+e,t)},getHydroConfig:function(e){var t="process_id:"+e+";";return s.a.get("/hydro-config",{params:{with:"areas;entranceStages;type",search:t,searchJoin:"and",searchFields:"process_id:="}})},deleteHydroConfig:function(e){return s.a.delete("/hydro-config/"+e)},createSmallConfigExpansion:function(e){return s.a.post("/small-config-expansion",e)},updateSmallConfigExpansion:function(e,t){return s.a.put("/small-config-expansion/"+e,t)},getSmallConfigExpansion:function(e){var t="process_id:"+e+";";return s.a.get("/small-config-expansion",{params:{with:"SmallConfig;horizont",search:t,searchJoin:"and",searchFields:"process_id:="}})},deleteSmallConfigExpansion:function(e){return s.a.delete("/small-config-expansion/"+e)},createSmallConfig:function(e){return s.a.post("/small-config",e)},updateSmallConfig:function(e,t){return s.a.put("/small-config/"+e,t)},getSmallConfig:function(e){var t="process_id:"+e+";";return s.a.get("/small-config",{params:{with:"areas;entranceStages;type",search:t,searchJoin:"and",searchFields:"process_id:="}})},deleteSmallConfig:function(e){return s.a.delete("/small-config/"+e)},createRationingCost:function(e){return s.a.post("/rationing-costs",e)},updateRationingCost:function(e,t){return s.a.put("/rationing-costs/"+e,t)},getRationingCostBySegmentId:function(e){return s.a.get("getRationingCostBySegmentId/"+e)},createThermalConfigExpansion:function(e){return s.a.post("/thermal-expansion",e)},updateThermalConfigExpansion:function(e,t){return s.a.put("/thermal-expansion/"+e,t)},getThermalConfigExpansion:function(e){console.log("santiago");var t="process_id:"+e+";";return s.a.get("/thermal-expansion",{params:{with:"ThermalConfig;horizont",search:t,searchJoin:"and",searchFields:"process_id:="}})},deleteThermalConfigExpansion:function(e){return s.a.delete("/thermal-expansion/"+e)},updateFuelCostHorizont:function(e,t){return s.a.put("/fuel-cost-horizonts/"+e,t)},createFuelCostHorizont:function(e){return s.a.post("/fuel-cost-horizonts",e)},getFuelCostByFuelId:function(e){return s.a.get("getFuelCostHorizontsByFuelId/"+e)},createSegment:function(e){return s.a.post("/segments",e)},updateSegment:function(e,t){return s.a.put("/segments/"+e,t)},deleteSegment:function(e){return s.a.delete("/segments/"+e)},getSegments:function(e){var t="process_id:"+e+";";return s.a.get("/segments/",{params:{search:t,searchJoin:"and",searchFields:"process_id:="}})},createFuel:function(e){return s.a.post("/fuel",e)},updateFuel:function(e,t){return s.a.put("/fuel/"+e,t)},deleteFuel:function(e){return s.a.delete("/fuel/"+e)},getCombustiblesByProcessId:function(e){var t="process_id:"+e+";";return s.a.get("/fuel/",{params:{search:t,searchJoin:"and",searchFields:"process_id:="}})},deleteHorizontById:function(e){return s.a.delete("horizonts/"+e)},updateHorizont:function(e,t){return s.a.put("horizonts/"+e,t)},deleteHorizontByProcessId:function(e){return s.a.delete("delete-horizont-by-processId/"+e)},getDemandByArea:function(e){return s.a.get("get-by-area/"+e)},createHorizont:function(e){return s.a.post("/horizonts",e)},getHorizontByProcessId:function(e){var t="process_id:"+e+";";return s.a.get("/horizonts/",{params:{search:t,searchJoin:"and",searchFields:"process_id:=",orderBy:"period"}})},getTypes:function(){return s.a.get("/types/")},getEntranceStages:function(){return s.a.get("/entrance-stages/")},getDemand:function(e){var t="process_id:"+e+";";return s.a.get("/demands/",{params:{search:t,searchJoin:"and",searchFields:"process_id:="}})},createDemand:function(e){return s.a.post("/demands",e)},updateDemand:function(e,t){return s.a.put("/demands/"+e,t)},createWindExpns:function(e){return s.a.post("/wind-expns",e)},updateWindExpns:function(e,t){return s.a.put("/wind-expns/"+e,t)},deleteWindExpns:function(e){return s.a.delete("/wind-expns/"+e)},getWindExpns:function(e){var t="process_id:"+e+";";return s.a.get("/wind-expns/",{params:{with:"areas",search:t,searchJoin:"and",searchFields:"process_id:="}})},donwloadWindExpns:function(e,t){return s.a.post("/wind-expns/generateExcel/"+e,t)},createThermalConfig:function(e){return s.a.post("/thermal-configs",e)},updateThermalConfig:function(e,t){return s.a.put("/thermal-configs/"+e,t)},deleteThermalConfig:function(e){return s.a.delete("/thermal-configs/"+e)},getThermalConfig:function(e){var t="process_id:"+e+";";return s.a.get("/thermal-configs/",{params:{with:"areas;entranceStages;fuel;type",search:t,searchJoin:"and",searchFields:"process_id:="}})},donwloadExcelThermalConfig:function(e,t){return s.a.post("/thermalConfig/generateExcel/"+e,t)},createArea:function(e){return s.a.post("/areas",e)},updateArea:function(e,t){return s.a.put("/areas/"+e,t)},deleteArea:function(e){return s.a.delete("/areas/"+e)},getAreas:function(e){var t="process_id:"+e+";";return s.a.get("/areas/",{params:{search:t,searchJoin:"and",searchFields:"process_id:="}})},donwloadExcelAreas:function(e,t){return s.a.post("/areas/generateExcel/"+e,t)},updateCategory:function(e){return s.a.put("/categories/"+e.id,e)},createCategory:function(e){return s.a.post("/categories",e)},deleteCategory:function(e){return s.a.delete("/categories/"+e)},getCategories:function(){return s.a.get("/categories")},clearLogs:function(e){return s.a.get("/clear-logs/"+e)},validateEmail:function(e){return s.a.get("/auth/validate/"+e)},processNew:function(e){return s.a.post("/process/"+e)},updateUser:function(e){return s.a.put("users/"+e.id,e)},getUser:function(e){return s.a.get("users/"+e)},removeRol:function(e){return s.a.delete("roles/"+e)},createRol:function(e){return s.a.post("roles",e)},updateRol:function(e,t){return s.a.put("roles/"+e,t)},getRoles:function(){return s.a.get("roles")},downloadExcel:function(){return s.a.post("users/download-excel")},getUsers:function(e,t,a,i,n){var o=i,r="email:like";return""!==n&&(o="email:"+n+";name:"+n+";lastname:"+n+";meta.company:"+n+";meta.phone:"+n,r+=";name:like;lastname:like;meta.company:like;meta.phone:like;"),s.a.get("users",{params:{per_page:e,limit:e,offset:t,page:a,search:o,searchJoin:"or",searchFields:r,with:"roles;meta"}})},deleteUser:function(e){return s.a.delete("users/"+e)},register:function(e){return s.a.post("/auth/register",e)},addCurrentConnection:function(e){e.$socket.emit("connected",{user:e.$auth.user(),date:new Date})},reset:function(e){return s.a.post("/auth/password/email",{email:e})},resetPassword:function(e){return s.a.post("/auth/password/reset",e)},sendToken:function(){return s.a.get("/auth/activate/send-token")},getProcess:function(e,t,a,i,n,o){var r="statusId:"+i+";",l="statusId:=;";return o&&(r+="userId:"+o,l+="userId:=;"),""!==n&&(r="statusId:"+i+";name:"+n,l+=";name:like;userId:="),s.a.get("processes",{params:{per_page:e,limit:e,offset:t,page:a,search:r,searchJoin:"and",searchFields:l,with:"user"}})},getProcessById:function(e){return s.a.get("processes/"+e)},updateProcess:function(e,t){return s.a.put("processes/"+t,e)},createProcess:function(e,t){return s.a.post("processes",e)},delete:function(e){return s.a.delete("processes/"+e)}}},CiRU:function(e,t){},JezI:function(e,t,a){"use strict";var i={mounted:function(){},name:"component_name",methods:{isActive:function(e){return this.$route.name===e},createProcess:function(){this.$auth.user().meta.models<1?this.$alert("Puedes solicitar mas procesos o eliminar alguno que no necesites.","No tienes procesos disponibles",{type:"error"}):"process"===this.$route.name?(this.$router.push({name:"process",params:{id:null}}),window.location.reload()):this.$router.push({name:"process",params:{id:null}})},logout:function(){var e=this;this.$confirm("Deseas cerrar sesión. Continuar?","Cerrar sesión",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"warning"}).then(function(){e.$auth.logout(),window.location.reload()})},goToMain:function(){"process"===this.$route.name?window.location.href="/":this.$router.push({name:"main"})},goToUsers:function(){this.$router.push({name:"users"})},goToProfile:function(){this.$router.push({name:"profile"})},goToAdmin:function(){this.$router.push({name:"admin"})},canManageUsers:function(){var e=this,t=!1;return _.each(this.$auth.user().roles,function(a){t||(t=e.eachRolesPermissions(a,e.havePermissionToManageUser))}),t},canCreateProcess:function(){var e=this,t=!1;return _.each(this.$auth.user().roles,function(a){t||(t=e.eachRolesPermissions(a,e.havePermissionToCreateProcess))}),t},canAdministrate:function(){var e=this,t=!1;return _.each(this.$auth.user().roles,function(a){t||(t=e.eachRolesPermissions(a,e.havePermissionToAdministrate))}),t},eachRolesPermissions:function(e,t){var a=[],i=!1;return(a=e.permissions)&&_.each(a.split(","),function(e){e&&t(e)&&(i=!0)}),i},havePermissionToCreateProcess:function(e){return"createProcess"===e.trim()},havePermissionToManageUser:function(e){return"seeUsers"===e.trim()},havePermissionToAdministrate:function(e){return"administrate"===e.trim()}},data:function(){return{userInfo:{},loading:!1}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row",staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"col-md-12"},[a("img",{class:{animated:e.isActive("main"),rotateIn:e.isActive("main")},staticStyle:{"margin-top":"0px"},attrs:{src:"/static/logo-bubbles.svg",height:"70"}}),e._v(" "),a("h6",{staticStyle:{"margin-top":"5px",color:"#5b5851","font-weight":"bold"}},[e._v(" Modelo de Análisis Eléctrico y Planeamiento")]),e._v(" "),a("div",{staticClass:"ui secondary pointing menu"},[a("a",{staticClass:"item",class:{active:e.isActive("main")},on:{click:function(t){e.goToMain()}}},[a("i",{staticClass:"icon ui chart line blue"}),e._v("           \n         Dashboard\n         ")]),e._v(" "),e.canManageUsers()?a("a",{staticClass:"item",class:{active:e.isActive("userModel")||e.isActive("users")||e.isActive("roles")||e.isActive("user")},on:{click:function(t){e.goToUsers()}}},[a("i",{staticClass:"icon ui users yellow"}),e._v("          \n         Usuarios\n         ")]):e._e(),e._v(" "),e.canAdministrate()?a("a",{staticClass:"item",class:{active:e.isActive("admin")},on:{click:function(t){e.goToAdmin()}}},[a("i",{staticClass:"icon ui configure red"}),e._v("          \n         Administración\n         ")]):e._e(),e._v(" "),a("div",{staticClass:"right menu"},[e.canCreateProcess()?a("a",{staticClass:"item",class:{active:e.isActive("process")},on:{click:e.createProcess}},[a("i",{staticClass:"icon ui plus inverted blue"}),e._v("           \n            Nuevo caso de estudio\n            ")]):e._e(),e._v(" "),a("a",{staticClass:"ui item",class:{active:e.isActive("profile")||e.isActive("terms")||e.isActive("answers")||e.isActive("deleteAccount")},on:{click:e.goToProfile}},[a("i",{staticClass:"icon ui user olive"}),e._v("\n             "+e._s(e.$auth.user().email)+"\n            ")]),e._v(" "),a("a",{staticClass:"ui item",on:{click:e.logout}},[a("i",{staticClass:"icon ui red close"}),e._v(" "),a("b",[e._v("Cerrar sesión")])])])])])])},staticRenderFns:[]},n=a("VU/8")(i,s,!1,null,null,null);t.a=n.exports},Jmt5:function(e,t){},"K5i+":function(e,t,a){"use strict";(function(e){var i=a("fZjL"),s=a.n(i),n=a("bOdI"),o=a.n(n),r=a("rUBz"),l=a("zh/8"),c=a("x95f"),d=a("XJ7b"),u=a("evKp"),m=a("JezI"),p=a("BqJa"),g=a("/Luh"),h=a.n(g);t.a={name:"Process",mounted:function(){var e=this;console.log(this.activeStep),this.activeStep=parseInt(this.$route.query.step,10)||0,this.registerEvents(),0===this.activeStep&&p.a.getTemplates().then(function(t){e.templates=t.data}),1===this.activeStep&&this.getCategories(),_.isNil(this.$route.params.id)?this.loading=!1:this.getProcessById(this.$route.params.id)},watch:{modulesInfo:{immediate:!0,handler:function(){},deep:!0}},destroyed:function(){this.$socket.emit("room-leave",this.$route.params.id),delete this.$options.sockets.message,this.$bus.off("changeStep",this.changeStep),this.$bus.off("sendUpdate",this.sendUpdate),this.$bus.off("sendCreate",this.sendCreate),this.$bus.off("getModulesData",this.getModulesByReference)},components:{navBar:m.a,configStep:d.a,inputStep:u.a,process:e,processProgress:r.a,processResults:l.a,processStep:c.a},methods:{getModulesByReference:function(e){var t=this,a=e.length;_.each(e,function(e,i){t.loading=!0,t.loadingMessage="Organizando información",p.a[e.url](t.$route.params.id).then(function(s){a===i+1&&(t.loading=!1),t.modulesInfo[e.reference]=s.data,t.modulesInfoLoadedInfo[e.reference+"Loaded"]=!0,t.$forceUpdate()})})},getModulesData:function(){var e=this;h.a.all([p.a.getAreas(this.$route.params.id),p.a.getThermalConfig(this.$route.params.id),p.a.getTypes(),p.a.getEntranceStages(),p.a.getHorizontByProcessId(this.$route.params.id),p.a.getCombustiblesByProcessId(this.$route.params.id),p.a.getSegments(this.$route.params.id),p.a.getThermalConfigExpansion(this.$route.params.id),p.a.getSmallConfig(this.$route.params.id),p.a.getSmallConfigExpansion(this.$route.params.id),p.a.getHydroConfig(this.$route.params.id),p.a.getHydroExpansion(this.$route.params.id),p.a.getWindConfig(this.$route.params.id),p.a.getWindExpansion(this.$route.params.id),p.a.getBlocks(this.$route.params.id),p.a.getWindM2Config(this.$route.params.id),p.a.getScenarios(this.$route.params.id),p.a.getStorageConfig(this.$route.params.id),p.a.getStorageExpansion(this.$route.params.id),p.a.getLines(this.$route.params.id),p.a.getLinesExpansion(this.$route.params.id),p.a.getMonths(this.$route.params.id)]).then(function(t){e.modulesInfo={areas:t[0].data,thermalConfig:t[1].data,types:t[2].data,entranceStages:t[3].data,horizonts:t[4].data,fuels:t[5].data,segments:t[6].data,thermalConfigExpansion:t[7].data,smallConfig:t[8].data,smallConfigExpansion:t[9].data,hydroConfig:t[10].data,hydroExpansion:t[11].data,windConfig:t[12].data,windConfigExpansion:t[13].data,blocks:t[14].data,windM2Config:t[15].data,scenarios:t[16].data,storageConfig:t[17].data,storageExpansion:t[18].data,lines:t[19].data,linesExpansion:t[20].data,months:t[21].data},e.modulesInfoLoaded=!0,e.$forceUpdate()}).catch(function(e){console.log(e)})},getCategories:function(){var e=this;this.loading=!0,p.a.getCategories().then(function(t){e.loading=!1,e.categories=t.data})},getProcessById:function(e){var t=this;p.a.getProcessById(e).then(function(e){t.infoData.status_id=e.data.statusId,t.infoData.phase=e.data.phase,t.infoData.form.type=e.data.type,t.infoData.form.name=e.data.name,t.infoData.form.date=e.data.created_at,t.infoData.form.template=e.data.template,t.infoData.form.template_id=e.data.template_id,t.configData.segment_id=parseInt(e.data.segment_id),t.infoData.form.generate_wind=e.data.generate_wind,t.configData.max_iter=e.data.max_iter,t.configData.bnd_stages=e.data.bnd_stages,t.configData.stages=e.data.stages,t.configData.seriesBack=e.data.seriesBack,t.configData.seriesForw=e.data.seriesForw,t.configData.sensDem=e.data.sensDem,t.configData.eps_area=e.data.eps_area,t.configData.eps_all=e.data.eps_all,t.configData.eps_risk=e.data.eps_risk,t.configData.commit=e.data.commit,t.configData.read_data=e.data.read_data,t.configData.param_calculation=e.data.param_calculation,t.configData.param_opf=e.data.param_opf,t.configData.wind_model2=e.data.wind_model2,t.configData.flow_gates=e.data.flow_gates,t.windData.lag_max=e.data.lag_max,t.windData.testing_t=!!e.data.testing_t,t.windData.d_correl=!!e.data.d_correl,t.windData.seasonality=e.data.seasonality})},sendCreate:function(e){var t,a=this;this.infoData=e.infoData,this.configData=e.configData,this.windData=e.windData,p.a.createProcess((t={phase:1,statusId:1,userId:this.$auth.user().id,name:this.infoData.form.name,date:this.infoData.form.date,template_id:this.infoData.form.template_id,generate_wind:this.infoData.form.generate_wind,template:this.infoData.form.template,type:this.infoData.form.type,blocks:this.infoData.form.blocks,scenarios:this.infoData.form.scenarios,max_iter:this.configData.max_iter,bnd_stages:this.configData.bnd_stages,stages:this.configData.bnd_stages+this.configData.months,seriesBack:this.configData.seriesBack,seriesForw:this.configData.seriesForw,sensDem:this.configData.sensDem,eps_area:this.configData.eps_area,eps_all:this.configData.eps_all,eps_risk:this.configData.eps_risk,commit:this.configData.commit,fileCode:this.infoData.fileCode,read_data:this.configData.read_data,param_calculation:this.configData.param_calculation,param_opf:this.configData.param_opf,wind_model2:this.configData.wind_model2,flow_gates:this.configData.flow_gates,lag_max:this.configData.lag_max,testing_t:this.configData.testing_t,d_correl:this.configData.d_correl,seasonality:this.configData.seasonality},o()(t,"lag_max",this.windData.lag_max),o()(t,"testing_t",this.windData.testing_t),o()(t,"d_correl",this.windData.d_correl),o()(t,"seasonality",this.windData.seasonality),t)).then(function(e){if(_.isNil(e.response))a.errors=[],"Excel"===e.data.type?a.$router.push({name:"process",params:{id:e.data.id},query:{step:0,deploy:!0}}):a.changeStep(1,e.data.id),a.$message({message:"Notificación: El modelo se ha guardado correctamente.",type:"success"});else{if(!_.isNil(e.response.status)&&500===e.response.status)return void a.$message({message:"Notificación: El modelo no se pudo guardar, revise que el nombre no este duplicado.",type:"error"});a.errors=a.mapErrors(e.response.data.errors)}})},sendUpdate:function(e){var t,a=this;this.infoData=e.infoData,this.configData=e.configData,this.windData=e.windData,this.reload=e,p.a.updateProcess((t={phase:this.infoData.phase,statusId:this.infoData.status_id,userId:this.$auth.user().id,name:this.infoData.form.name,date:this.infoData.form.date,template:this.infoData.form.template,generate_wind:this.infoData.form.generate_wind,blocks:this.infoData.form.blocks,template_id:this.infoData.form.template_id},o()(t,"template",this.infoData.form.template),o()(t,"generate_wind",this.infoData.form.generate_wind),o()(t,"max_iter",this.configData.max_iter),o()(t,"bnd_stages",this.configData.bnd_stages),o()(t,"stages",this.configData.bnd_stages+this.configData.months),o()(t,"seriesBack",this.configData.seriesBack),o()(t,"seriesForw",this.configData.seriesForw),o()(t,"sensDem",this.configData.sensDem),o()(t,"eps_area",this.configData.eps_area),o()(t,"eps_all",this.configData.eps_all),o()(t,"eps_risk",this.configData.eps_risk),o()(t,"commit",this.configData.commit),o()(t,"fileCode",this.infoData.fileCode),o()(t,"read_data",this.configData.read_data),o()(t,"param_calculation",this.configData.param_calculation),o()(t,"param_opf",this.configData.param_opf),o()(t,"wind_model2",this.configData.wind_model2),o()(t,"flow_gates",this.configData.flow_gates),o()(t,"lag_max",this.windData.lag_max),o()(t,"testing_t",this.windData.testing_t?1:0),o()(t,"d_correl",this.windData.d_correl?1:0),o()(t,"seasonality",this.windData.seasonality),t),this.$route.params.id).then(function(e){_.isNil(e.response)?(a.errors=[],a.$message({message:"Notificación: El modelo se ha actualizado correctamente",type:"success"}),a.reload&&"Excel"!==e.data.type&&a.changeStep(1,e.data.id)):a.errors=a.mapErrors(e.response.data.errors)})},changeStep:function(e,t){this.activeStep=e;var a={name:"process",params:{id:null},query:{step:e}};_.isNil(t)?a.params.id=this.$route.params.id:a.params.id=t,this.$router.push(a)},registerSocketMessages:function(){var e=this;this.$options.sockets.message=function(t){e.progress=t.data.percent,console.log(e.progress),e.info=t.data.message,100===e.progress&&e.validateErrors()}},validateErrors:function(){var e=this;p.a.getErrorsBackend(this.$route.params.id).then(function(t){""!=t.data?"Excel"!==e.infoData.type?e.$router.push({name:"process",params:{id:e.$route.params.id},query:{step:1}}):e.$router.push({name:"process",params:{id:e.$route.params.id},query:{step:0,deploy:!0}}):e.$router.push({name:"process",params:{id:e.$route.params.id},query:{step:3}})})},registerEvents:function(){this.$bus.on("changeStep",this.changeStep),this.$bus.on("sendUpdate",this.sendUpdate),this.$bus.on("sendCreate",this.sendCreate),this.$bus.on("getModulesData",this.getModulesByReference),2===this.activeStep&&this.$socket.emit("room",this.$route.params.id),this.registerSocketMessages()},mapErrors:function(e){return s()(e).map(function(t,a){return console.log(t,a),{message:e[t][0]}})}},data:function(){return{templates:[],loadingMessage:"Cargando",configData:{labelPosition:"right",formLabelAlign:{name:"",region:"",type:""},max_iter:1,bnd_stages:1,stages:null,months:1,seriesBack:1,seriesForw:1,sensDem:1,eps_area:.5,eps_all:.5,eps_risk:.1,commit:0,read_data:!1,param_calculation:!0,param_opf:!0,wind_model2:!1,flow_gates:!0},windData:{lag_max:12,testing_t:1,d_correl:1,seasonality:12},infoData:{phase:null,fileCode:null,status_id:null,fileList:[],labelPosition:"right",formLabelAlign:{name:"",region:"",type:""},form:o()({name:"",region:"",date:new Date,date2:"",delivery:!1,type:"En blanco",template:!1,blocks:20,generate_wind:!1,scenarios:10,resource:"",desc:"",filterText:""},"region","V1")},percent:0,loading:!1,activeStep:0,process:null,progress:0,info:"En cola",errors:[],categories:[],modulesInfo:{areas:[],thermalConfig:[],types:[],entranceStages:[],horizonts:[],fuels:[],segments:[],thermalConfigExpansion:[],smallConfig:[],smallConfigExpansion:[],hydroConfig:[],hydroExpansion:[],windConfig:[],windConfigExpansion:[],blocks:[],windM2Config:[],scenarios:[],storageConfig:[],storageExpansion:[],lines:[],linesExpansion:[],months:[]},modulesInfoLoadedInfo:{areasLoaded:!1,thermalConfigLoaded:!1,typesLoaded:!1,entranceStagesLoaded:!1,horizontsLoaded:!1,fuelsLoaded:!1,segmentsLoaded:!1,thermalConfigExpansionLoaded:!1,smallConfigLoaded:!1,smallConfigExpansionLoaded:!1,hydroConfigLoaded:!1,hydroExpansionLoaded:!1,windConfigLoaded:!1,windConfigExpansionLoaded:!1,blocksLoaded:!1,windM2ConfigLoaded:!1,scenariosLoaded:!1,storageConfigLoaded:!1,storageExpansionLoaded:!1,linesLoaded:!1,linesExpansionLoaded:!1,monthsLoaded:!1},modulesInfoLoaded:!0}}}}).call(t,a("W2nU"))},L773:function(e,t){},LpxE:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("7+uW"),s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.$auth.ready()?t("div",{attrs:{id:"app"}},[t("router-view",{key:this.$route.fullPath})],1):this._e(),this._v(" "),this.$auth.ready()?this._e():t("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:!this.$auth.ready(),expression:"!$auth.ready()",modifiers:{fullscreen:!0,lock:!0}}],staticStyle:{"padding-left":"10px"}})])},staticRenderFns:[]},n=a("VU/8")({name:"App"},s,!1,null,null,null).exports,o=a("/ocq"),r=a("BqJa"),l={props:["registers"],methods:{canDeleteProcess:function(){var e=this,t=!1;return _.each(this.$auth.user().roles,function(a){t||(t=e.eachRolesPermissions(a,e.havePermissionToDeleteProcess))}),t},eachRolesPermissions:function(e,t){var a=[],i=!1;return(a=e.permissions)&&_.each(a.split(","),function(e){e&&t(e)&&(i=!0)}),i},havePermissionToDeleteProcess:function(e){return"deleteProcess"===e.trim()},goToModel:function(e){this.$router.push({name:"process",params:{id:e.id},query:{step:3}})},remove:function(e){var t=this;this.$confirm("Esto borrara el modelo por completo. Continuar?","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"warning"}).then(function(a){a&&r.a.delete(e.id).then(function(){t.$auth.fetch(),t.registers.splice(e,1),t.$message({type:"success",message:"Eliminado con exito"}),t.$parent.$emit("reloadModels")})}).catch(function(){t.$message({type:"warning",message:"Eliminación cancelada"})})}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-top":"5px"}},[a("ul",{staticClass:"list-group"},e._l(e.registers,function(t){return t.name?a("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[a("div",[t.name?a("h5",{staticClass:"mb-1"},[e._v(e._s(t.name))]):e._e(),e._v(" "),a("small",{staticStyle:{color:"grey"}},[a("i",{staticClass:"calendar alternate black icon"}),e._v(" "),a("timeago",{attrs:{since:t.created_at}})],1),e._v(" "),a("br"),e._v(" "),t.user?a("small",{staticStyle:{color:"grey"}},[a("i",{staticClass:"user circle outline black icon"}),e._v(e._s(t.user.name)+" "+e._s(t.user.lastname))]):e._e()]),e._v(" "),a("div",[a("button",{staticClass:"btn btn-sm btn-outline-primary",on:{click:function(a){e.goToModel(t)}}},[a("i",{staticClass:"eye  icon"}),e._v("Acceder")]),e._v(" "),e.canDeleteProcess()?a("button",{staticClass:"btn btn-sm btn-outline-danger",on:{click:function(a){e.remove(t)}}},[a("i",{staticClass:"trash icon"}),e._v("Eliminar")]):e._e()])]):e._e()}))])},staticRenderFns:[]};var d=a("VU/8")(l,c,!1,function(e){a("cx5+")},null,null).exports,u=a("JezI"),m={name:"QueueRegister",mounted:function(){this.listenModels()},destroyed:function(){this.$socket.emit("room-leave",this.register.id)},props:["register"],methods:{listenModels:function(){var e=this;this.$options.sockets.message=function(t){parseInt(t.data.id,10)===e.register.id&&(e.progress=t.data.percent,e.info=t.data.message,e.register.phase=t.data.phase),"Finalizado"===t.data.state&&(e.$notify({title:"Proceso completado",message:e.register.name+" acaba de ser procesado",type:"success"}),e.$bus.emit("refreshRegisters"))}},registerModelListeners:function(){this.$socket.emit("room",this.register.id),this.listenModels()},goToModel:function(e){"Excel"!==e.type&&this.$router.push({name:"process",params:{id:e.id},query:{step:1}}),"Excel"===e.type&&this.$router.push({name:"process",params:{id:e.id},query:{step:0,deploy:!0}})},remove:function(e){var t=this;this.$confirm("Esto borrara el modelo por completo. Continuar?","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"warning"}).then(function(a){a&&(console.log(a),t.$bus.emit("removeQueueRegister",e))}).catch(function(e){console.log(e),t.$message({type:"warning",message:"Eliminación cancelada"})})},canEditProcess:function(){var e=this,t=!1;return _.each(this.$auth.user().roles,function(a){t||(t=e.eachRolesPermissions(a,e.havePermissionToEditProcess))}),t},canViewProcess:function(){var e=this,t=!1;return _.each(this.$auth.user().roles,function(a){t||(t=e.eachRolesPermissions(a,e.havePermissionToViewProcess))}),t},canDeleteProcess:function(){var e=this,t=!1;return _.each(this.$auth.user().roles,function(a){t||(t=e.eachRolesPermissions(a,e.havePermissionToDeleteProcess))}),t},eachRolesPermissions:function(e,t){var a=[],i=!1;return(a=e.permissions)&&_.each(a.split(","),function(e){e&&t(e)&&(i=!0)}),i},havePermissionToDeleteProcess:function(e){return"deleteProcess"===e.trim()},havePermissionToViewProcess:function(e){return"seeProcess"===e.trim()},havePermissionToEditProcess:function(e){return"editProcess"===e.trim()}},data:function(){return{progress:0,info:""}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("h5",{staticClass:"mb-1"},[e._v(e._s(e.register.name)+" "),5==e.register.phase?a("el-tag",{attrs:{size:"mini",type:"danger"}},[a("i",{staticClass:"icon warning"}),e._v("Error de ejecución")]):e._e()],1),e._v(" "),a("small",{staticStyle:{color:"grey"}},[a("i",{staticClass:"calendar alternate black icon"}),e._v(" "),a("timeago",{attrs:{"auto-update":1,since:e.register.created_at}})],1),e._v(" "),a("br"),e._v(" "),e.register.user?a("small",{staticStyle:{color:"grey"}},[a("i",{staticClass:"user circle outline black icon"}),e._v(e._s(e.register.user.name)+" "+e._s(e.register.user.lastname))]):e._e()]),e._v(" "),a("div",{staticClass:"col-md-6"},[1==e.register.phase?a("div",[e.canDeleteProcess()?a("button",{staticClass:"btn btn-sm btn-outline-danger float-right",on:{click:function(t){e.remove(e.register)}}},[a("i",{staticClass:"trash icon"}),e._v("Eliminar")]):e._e(),e._v(" "),e.canEditProcess()||e.canViewProcess()?a("button",{staticClass:"btn btn-sm btn-outline-primary float-right",staticStyle:{"margin-right":"10px"},on:{click:function(t){e.goToModel(e.register)}}},[a("i",{staticClass:"eye  icon"}),e._v("Acceder")]):e._e()]):e._e(),e._v(" "),5==e.register.phase?a("div",[e.canDeleteProcess()?a("button",{staticClass:"btn btn-sm btn-outline-danger float-right",on:{click:function(t){e.remove(e.register)}}},[a("i",{staticClass:"trash icon"}),e._v("Eliminar")]):e._e(),e._v(" "),e.canEditProcess()||e.canViewProcess()?a("button",{staticClass:"btn btn-sm btn-outline-primary float-right",staticStyle:{"margin-right":"10px"},on:{click:function(t){e.goToModel(e.register)}}},[a("i",{staticClass:"eye  icon"}),e._v("Acceder")]):e._e()]):e._e(),e._v(" "),3==e.register.phase?a("div",[e._m(0)]):e._e()])]),e._v(" "),e.progress?a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("small",[e._v(e._s(e.info))]),e._v(" "),a("el-progress",{attrs:{percentage:e.progress}})],1)]):e._e()])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"btn btn-warning disabled float-right"},[t("i",{staticClass:"loading spinner icon"}),this._v("Procesando")])}]};var g={props:["registers"],components:{QueueRegister:a("VU/8")(m,p,!1,function(e){a("+Ag5")},"data-v-511b8186",null).exports}},h={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{"margin-top":"5px"}},[t("ul",{staticClass:"list-group"},this._l(this.registers,function(e){return t("li",{staticClass:"list-group-item"},[t("queue-register",{attrs:{register:e}})],1)}))])},staticRenderFns:[]},f=a("VU/8")(g,h,!1,null,null,null).exports,v=a("/Luh"),C=a.n(v),b={name:"Main",mounted:function(){this.$auth.fetch(),this.getModels(),this.registerListener(),this.checkUserIsValidated(),this.addCurrentConnection()},destroyed:function(){clearInterval(this.interval),clearInterval(this.IntervalConnection),this.$bus.off("removeQueueRegister"),this.$bus.off("refreshRegisters"),this.$off("reloadModels"),clearInterval(this.intervalGetModels)},components:{navBar:u.a,processed:d,queue:f},methods:{logout:function(){this.$auth.logout(),this.$router.push({name:"login"})},filterQueue:function(){this.pageQueue=0,this.getModels()},createProcess:function(){this.$router.push({name:"process"})},registerListener:function(){this.$on("reloadModels",this.getModels),this.$bus.on("removeQueueRegister",this.removeQueueRegister),this.$bus.on("refreshRegisters",this.getModels),this.intervalGetModels=setInterval(this.getModels,3e4)},removeQueueRegister:function(e){var t=this;r.a.delete(e.id).then(function(){t.$auth.fetch(),t.queue.data.splice(e,1),t.$message({type:"success",message:"Eliminado con exito"}),t.getModels()})},changeQueueList:function(e){this.pageQueue=e,this.getModels()},changeProcessedList:function(e){this.pageProcessed=e,this.getModels()},getModels:function(){var e=this;C.a.all([r.a.getProcess(this.limit,this.offset,this.pageProcessed,5,this.searchProcessed,this.$auth.user().id),r.a.getProcess(this.limit,this.offset,this.pageQueue,1,this.searchQueue,this.$auth.user().id)]).then(function(t){e.processed=t[0].data,e.queue=t[1].data,e.totalQueue=t[1].data.total,e.totalProcessed=t[0].data.total,e.loading=!1})},addCurrentConnection:function(){var e=this;this.IntervalConnection=setInterval(function(){r.a.addCurrentConnection(e)},5e3)},checkUserIsValidated:function(){this.$auth.user().meta.is_active||this.$alert("Tu cuenta esta desactivada. Para activarla debes acceder a tu buzón de correo.",{confirmButtonText:"Ok",type:"error",title:"Error de acceso",center:!0}).then(this.logout)},canCreate:function(){return this.$auth.user().meta.models>0&&this.canCreateProcess()},canCreateProcess:function(){var e=this,t=!1;return _.each(this.$auth.user().roles,function(a){t||(t=e.eachRolesPermissions(a,e.havePermissionToCreateProcess))}),t},eachRolesPermissions:function(e,t){var a=[],i=!1;return(a=e.permissions)&&_.each(a.split(","),function(e){e&&t(e)&&(i=!0)}),i},havePermissionToCreateProcess:function(e){return"createProcess"===e.trim()}},data:function(){return{loading:!0,queue:{data:[]},processed:{data:[]},limit:5,offset:0,pageQueue:0,pageProcessed:0,totalQueue:0,totalProcessed:0,searchQueue:"",searchProcessed:""}}},w={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("nav-bar"),e._v(" "),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-md-6"},[e._m(0),e._v(" "),a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"Búsqueda rápida de casos procesados"},on:{change:e.getModels},model:{value:e.searchProcessed,callback:function(t){e.searchProcessed=t},expression:"searchProcessed"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1),e._v(" "),a("processed",{attrs:{registers:e.processed.data}}),e._v(" "),e.processed.data.length>0?a("div",{staticClass:"mt-1"},[a("el-pagination",{attrs:{small:"","page-size":e.limit,layout:"prev, pager, next",total:e.totalProcessed},on:{"current-change":e.changeProcessedList}})],1):e._e(),e._v(" "),e.processed.data.length<1&&!e.loading?a("div",[a("center",[a("img",{staticClass:"fadeIn animated",staticStyle:{"margin-top":"35px"},attrs:{height:"100",src:"/static/finish.svg"}}),e._v(" "),a("h3",{staticStyle:{"margin-top":"10px"}},[e._v("No hay casos procesados")]),e._v(" "),e.canCreate()?a("el-badge",{staticClass:"item",attrs:{value:e.$auth.user().meta.models+" restantes"}},[e.canCreate()?a("button",{staticClass:"btn-outline-primary btn",on:{click:e.createProcess}},[a("i",{staticClass:"icon plus"}),e._v("Nuevo Caso")]):e._e()]):e._e()],1)],1):e._e(),e._v(" "),e.loading?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("h4",[e._v("esperando casos..")])]):e._e()],1),e._v(" "),a("div",{staticClass:"col-md-6"},[e._m(1),e._v(" "),a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"Búsqueda rápida de casos en cola"},on:{change:e.filterQueue},model:{value:e.searchQueue,callback:function(t){e.searchQueue=t},expression:"searchQueue"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1),e._v(" "),a("queue",{attrs:{registers:e.queue.data}}),e._v(" "),e.queue.data.length>0?a("div",{staticClass:"mt-1"},[a("el-pagination",{attrs:{small:"","page-size":e.limit,layout:"prev, pager, next",total:e.totalQueue},on:{"current-change":e.changeQueueList}})],1):e._e(),e._v(" "),e.queue.data.length<1&&!e.loading?a("div",[a("center",[a("img",{staticClass:"fadeIn animated",staticStyle:{"margin-top":"30px"},attrs:{height:"105",src:"/static/database.svg"}}),e._v(" "),a("h3",{staticStyle:{"margin-top":"10px"}},[e._v("No hay casos pendientes por procesar.")]),e._v(" "),e.canCreate()?a("el-badge",{staticClass:"item",attrs:{value:e.$auth.user().meta.models+" restantes"}},[e.canCreate()?a("button",{staticClass:"btn btn-outline-primary",on:{click:e.createProcess}},[a("i",{staticClass:"icon plus"}),e._v("Nuevo caso")]):e._e()]):e._e()],1)],1):e._e(),e._v(" "),e.loading?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("h4",[e._v("esperando casos..")])]):e._e()],1)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("h3",[t("i",{staticClass:"tasks icon circular inverted blue"}),this._v("CASOS PROCESADOS")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",[t("i",{staticClass:"cube icon circular inverted blue"}),this._v(" CASOS PENDIENTES")])}]},y=a("VU/8")(b,w,!1,null,null,null).exports,x=a("Ubyc"),R=a("M4fF"),S=a.n(R),k={components:{"vue-typer":x.VueTyper},name:"Login",mounted:function(){this.getMessages(),this.registerEvents(),this.detectPage()},data:function(){return{visibleModalTerms:!1,checked:!1,use:null,visibilityDialogHowUserKnowUs:!1,activateAccount:!1,errors:[],loading:null,forgotPassword:!1,register:!1,email:"",password:"",loginError:!1,registerError:!1,name:"",lastname:"",company:"",phone:"",passwordConfirm:"",password_confirmation:""}},methods:{setUse:function(e){this.use=e},validateEmail:function(e){var t=this;return r.a.validateEmail(this.email).then(function(e){e.data[0]||t.$alert("La dirección de correo no existe, ¿Puedes revisar la dirección de correo? Te vamos a enviar un correo de activación despues del registro, Es fundamental que ingreses un correo existente para poder usar el sistema.",{title:"Advertencia",type:"warning",center:!0})})},validateResetAfter:function(){this.errors=[];var e=[];if(""===this.email&&e.push("El email no puede estar vacio."),""===this.password&&e.push("El password no puede estar vacio."),""===this.password_confirmation&&e.push("La confirmación de password no puede estar vacio."),this.password.length<6&&e.push("El password debe de tener mínimo 6 caracteres"),this.password_confirmation!==this.password&&e.push("Las contraseñas no coinciden."),e.length>0&&this.errors.push(e[0]),this.errors.length<1)return!0},resetAfter:function(){var e=this;this.validateResetAfter()&&r.a.resetPassword({token:this.$route.params.id,email:this.email,password:this.password,password_confirmation:this.password_confirmation}).then(function(t){"success"===t.data.status&&(e.showSuccessResetMessage(),e.login()),"error"===t.data.status&&e.showErrorResetMessage()})},showErrorResetMessage:function(){this.errors.push("No se ha podido cambiar la contraseña, la solicitud ya ha sido ejecutada o a caducado.")},showSuccessResetMessage:function(){this.activateAccount=!1,this.$alert("La contraseña fue restablecida.",{title:"Advertencia",type:"warning",center:!0})},cancelResetAfter:function(){this.activateAccount=!1,this.$router.push({name:"login",query:{}})},registerPage:function(){this.errors=[],this.$router.push({name:"login",query:{show:"register"}}),this.register=1},cancelRegister:function(){this.errors=[],this.registerError=!1,this.$router.push({name:"login",query:{}}),this.register=0},cancelReset:function(){this.errors=[],this.$router.push({name:"login",query:{}}),this.forgotPassword=0},forgotPasswordPage:function(){this.errors=[],this.$router.push({name:"login",query:{show:"reset"}}),this.forgotPassword=!0},detectPage:function(){"reset"===this.$route.query.show&&(this.forgotPassword=!0,this.register=!1),"register"===this.$route.query.show&&(this.register=!0),"reset-after"===this.$route.query.show&&(this.activateAccount=!0,this.register=!1)},registerEvents:function(){var e=this;this.$parent.$on("login-error",function(t){console.log("si aparece esto y no estamos en la pagina de login posicionados"),console.log("es porque debemos apagar el evento. !! IMPORTANTE !!"),e.loginError=t})},getMessages:function(){S.a.isNil(this.$route.query.message)||("Cuenta activada"===this.$route.query.message&&(this.$router.replace({query:{}}),this.$alert("La cuenta ha sido activada",{title:"Advertencia",confirmButtonText:"Gracias",type:"warning",center:!0})),"No hemos podido validar tu cuenta"===this.$route.query.message&&(this.$router.replace({query:{}}),this.$alert("No hemos podido validar tu cuenta, debes usar el ultimo correo de activación enviado.",{title:"Advertencia",confirmButtonText:"Gracias",type:"error",center:!0})),"Cuenta eliminada"===this.$route.query.message&&(this.$router.replace({query:{}}),this.$alert("Hemos eliminado tu cuenta en MAEP.",{title:"Advertencia",confirmButtonText:"Ok",type:"warning",center:!0})))},showErrorReset:function(){this.$alert("Al parecer tu correo de registro no existe en nuestra base de datos, prueba con otra dirección de correo.",{confirmButtonText:"Ok",title:"Error al restablecer password",type:"error",center:!0})},showSuccessReset:function(){this.$alert("El correo fue enviado con exito, porfavor revisa tu bandeja de entrada.",{confirmButtonText:"Gracias",title:"Notificación del sistema",type:"warning",center:!0}),this.forgotPassword=!1},reset:function(){this.showLoading();var e=this;r.a.reset(this.email).then(function(t){e.hideLoading(),"error"===t.data.status?e.showErrorReset():e.showSuccessReset()})},capitalize:function(e){return e.toLowerCase().replace(/\b./g,function(e){return e.toUpperCase()})},formatName:function(){return this.capitalize(this.name.toLowerCase())},formatLastName:function(){return this.capitalize(this.lastname.toLowerCase())},formatEmail:function(){return this.email.toLowerCase()},formatCompany:function(){return this.company.toUpperCase()},login:function(){this.$auth.login({data:{email:this.email,password:this.password},rememberMe:!0})},validateUser:function(){this.errors=[],this.registerError=!1;var e=[];if(""===this.name&&e.push("El nombre es obligatorio"),""===this.lastname&&e.push("El apellido es requerido"),""===this.company&&e.push("La empresa es requerida"),""===this.phone&&e.push("El teléfono es requerido"),""===this.email&&e.push("El email es requerido"),""===this.password&&e.push("El password es requerido"),this.password.length<6&&e.push("El password debe de tener mínimo 6 caracteres"),""===this.passwordConfirm&&e.push("La confirmación de password es requerida"),this.password!==this.passwordConfirm&&e.push("El password y la confirmación del password no coinciden."),""===this.company&&e.push("La empresa es requerida"),e.length>0&&this.errors.push(e[0]),!(this.errors.length>0))return!0;this.registerError=!0},showLoading:function(){this.loading=this.$loading({lock:!0,text:"Por favor espere mientras enviamos el correo...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"})},showSuccessMessage:function(){this.$alert("Para finalizar el registro revisa tu buzón de correo.","El usuario se ha creado correctamente",{confirmButtonText:"Gracias",type:"warning",center:!0})},displayPopUp:function(){window.open("https://github.com/maep-tools/","Documentación","height=1000,width=1500")},hideLoading:function(){this.loading.close(),this.$forceUpdate()},changeUseRadio:function(e){console.log(e)},registerNew:function(){this.visibilityDialogHowUserKnowUs=!1;var e=this;this.validateUser()&&(this.showLoading(),r.a.register({email:this.formatEmail(this.email),password:this.password,passwordConfirm:this.passwordConfirm,company:this.company,phone:this.phone,name:this.formatName(this.name),use:this.use,lastname:this.formatLastName(this.lastname)}).then(function(t){S.a.isNil(t.data)?(e.hideLoading(),e.registerError=!0,e.errors.push("El email ya existe en la base de datos.")):(e.register=!1,e.showSuccessMessage(),e.hideLoading())}))}}},$={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:"Términos y condiciones",visible:e.visibleModalTerms,width:"50%"},on:{"update:visible":function(t){e.visibleModalTerms=t}}},[a("span",[e._v("Autorizo expresamente a MAEP quien, actuando en calidad de Responsable del Tratamiento de Datos Personales, está recolectando información personal para el adecuado desarrollo de sus actividades comerciales, así como para el fortalecimiento de sus relaciones con terceros, pudiendo almacenar, usar, circular y suprimir estos Datos Personales considerando, más no limitando, el uso siguiente a los datos personales: • Permitir la participación de los Titulares en actividades de mercadeo y promocionales (incluyendo la participación en concursos, rifas y sorteos) realizados por MAEP;  • Evaluar la calidad del servicio, realizar estudios de mercado sobre necesidades, hábitos de consumo y análisis estadísticos para usos internos;  • Dar respuesta a consultas, peticiones, quejas y reclamos que sean realizadas por los Titulares y organismos de control y trasmitir los Datos Personales a las demás autoridades que en virtud de la ley aplicable deban recibir los Datos Personales;  • Para eventualmente contactar, vía correo electrónico, o por cualquier otro medio, a personas naturales con quienes tiene o ha tenido relación, tales como, sin que la enumeración signifique limitación, trabajadores y familiares de éstos, accionistas, consumidores, clientes, distribuidores, proveedores, acreedores y deudores, para las finalidades antes mencionadas.  • Transferir la información recolectada a distintas áreas de MAEP para el desarrollo de sus operaciones (recaudo de cartera y cobros administrativo, tesorería, contabilidad, entre otros); • Para la atención de requerimientos judiciales o administrativos y el cumplimiento de mandatos judiciales o legales;  • Registrar sus datos personales en los sistemas de información de MAEP y en sus bases de datos comerciales y operativas;  • Cualquier otra actividad de naturaleza similar a las anteriormente descritas que sean necesarias para desarrollar el objeto social de MAEP con el propósito de su uso para contacto posterior.\n")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visibleModalTerms=!1}}},[e._v("Cerrar")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"Uso del sistema",visible:e.visibilityDialogHowUserKnowUs,width:"30%",center:""},on:{"update:visible":function(t){e.visibilityDialogHowUserKnowUs=t}}},[a("span",[e._v("Es muy importante para nosotros saber como vas a usar el sistema.")]),e._v(" "),a("hr"),e._v(" "),a("center",[a("button",{staticClass:"btn btn-outline-primary",on:{click:function(t){e.setUse("comercial")}}},[e._v("Uso comercial")]),e._v(" "),a("button",{staticClass:"btn btn-outline-primary",on:{click:function(t){e.setUse("academico")}}},[e._v("Uso academico")]),e._v(" "),a("button",{staticClass:"btn btn-outline-primary",on:{click:function(t){e.setUse("desarrollo")}}},[e._v("Desarrollo")])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visibilityDialogHowUserKnowUs=!1}}},[e._v("Cancelar")]),e._v(" "),e.use?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.registerNew()}}},[e._v("Continuar registro")]):e._e()],1)],1),e._v(" "),a("section",{staticClass:"bg-white hero p-0"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6 col-sm-12 bg-light text-center col-fixed hidden-mobile"},[e._m(0),e._v(" "),e._m(1),e._v(" "),a("p",{staticClass:"mt-4",staticStyle:{color:"black"}},[e._v("\n                Herramienta para el planeamiento de la operación de sistemas hidrotérmicos.\n          ")]),e._v(" "),a("div",{staticClass:"pt-1"},[a("button",{staticClass:"button ui yellow",staticStyle:{color:"black"},on:{click:function(t){e.displayPopUp()}}},[a("i",{staticClass:"icon info"}),e._v(" Información del sistema\n            ")])])]),e._v(" "),e.register||e.forgotPassword||e.activateAccount?e._e():a("div",{staticClass:"col-md-6 ml-auto fixed-left"},[a("section",{staticClass:"bg-white"},[a("div",{staticClass:"container"},[e._m(2),e._v(" "),a("div",{staticClass:"row mt-4"},[a("div",{staticClass:"col-sm-10 mx-auto mt-2"},[e.loginError?a("div",{staticClass:"ui error message"},[e._m(3)]):e._e(),e._v(" "),a("div",{attrs:{id:"main-offer-form"}},[a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Email")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control login-input lowercase",attrs:{type:"text",name:"email",placeholder:"Dirección de correo"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Contraseña")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control login-input",attrs:{type:"password",name:"password",placeholder:"Contraseña"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),a("center",[a("button",{staticClass:"btn btn-primary",attrs:{disabled:!this.email||!this.password},on:{click:e.login}},[a("i",{staticClass:"icon play"}),e._v("Iniciar sesión\n                      ")]),e._v(" "),a("button",{staticClass:"btn btn-dark",on:{click:function(t){e.registerPage()}}},[a("i",{staticClass:"icon pencil"}),e._v("Registro\n                      ")]),e._v(" "),a("hr"),e._v(" "),a("a",{staticStyle:{"font-weight":"bold",cursor:"pointer"},on:{click:function(t){e.forgotPasswordPage()}}},[e._v("Olvidaste tu contraseña "),a("i",{staticClass:"icon question circular small"})])])],1)])])])])]),e._v(" "),e.register?a("div",{staticClass:"col-md-6 ml-auto fixed-left"},[a("section",{staticClass:"bg-white"},[a("div",{staticClass:"container"},[e._m(4),e._v(" "),a("div",{staticClass:"row mt-4"},[a("div",{staticClass:"col-sm-10 mx-auto mt-2"},[e.registerError?a("div",{staticClass:"ui error message"},[a("ul",{staticClass:"list-unstyled"},e._l(e.errors,function(t){return a("li",[e._v(e._s(t))])}))]):e._e(),e._v(" "),a("div",{attrs:{id:"main-offer-form"}},[a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Nombre")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"form-control login-input register-input",attrs:{type:"text",name:"name",placeholder:"Nombre*"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Apellido")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.lastname,expression:"lastname"}],staticClass:"form-control login-input register-input",attrs:{type:"text",name:"lastname",placeholder:"Apellido*"},domProps:{value:e.lastname},on:{input:function(t){t.target.composing||(e.lastname=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Empresa")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.company,expression:"company"}],staticClass:"form-control login-input register-input",attrs:{type:"text",name:"company",placeholder:"Empresa*"},domProps:{value:e.company},on:{input:function(t){t.target.composing||(e.company=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Teléfono de contacto")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],staticClass:"form-control login-input register-input",attrs:{type:"text",name:"phone",placeholder:"Teléfono"},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Email")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control login-input register-input",attrs:{type:"text",name:"email",placeholder:"Dirección de correo*"},domProps:{value:e.email},on:{change:function(t){e.validateEmail()},input:function(t){t.target.composing||(e.email=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Contraseña")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control login-input register-input",attrs:{type:"password",name:"password",placeholder:"Contraseña*"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Confirmación de contraseña")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.passwordConfirm,expression:"passwordConfirm"}],staticClass:"form-control login-input register-input",attrs:{type:"password",name:"password",placeholder:"Repetir contraseña*"},domProps:{value:e.passwordConfirm},on:{input:function(t){t.target.composing||(e.passwordConfirm=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group"},[a("el-checkbox",{model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v(" Acepto condiciones de uso de acuerdo a la ley 1581 de 2012")]),e._v(" "),a("small",{staticStyle:{cursor:"pointer"},on:{click:function(t){e.visibleModalTerms=!0}}},[e._v("(Información)")])],1),e._v(" "),a("center",[a("button",{staticClass:"btn btn-primary",attrs:{disabled:""==e.passwordConfirm||!e.checked||""==e.name||""==e.lastname||""==e.company||""==e.phone||""==e.email},on:{click:function(t){e.visibilityDialogHowUserKnowUs=!0}}},[a("i",{staticClass:"icon pencil"}),e._v("Registro\n                      ")]),e._v(" "),a("button",{staticClass:"btn btn-dark",on:{click:function(t){e.cancelRegister()}}},[a("i",{staticClass:"icon cancel"}),e._v("Cancelar\n                      ")])])],1)])])])])]):e._e(),e._v(" "),e.forgotPassword?a("div",{staticClass:"col-md-6 ml-auto fixed-left"},[a("section",{staticClass:"bg-white"},[a("div",{staticClass:"container"},[e._m(5),e._v(" "),a("div",{staticClass:"row mt-4"},[a("div",{staticClass:"col-sm-10 mx-auto mt-2"},[e.loginError?a("div",{staticClass:"ui error message"},[e._m(6)]):e._e(),e._v(" "),a("div",{attrs:{id:"main-offer-form"}},[a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Email")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control login-input",attrs:{type:"text",name:"email",placeholder:"Email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),e._v(" "),a("center",[a("button",{staticClass:" btn btn-primary",attrs:{disabled:""===this.email},on:{click:e.reset}},[a("i",{staticClass:"icon mail"}),e._v("Restablecer\n                      ")]),e._v(" "),a("button",{staticClass:"btn btn-dark",on:{click:function(t){e.cancelReset()}}},[a("i",{staticClass:"icon cancel"}),e._v("Cancelar\n                      ")])])],1)])])])])]):e._e(),e._v(" "),e.activateAccount?a("div",{staticClass:"col-md-6 ml-auto fixed-left"},[a("section",{staticClass:"bg-white"},[a("div",{staticClass:"container"},[e._m(7),e._v(" "),a("div",{staticClass:"row mt-4"},[a("div",{staticClass:"col-sm-10 mx-auto mt-2"},[e.errors.length>0?a("div",{staticClass:"ui error message"},[a("ul",{staticClass:"list-unstyled"},e._l(e.errors,function(t){return a("li",[e._v(e._s(t))])}))]):e._e(),e._v(" "),a("div",{attrs:{id:"main-offer-form"}},[a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Email")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control login-input",attrs:{type:"text",name:"email",placeholder:"Email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Password")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control login-input",attrs:{type:"password",name:"email",placeholder:"Password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Confirmación de password")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password_confirmation,expression:"password_confirmation"}],staticClass:"form-control login-input",attrs:{type:"password",placeholder:"Escriba otra vez su contraseña",required:""},domProps:{value:e.password_confirmation},on:{input:function(t){t.target.composing||(e.password_confirmation=t.target.value)}}})]),e._v(" "),a("center",[a("button",{staticClass:" btn btn-primary",attrs:{disabled:""===this.email||""===this.password||""==this.password_confirmation},on:{click:function(t){e.resetAfter()}}},[a("i",{staticClass:"icon flag checkered"}),e._v("Finalizar\n                      ")]),e._v(" "),a("button",{staticClass:"btn btn-dark",on:{click:function(t){e.cancelResetAfter()}}},[a("i",{staticClass:"icon cancel"}),e._v("Cancelar\n                      ")])])],1)])])])])]):e._e()])])])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("img",{staticClass:"animated fadeIn",attrs:{width:"200",src:"/static/Vector.svg"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{staticClass:"pt-4"},[t("span",{staticStyle:{display:"none"}},[this._v("MAEP")]),t("br"),this._v(" "),t("span",{staticStyle:{color:"black"}},[this._v("\n                     Modelo de Análisis Eléctrico y Planeamiento\n                  ")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-8 mx-auto text-center"},[t("h2",[this._v("\n                              INICIAR SESIÓN\n                           ")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",{staticClass:"list-unstyled"},[t("li",[this._v("Revisa que los datos de acceso sean validos.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-8 mx-auto text-center"},[t("h2",[this._v("\n                              REGISTRO DE NUEVOS USUARIOS\n                           ")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-8 mx-auto text-center"},[t("h2",[this._v("\n                              RESTABLECER CUENTA DE USUARIO\n                           ")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",{staticClass:"list-unstyled"},[t("li",[this._v("Revisa que los datos de acceso sean validos.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-8 mx-auto text-center"},[t("h2",[this._v("\n                              RESTABLECER CUENTA DE USUARIO\n                           ")])])])}]},D=a("VU/8")(k,$,!1,null,null,null).exports,E=a("K5i+"),T={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"container",attrs:{"element-loading-text":e.loadingMessage}},[a("nav-bar"),e._v(" "),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-md-12"},[a("process-step",{attrs:{activeStep:e.activeStep}})],1)]),e._v(" "),e.errors.length>0?a("div",{staticClass:"row",staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"col-md-11 offset-md-1"},e._l(e.errors,function(e){return a("el-alert",{key:e,attrs:{title:"Errores de validación",description:e.message,type:"error"}})}))]):e._e(),e._v(" "),a("div",{staticClass:"row mt-3"},[0===e.activeStep?a("div",{staticClass:"col-md-11 offset-md-1"},[a("configStep",{attrs:{templates:e.templates,configData:e.configData,windData:e.windData,infoData:e.infoData}})],1):e._e(),e._v(" "),1===e.activeStep&&e.categories.length>0&&e.modulesInfoLoaded?a("div",{staticClass:"col-md-12"},[a("hr"),e._v(" "),a("inputStep",{attrs:{infoData:e.infoData,configData:e.configData,infoLoaded:e.modulesInfoLoadedInfo,data:e.modulesInfo,categories:e.categories}})],1):e._e(),e._v(" "),2===e.activeStep?a("div",{staticClass:"col-md-10 offset-md-1"},[a("process-progress",{attrs:{info:e.info,progress:e.progress}})],1):e._e(),e._v(" "),3===e.activeStep?a("div",{staticClass:"col-md-12"},[a("process-results",{attrs:{infoData:e.infoData}})],1):e._e()])],1)},staticRenderFns:[]},z=a("VU/8")(E.a,T,!1,null,null,null).exports,N={props:["registers","online"],methods:{editUser:function(e){this.$router.push({name:"user",params:{id:e.id}})},isActivated:function(e){return e.meta.is_active},isOnline:function(e){return _.find(this.online,{id:e.id})},getColorType:function(e){return"admin"===e.name?"danger":"member"===e.name?"warning":"visitor"===e.name?"success":void 0},isNotCurrent:function(e){return e.id!==this.$auth.user().id},sendSuccessDeleteMessage:function(){this.$message({type:"success",message:"Eliminado con exito"})},canDeleteUser:function(){var e=this,t=!1;return _.each(this.$auth.user().roles,function(a){t||(t=e.eachRolesPermissions(a,e.havePermissionToDeleteUser))}),t},canEditUser:function(){var e=this,t=!1;return _.each(this.$auth.user().roles,function(a){t||(t=e.eachRolesPermissions(a,e.havePermissionToEditUser))}),t},canShowUser:function(){var e=this,t=!1;return _.each(this.$auth.user().roles,function(a){t||(t=e.eachRolesPermissions(a,e.havePermissionToSeeUser))}),t},canShowStatistics:function(){var e=this,t=!1;return _.each(this.$auth.user().roles,function(a){t||(t=e.eachRolesPermissions(a,e.havePermissionToSeeStatistics))}),t},eachRolesPermissions:function(e,t){var a=[],i=!1;return(a=e.permissions)&&_.each(a.split(","),function(e){e&&t(e)&&(i=!0)}),i},havePermissionToDeleteUser:function(e){return"deleteUsers"===e.trim()},havePermissionToEditUser:function(e){return"editUsers"===e.trim()},havePermissionToSeeUser:function(e){return"seeUser"===e.trim()},havePermissionToSeeStatistics:function(e){return"seeStatistics"===e.trim()},cancelDelete:function(){this.$message({message:"Eliminación cancelada",type:"warning"})},deleteUser:function(e){var t=this;e&&r.a.deleteUser(this.register.id).then(function(){t.registers.splice(t.register,1),t.sendSuccessDeleteMessage(),t.$parent.$emit("reloadUsers")})},remove:function(e){this.register=e,this.$confirm("Esto borrara el usuario por completo. Continuar?","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"warning"}).then(this.deleteUser).catch(this.cancelDelete)}}},U={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-top":"5px"}},[a("ul",{staticClass:"list-group"},e._l(e.registers,function(t){return a("li",{key:t.id,staticClass:"list-group-item d-flex justify-content-between align-items-center"},[a("div",[a("h5",{staticClass:"mb-1"},[e._v(e._s(t.name.toUpperCase())+" "+e._s(t.lastname.toUpperCase())+" \n                "),e._l(t.roles.slice(0,3),function(t){return a("el-tag",{key:t.id,staticStyle:{"margin-right":"2px"},attrs:{type:e.getColorType(t),size:"mini"}},[e._v(e._s(t.name))])}),e._v(" "),a("el-tag",{attrs:{type:"danger",size:"mini"}},[e._v(e._s(t.meta.models)+" casos restantes")])],2),e._v(" "),a("small",{staticStyle:{color:"grey"}},[a("i",{staticClass:"user circle outline black icon"}),e._v(" "+e._s(t.email)+"   "),a("i",{staticClass:"building circle black icon"}),e._v(e._s(t.meta.company))]),e._v(" "),e.isOnline(t)?a("small",[a("i",{staticClass:"icon ui circle green"}),e._v(" Online")]):e._e(),e._v(" "),e.isActivated(t)?a("small",[a("i",{staticClass:"icon ui circle yellow"}),e._v("Cuenta activa")]):e._e(),e._v(" "),e.isActivated(t)?e._e():a("small",[a("i",{staticClass:"icon ui circle red"}),e._v(" Cuenta inactiva")])]),e._v(" "),a("div",[e.canShowUser()?a("button",{staticClass:"btn btn-sm btn-outline-primary",on:{click:function(a){e.editUser(t)}}},[a("i",{staticClass:"cube icon"}),e._v("Propiedades")]):e._e(),e._v(" "),e.isNotCurrent(t)&&e.canDeleteUser()?a("button",{staticClass:"btn btn-sm btn-outline-danger",on:{click:function(a){e.remove(t)}}},[a("i",{staticClass:"trash icon"}),e._v("Eliminar")]):e._e()])])}))])},staticRenderFns:[]};var P=a("VU/8")(N,U,!1,function(e){a("T3Qk")},null,null).exports,M={name:"Users",mounted:function(){this.getUsers(),this.$socket.emit("adminUsers"),this.registerListener(),this.addCurrentConnection()},destroyed:function(){clearInterval(this.interval),clearInterval(this.IntervalConnection),this.$off("reloadModels"),this.$socket.emit("adminUsers-leave")},components:{users:P,navBar:u.a},methods:{goToRoles:function(){this.$router.push({name:"roles"})},canShowStatistics:function(){var e=this,t=!1;return _.each(this.$auth.user().roles,function(a){t||(t=e.eachRolesPermissions(a,e.havePermissionToSeeStatistics))}),t},canDownloadUsers:function(){var e=this,t=!1;return _.each(this.$auth.user().roles,function(a){t||(t=e.eachRolesPermissions(a,e.havePermissionToDownloadUsers))}),t},canShowRoles:function(){var e=this,t=!1;return _.each(this.$auth.user().roles,function(a){t||(t=e.eachRolesPermissions(a,e.havePermissionToSeeRoles))}),t},eachRolesPermissions:function(e,t){var a=[],i=!1;return(a=e.permissions)&&_.each(a.split(","),function(e){e&&t(e)&&(i=!0)}),i},havePermissionToSeeStatistics:function(e){return"seeStatistics"===e.trim()},havePermissionToSeeRoles:function(e){return"seeRoles"===e.trim()},havePermissionToDownloadUsers:function(e){return"downloadUsers"===e.trim()},goToAnalytics:function(){window.open("https://analytics.google.com/analytics","_blank")},userScreen:function(){if("users"!==this.showing)return"CONECTADOS"},isActive:function(e){if(this.showing===e)return!0},downloadUsers:function(){r.a.downloadExcel().then(function(e){var t=document.createElement("a");t.href=e.data.file,t.download=e.data.name,document.body.appendChild(t),t.click(),t.remove()})},showAllUsers:function(){this.showing="users",this.users.data=this.usersCopy.data},showConnected:function(){this.showing="connected",this.users.data=this.info.users},addCurrentConnection:function(){var e=this;this.IntervalConnection=setInterval(function(){r.a.addCurrentConnection(e)},5e3)},filterUser:function(){this.showing="users",this.pageUsers=0,this.getUsers()},createProcess:function(){this.$router.push({name:"process"})},intervalModels:function(){var e=this;this.inverval=setInterval(function(){e.getUsers()},3e4)},registerListener:function(){var e=this;this.$on("reloadModels",this.getUsers),this.$options.sockets.users=function(t){e.info=t,"users"!==e.showing&&e.showConnected()},this.$socket.emit("connected",{user:this.$auth.user(),date:new Date})},changeUsersList:function(e){this.pageUsers=e,this.getUsers()},getUsers:function(){var e=this;C.a.all([r.a.getUsers(this.limit,this.offset,this.pageUsers,null,this.searchUser)]).then(function(t){e.usersCopy=_.clone(t[0].data,!0),e.users=t[0].data,e.totalUsers=t[0].data.total,e.loading=!1})}},data:function(){return{loading:!0,showing:"users",info:{users:[]},usersCopy:{data:[]},users:{data:[]},limit:5,offset:0,pageUsers:0,totalUsers:0,searchUser:""}}},I={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("nav-bar"),e._v(" "),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-md-8"},[a("h3",[a("i",{staticClass:"users icon circular inverted yellow"}),e._v("USUARIOS "+e._s(e.userScreen()))]),e._v(" "),a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"Búsqueda rápida de usuarios"},on:{change:e.filterUser},model:{value:e.searchUser,callback:function(t){e.searchUser=t},expression:"searchUser"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1),e._v(" "),a("users",{attrs:{online:e.info.users,registers:e.users.data}}),e._v(" "),e.users.data.length>0?a("div",{staticClass:"mt-1"},[a("el-pagination",{attrs:{small:"","page-size":e.limit,layout:"prev, pager, next",total:e.totalUsers},on:{"current-change":e.changeUsersList}})],1):e._e(),e._v(" "),!e.loading&&e.users.data.length<1?a("el-alert",{attrs:{title:"No hay usuarios con esa descripción",type:"info",closable:!1,"show-icon":!1,description:"No encontramos usuarios con esa descripción","show-icon":""}}):e._e(),e._v(" "),e.loading?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("h4",[e._v("esperando..")])]):e._e()],1),e._v(" "),a("div",{staticClass:"col-md-4"},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"1","background-color":"#545c64","text-color":"#ffffff","active-text-color":"#ffd04b"}},[a("el-menu-item",{attrs:{index:"1"},on:{click:function(t){e.showAllUsers()}}},[a("i",{staticClass:"el-icon-menu white"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Usuarios")])]),e._v(" "),a("el-menu-item",{attrs:{index:"2"},on:{click:function(t){e.showConnected()}}},[a("i",{staticClass:"el-icon-sort white"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Usuarios activos")])]),e._v(" "),e.canDownloadUsers()?a("el-menu-item",{attrs:{index:"3"},on:{click:function(t){e.downloadUsers()}}},[a("i",{staticClass:"el-icon-download white"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Descargar en excel")])]):e._e(),e._v(" "),e.canShowRoles()?a("el-menu-item",{attrs:{index:"4"},on:{click:function(t){e.goToRoles()}}},[a("i",{staticClass:"el-icon-setting white"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Roles y permisos")])]):e._e(),e._v(" "),e.canShowStatistics()?a("el-menu-item",{attrs:{index:"6"},on:{click:function(t){e.goToAnalytics()}}},[a("i",{staticClass:"el-icon-info white"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Google Analytics")])]):e._e()],1),e._v(" "),a("hr"),e._v(" "),e.canShowStatistics()?a("div",{staticClass:"ui horizontal statistics blue"},[a("div",{staticClass:"statistic white"},[a("div",{staticClass:"value"},[a("i",{staticClass:"chart bar small circular outline icon"}),e._v(" "+e._s(e.totalUsers)+"\n          ")]),e._v(" "),a("div",{staticClass:"label"},[e._v("\n            Usuarios registrados\n          ")])]),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:!e.info.connected,expression:"!info.connected"}],staticClass:"statistic white animated  fadeIn",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"Conectando..."}},[a("div",{staticClass:"value"},[a("i",{staticClass:"user circular small icon"}),e._v(" "+e._s(e.info.connected)+"\n          ")]),e._v(" "),a("div",{staticClass:"label"},[e._v("\n            Usuarios conectados\n          ")])])]):e._e()],1)])],1)},staticRenderFns:[]},A=a("VU/8")(M,I,!1,null,null,null).exports,F={name:"Profile",mounted:function(){this.setData()},components:{navBar:u.a},methods:{setData:function(){this.email=this.$auth.user().email,this.name=this.$auth.user().name,this.lastname=this.$auth.user().lastname,this.company=this.$auth.user().meta.company,this.phone=this.$auth.user().meta.phone},capitalize:function(e){return e.toLowerCase().replace(/\b./g,function(e){return e.toUpperCase()})},formatName:function(){return this.capitalize(this.name.toLowerCase())},formatLastName:function(){return this.capitalize(this.lastname.toLowerCase())},formatEmail:function(){return this.email.toLowerCase()},formatCompany:function(){return this.company.toUpperCase()},update:function(){var e=this;if(this.changePassword&&this.password!==this.password_confirmation)this.$message({type:"error",message:"El password y la confirmación del password no coinciden"});else{var t={id:this.$auth.user().id,name:this.formatName(this.name),email:this.formatEmail(this.email),lastname:this.formatLastName(this.lastname),roles:this.$auth.user().roles,meta:{company:this.company,terms_and_cond:1,marketing:0,phone:this.phone}};""!==this.password&&(t.password=this.password),this.$confirm("Estas modificando tu usuario. Continuar?","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"warning"}).then(function(){r.a.updateUser(t).then(function(){e.$auth.fetch(),e.setData(),e.$message({message:"Adverencia, Los permisos ya estan guardados.",type:"success"})})})}},goToDeleteAccount:function(){this.$router.push({name:"deleteAccount"})},goToMain:function(){this.$router.push({name:"main"})},goToAnswers:function(){this.$router.push({name:"answers"})},goToTerms:function(){this.$router.push({name:"terms"})}},data:function(){return{changePassword:!1,name:"",lastname:"",company:"",password:"",phone:"",password_confirmation:"",email:"",loading:!0}}},L={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("nav-bar"),e._v(" "),a("div",{staticClass:"row mt-5"},[e.$auth?a("div",{staticClass:"col-md-8"},[a("h3",[a("i",{staticClass:"icon user circular olive inverted"}),e._v("ACTUALIZAR DATOS DE "+e._s(e.name.toUpperCase()))]),e._v(" "),e._l(e.$auth.user().roles,function(t){return e.$auth.user().roles?a("el-tag",{key:t.id,staticStyle:{"margin-right":"10px"},attrs:{type:"danger"}},[a("i",{staticClass:"icon key"}),e._v(e._s(t.label))]):e._e()}),e._v(" "),e.$auth.user().meta?a("el-tag",{attrs:{type:"warning"}},[e._v(e._s(e.$auth.user().meta.models)+" disponibles")]):e._e(),e._v(" "),a("hr"),e._v(" "),a("div",{attrs:{id:"main-offer-form"}},[a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Nombre")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",name:"name",placeholder:"Nombre",required:""},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Apellido")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.lastname,expression:"lastname"}],staticClass:"form-control",attrs:{type:"text",name:"lastname",placeholder:"Apellido",required:""},domProps:{value:e.lastname},on:{input:function(t){t.target.composing||(e.lastname=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Compañia")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.company,expression:"company"}],staticClass:"form-control",attrs:{type:"text",name:"company",placeholder:"Empresa",required:""},domProps:{value:e.company},on:{input:function(t){t.target.composing||(e.company=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Teléfono")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],staticClass:"form-control",attrs:{type:"text",name:"phone",placeholder:"Teléfono",required:""},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Email")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",attrs:{type:"text",name:"email",placeholder:"Dirección de correo",required:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),e._v(" "),e.changePassword?e._e():a("button",{staticClass:"btn btn-outline-danger",on:{click:function(t){e.changePassword=!0}}},[a("i",{staticClass:"icon key"}),e._v(" Solicitar cambio de contraseña")]),e._v(" "),e.changePassword?a("div",[a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Contraseña")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",name:"password",placeholder:"Contraseña",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Repetir contraseña")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password_confirmation,expression:"password_confirmation"}],staticClass:"form-control",attrs:{type:"password",name:"password",placeholder:"Repetir contraseña",required:""},domProps:{value:e.password_confirmation},on:{input:function(t){t.target.composing||(e.password_confirmation=t.target.value)}}})])]):e._e(),e._v(" "),a("center",[a("button",{staticClass:"btn btn-dark float-right",staticStyle:{"margin-right":"10px"},on:{click:e.goToMain}},[a("i",{staticClass:"icon cancel"}),e._v("Cancelar ")]),e._v(" "),a("button",{staticClass:"btn btn-primary float-right",staticStyle:{"margin-right":"10px"},on:{click:e.update}},[a("i",{staticClass:"icon save"}),e._v("Actualizar\n          ")])])],1)],2):e._e(),e._v(" "),a("div",{staticClass:"col-md-4"},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"1","background-color":"#545c64","text-color":"#ffffff","active-text-color":"#ffd04b"}},[a("el-menu-item",{attrs:{index:"1"}},[a("i",{staticClass:"el-icon-tickets white"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Datos personales")])]),e._v(" "),a("el-menu-item",{attrs:{index:"2"},on:{click:function(t){e.goToTerms()}}},[a("i",{staticClass:"el-icon-printer white"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Terminos y condiciones")])]),e._v(" "),a("el-menu-item",{attrs:{index:"3"},on:{click:function(t){e.goToAnswers()}}},[a("i",{staticClass:"el-icon-info white"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Preguntas frecuentes")])]),e._v(" "),a("el-menu-item",{attrs:{index:"3"},on:{click:function(t){e.goToDeleteAccount()}}},[a("i",{staticClass:"el-icon-delete white"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Eliminar cuenta")])])],1)],1)])],1)},staticRenderFns:[]},B=a("VU/8")(F,L,!1,null,null,null).exports,q={mounted:function(){this.getRoles()},destroyed:function(){this.$off("reloadModels")},name:"Main",components:{users:P,navBar:u.a},methods:{capitalize:function(e){return e.toLowerCase().replace(/\b./g,function(e){return e.toUpperCase()})},formatRolName:function(e){return this.capitalize(e.toLowerCase())},eachRolesPermissions:function(e,t){var a=[],i=!1;return(a=e.permissions)&&_.each(a.split(","),function(e){e&&t(e)&&(i=!0)}),i},canEditRol:function(){var e=this,t=!1;return _.each(this.$auth.user().roles,function(a){t||(t=e.eachRolesPermissions(a,e.havePermissionToEditRol))}),t},canCreateRol:function(){var e=this,t=!1;return _.each(this.$auth.user().roles,function(a){t||(t=e.eachRolesPermissions(a,e.havePermissionToCreateRol))}),t},canDeleteRol:function(){var e=this,t=!1;return _.each(this.$auth.user().roles,function(a){t||(t=e.eachRolesPermissions(a,e.havePermissionToDeleteRol))}),t},havePermissionToCreateRol:function(e){return"createRoles"===e.trim()},havePermissionToEditRol:function(e){return"editRoles"===e.trim()},havePermissionToDeleteRol:function(e){return"deleteRoles"===e.trim()},canCreateRole:function(){if(!_.isNil(this.selectedRolObject))return"Administrador"!==this.selectedRolObject.name},canDeleteRole:function(){if(!_.isNil(this.selectedRolObject))return"Miembro"!==this.selectedRolObject.name&&"Administrador"!==this.selectedRolObject.name&&this.canDeleteRol()},addRole:function(){""!==this.rolName?r.a.createRol({name:this.rolName.replace(/\s/g,""),label:this.formatRolName(this.rolName),permissions:"createProcess,editProcess,deleteProcess,SeeProcess"}).then(this.showSuccessCreateMessage).catch(this.showErrorCreateMessage):this.showEmptyMessage()},savePermission:function(){""!==this.selectedRolObject.label?(this.selectedRolObject.label=this.formatRolName(this.selectedRolObject.label),r.a.updateRol(this.selectedRolObject.id,this.selectedRolObject).then(this.showSuccessUpdateMessage)):this.$message({message:"Debes introducir un nombre para el rol.",type:"error"})},refresh:function(){this.getRoles()},deleteRole:function(){r.a.removeRol(this.selectedRolObject.id).then(this.showSuccessRemoveMessage)},showErrorCreateMessage:function(){this.$message({message:"El nombre del rol ya existe.",type:"error"})},showEmptyMessage:function(){this.$message({message:"Debes introducir un nombre para el rol.",type:"error"})},showSuccessUpdateMessage:function(){this.$auth.fetch(),this.$message({message:"El rol se ha actualizado correctamente",type:"success"})},showSuccessCreateMessage:function(){this.getRoles(),this.$message({message:"El rol se ha creado correctamente",type:"success"})},showSuccessRemoveMessage:function(e){"success"===e.data.status?(this.getRoles(),this.$message({message:"El rol se ha eliminado correctamente",type:"success"})):this.$message({message:"El rol no se ha podido eliminar, verifique que no este en uso.",type:"error"})},isCheched:function(e){var t=!1;if(this.selectedRolObject){var a=this.selectedRolObject.permissions.split(",");a&&_.each(a,function(a){a===e.name&&(t=!0)})}return t},showAllUsers:function(){this.$router.push({name:"users"})},changeRol:function(e){(e=_.find(this.roles,{id:e})).permissions||(e.permissions=""),this.selectedRolObject=e},changePermission:function(e){var t=this.selectedRolObject.permissions.split(",");console.log(t);var a=!1,i=null;_.each(t,function(t,s){t===e.name&&(a=!0,i=s)}),a?(t.splice(i,1),this.selectedRolObject.permissions=t.join(",")):(t.push(e.name),this.selectedRolObject.permissions=t.join(","))},getRoles:function(){var e=this;C.a.all([r.a.getRoles(this.limit,this.offset,this.pageUsers,null,this.searchUser)]).then(function(t){e.roles=_.clone(t[0].data,!0),e.selectedRol=e.roles[0].id,e.selectedRolObject=e.roles[0],e.loading=!1})}},data:function(){return{selectedRolObject:{},rolName:"",permissions:[{group:"Procesos",permissions:[{name:"createProcess",label:"Crear procesos"},{name:"editProcess",label:"Editar procesos"},{name:"deleteProcess",label:"Eliminar procesos"},{name:"SeeProcess",label:"Ver procesos"},{name:"changeConfiguration",label:"Configurar proceso"},{name:"administrate",label:"Administrar"},{name:"generateWind",label:"Generar datos de viento"},{name:"createTemplates",label:"Crear plantillas"},{name:"useTemplate",label:"Crear plantillas"},{name:"changeInitialConfigData",label:"Cambiar configuración"},{name:"Experimental",label:"Agregar funcionalidad experimental"},{name:"areas",label:"Áreas"},{name:"rationingCost",label:"Costos de Racionamiento"},{name:"fuels",label:"combustibles"},{name:"segments",label:"Segmentos"},{name:"blocks",label:"Bloques"},{name:"scenarios",label:"Escenarios"},{name:"demands",label:"Demanda"},{name:"fuelCosts",label:"Costo de combustible"},{name:"thermalConfigs",label:"Plantas termicas"},{name:"thermalExpansions",label:"Expansión termicas"},{name:"smallConfigs",label:"Plantas menores"},{name:"smallExpansions",label:"Expansión planta menor"},{name:"hydroConfigs",label:"Plantas hydro"},{name:"hydroExpansions",label:"Expansión hydro"},{name:"inflows",label:"Afluentes hidricos"},{name:"windConfigs",label:"Plantas eólicas"},{name:"windExpansions",label:"Expansiones eólicas"},{name:"speedIndices",label:"Indices de velocidad eólicos"},{name:"inflowWinds",label:"Velocidad del viento"},{name:"storageConfigs",label:"Almacenamiento"},{name:"storageExpansions",label:"Expansion de almacenamiento"},{name:"lines",label:"Red de transmisión"},{name:"linesExpansions",label:"Expansión de transmisión"}]},{group:"Usuarios",permissions:[{name:"seeUsers",label:"Ver listado de usuarios"},{name:"seeUser",label:"Ver usuario"},{name:"seeUserModels",label:"Ver modelos de usuario"},{name:"editUser",label:"Editar usuario"},{name:"deleteUsers",label:"Eliminar usuarios"},{name:"createUsers",label:"Crear usuarios"},{name:"downloadUsers",label:"Descargar usuarios"},{name:"seeStatistics",label:"Ver estadisticas"}]},{group:"Roles",permissions:[{name:"seeRoles",label:"Ver roles"},{name:"editRoles",label:"Editar roles"},{name:"deleteRoles",label:"Eliminar roles"},{name:"createRoles",label:"Crear roles"}]}],selectedRol:null,options:[],loading:!0,roles:{data:[]}}}},O={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("nav-bar"),e._v(" "),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-md-8"},[e._m(0),e._v(" "),a("hr"),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[e._m(1),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"exampleInputEmail1"}},[e._v("Nombre del rol")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.rolName,expression:"rolName"}],staticClass:"form-control",attrs:{disabled:!e.canCreateRol(),type:"text",placeholder:"Nombre del rol"},domProps:{value:e.rolName},on:{input:function(t){t.target.composing||(e.rolName=t.target.value)}}})]),e._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{disabled:!e.canCreateRol(),type:"button"},on:{click:function(t){e.addRole()}}},[a("i",{staticClass:"icon save"}),e._v(" Agregar\n          ")]),e._v(" "),a("hr"),e._v(" "),e._m(2),e._v(" "),a("el-select",{attrs:{placeholder:"Seleccione"},on:{change:e.changeRol},model:{value:e.selectedRol,callback:function(t){e.selectedRol=t},expression:"selectedRol"}},e._l(e.roles,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),e._v(" "),a("button",{staticClass:"btn float-right btn-danger",attrs:{disabled:!e.canDeleteRole(),type:"submit"},on:{click:function(t){e.deleteRole()}}},[a("i",{staticClass:"icon ui trash"}),e._v(" Eliminar\n          ")]),e._v(" "),a("button",{staticClass:"btn float-right btn-dark",staticStyle:{"margin-right":"2px"},attrs:{type:"submit"},on:{click:function(t){e.refresh()}}},[a("i",{staticClass:"icon ui cancel"}),e._v(" Cancelar\n          ")]),e._v(" "),e.canCreateRole()?a("button",{staticClass:"btn float-right btn-primary",staticStyle:{"margin-right":"2px"},attrs:{disabled:!e.canEditRol(),type:"submit"},on:{click:function(t){e.savePermission()}}},[a("i",{staticClass:"icon ui save"}),e._v(" Guardar cambios")]):e._e(),e._v(" "),a("hr"),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"exampleInputEmail1"}},[e._v("Nombre del rol")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedRolObject.label,expression:"selectedRolObject.label"}],staticClass:"form-control",attrs:{disabled:!e.canCreateRole(),type:"text",placeholder:"Nombre del rol"},domProps:{value:e.selectedRolObject.label},on:{input:function(t){t.target.composing||e.$set(e.selectedRolObject,"label",t.target.value)}}})]),e._v(" "),e._l(e.permissions,function(t){return e.selectedRol?a("div",{staticClass:"row",staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"col-md-12"},[a("h3",[e._v(e._s(t.group))])]),e._v(" "),a("div",{staticClass:"col-md-12"},[t.permissions.length>0?a("div",{staticClass:"row",staticStyle:{"margin-top":"10px"}},e._l(t.permissions,function(t){return a("div",{key:t.name,staticClass:"col-md-4",staticStyle:{margin:"10px"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949",disabled:!e.canCreateRole()||!e.canEditRol(),"active-text":t.label,value:e.isCheched(t)},on:{change:function(a){e.changePermission(t)}}})],1)})):e._e()])]):e._e()})],2)])]),e._v(" "),a("div",{staticClass:"col-md-4"},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2","background-color":"#545c64","text-color":"#ffffff","active-text-color":"#ffd04b"}},[a("el-menu-item",{attrs:{index:"1"},on:{click:function(t){e.showAllUsers()}}},[a("i",{staticClass:"el-icon-menu white"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Mostrar todos los usuarios")])]),e._v(" "),a("el-menu-item",{attrs:{index:"2"},on:{click:function(t){e.goToRoles()}}},[a("i",{staticClass:"el-icon-setting white"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Roles y permisos")])])],1)],1)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("h3",[t("i",{staticClass:"key icon circular inverted red"}),this._v(" ROLES Y PERMISOS")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",[t("i",{staticClass:"icon plus circular"}),this._v("Agregar rol")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",[t("i",{staticClass:"icon pencil circular"}),this._v("Edición de rol")])}]};var G=a("VU/8")(q,O,!1,function(e){a("UFK0")},"data-v-5a0ce9ef",null).exports,V={name:"Main",components:{navBar:u.a},methods:{goToProfile:function(){this.$router.push({name:"profile"})},goToDeleteAccount:function(){this.$router.push({name:"deleteAccount"})},goToMain:function(){this.$router.push({name:"main"})},goToAnswers:function(){this.$router.push({name:"answers"})},goToTerms:function(){this.$router.push({name:"terms"})}}},H={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("nav-bar"),e._v(" "),a("div",{staticClass:"row mt-5"},[e._m(0),e._v(" "),a("div",{staticClass:"col-md-4"},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"3","background-color":"#545c64","text-color":"#ffffff","active-text-color":"#ffd04b"}},[a("el-menu-item",{attrs:{index:"1"},on:{click:function(t){e.goToProfile()}}},[a("i",{staticClass:"el-icon-tickets white"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Datos personales")])]),e._v(" "),a("el-menu-item",{attrs:{index:"2"},on:{click:function(t){e.goToTerms()}}},[a("i",{staticClass:"el-icon-printer white"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Terminos y condiciones")])]),e._v(" "),a("el-menu-item",{attrs:{index:"3"},on:{click:function(t){e.goToAnswers()}}},[a("i",{staticClass:"el-icon-info white"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Preguntas frecuentes")])]),e._v(" "),a("el-menu-item",{attrs:{index:"4"},on:{click:function(t){e.goToDeleteAccount()}}},[a("i",{staticClass:"el-icon-delete white"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Eliminar cuenta")])])],1)],1)])],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-8"},[a("h3",[a("i",{staticClass:"icon question circular olive inverted"}),e._v("PREGUNTAS FRECUENTES")]),e._v(" "),a("h4",[e._v("¿Cuantos modelos puedo crear?")]),e._v(" "),a("p",{staticClass:"terms"},[e._v("Puedes crear 3 modelos por defecto, si necesitas crear mas debes ponerte en contacto con el administrador.")]),e._v(" "),a("h4",[e._v("¿Quienes son los creadores del software?")]),e._v(" "),a("p",{staticClass:"terms"}),a("p",[e._v("Este software fue desarrollado por la Universidad de los Andes y ha sido soportado y financiado en\nparte por las instituciones mencionadas a continuación.\n\n"),a("ul",{staticStyle:{"font-weight":"bold","margin-top":"10px"}},[a("li",[e._v("1. Universidad de los Andes")]),e._v(" "),a("li",[e._v("2. Universidad del Rosario")]),e._v(" "),a("li",[e._v("3. Cornell University")]),e._v(" "),a("li",[e._v("4. ISAGEN")]),e._v(" "),a("li",[e._v("5. CEIBA")])])]),e._v(" "),a("h4",[e._v("¿Donde puedo encontrar la documentación del sistema?")]),e._v(" "),a("p",{staticClass:"terms"},[a("a",{staticClass:"btn btn-primary",attrs:{download:"",href:"/static/doc.pdf"}},[e._v("Descargar información técnica")])])])}]};var W=a("VU/8")(V,H,!1,function(e){a("i6gT")},"data-v-6ba72171",null).exports,Q={name:"Terms",components:{navBar:u.a,processed:d,queue:f},methods:{goToMain:function(){this.$router.push({name:"main"})},goToDeleteAccount:function(){this.$router.push({name:"deleteAccount"})},goToAnswers:function(){this.$router.push({name:"answers"})},goToTerms:function(){this.$router.push({name:"terms"})},goToProfile:function(){this.$router.push({name:"profile"})}}},K={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("nav-bar"),e._v(" "),a("div",{staticClass:"row mt-5"},[e._m(0),e._v(" "),a("div",{staticClass:"col-md-4"},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2","background-color":"#545c64","text-color":"#ffffff","active-text-color":"#ffd04b"}},[a("el-menu-item",{attrs:{index:"1"},on:{click:function(t){e.goToProfile()}}},[a("i",{staticClass:"el-icon-tickets white"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Datos personales")])]),e._v(" "),a("el-menu-item",{attrs:{index:"2"},on:{click:function(t){e.goToTerms()}}},[a("i",{staticClass:"el-icon-printer white"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Terminos y condiciones")])]),e._v(" "),a("el-menu-item",{attrs:{index:"3"},on:{click:function(t){e.goToAnswers()}}},[a("i",{staticClass:"el-icon-info white"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Preguntas frecuentes")])]),e._v(" "),a("el-menu-item",{attrs:{index:"3"},on:{click:function(t){e.goToDeleteAccount()}}},[a("i",{staticClass:"el-icon-delete white"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Eliminar cuenta")])])],1)],1)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"col-md-8"},[t("h3",[t("i",{staticClass:"icon check circular olive inverted"}),this._v("TERMINOS Y CONDICIONES")]),this._v(" "),t("div",{staticClass:"maia-article",attrs:{role:"article"}},[t("div",{staticClass:"maia-teleport",attrs:{id:"content"}}),this._v(" "),t("small",[this._v("Autorizo expresamente a MAEP quien, actuando en calidad de Responsable del Tratamiento de Datos Personales, está recolectando información personal para el adecuado desarrollo de sus actividades comerciales, así como para el fortalecimiento de sus relaciones con terceros, pudiendo almacenar, usar, circular y suprimir estos Datos Personales considerando, más no limitando, el uso siguiente a los datos personales: • Permitir la participación de los Titulares en actividades de mercadeo y promocionales (incluyendo la participación en concursos, rifas y sorteos) realizados por MAEP;  • Evaluar la calidad del servicio, realizar estudios de mercado sobre necesidades, hábitos de consumo y análisis estadísticos para usos internos;  • Dar respuesta a consultas, peticiones, quejas y reclamos que sean realizadas por los Titulares y organismos de control y trasmitir los Datos Personales a las demás autoridades que en virtud de la ley aplicable deban recibir los Datos Personales;  • Para eventualmente contactar, vía correo electrónico, o por cualquier otro medio, a personas naturales con quienes tiene o ha tenido relación, tales como, sin que la enumeración signifique limitación, trabajadores y familiares de éstos, accionistas, consumidores, clientes, distribuidores, proveedores, acreedores y deudores, para las finalidades antes mencionadas.  • Transferir la información recolectada a distintas áreas de MAEP para el desarrollo de sus operaciones (recaudo de cartera y cobros administrativo, tesorería, contabilidad, entre otros); • Para la atención de requerimientos judiciales o administrativos y el cumplimiento de mandatos judiciales o legales;  • Registrar sus datos personales en los sistemas de información de MAEP y en sus bases de datos comerciales y operativas;  • Cualquier otra actividad de naturaleza similar a las anteriormente descritas que sean necesarias para desarrollar el objeto social de MAEP con el propósito de su uso para contacto posterior.\n")])])])}]},j=a("VU/8")(Q,K,!1,null,null,null).exports,J={mounted:function(){this.email=this.$auth.user().email,this.name=this.$auth.user().name},name:"Main",components:{navBar:u.a},methods:{deleteAccount:function(){var e=this;this.$confirm("Vamos a borrar tu cuenta. Estas completamente seguro?","Notificación importante",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"warning"}).then(function(){r.a.deleteUser(e.$auth.user().id).then(e.goLogin)})},goMain:function(){this.$router.push({name:"main"})},goLogin:function(){this.$auth.logout(),this.$router.push({name:"login",query:{message:"Cuenta eliminada"}})},goToAnswers:function(){this.$router.push({name:"answers"})},goToTerms:function(){this.$router.push({name:"terms"})},goToProfile:function(){this.$router.push({name:"profile"})}},data:function(){return{}}},Y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("nav-bar"),e._v(" "),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-md-8"},[e._m(0),e._v(" "),a("p",{staticClass:"terms"},[e._v("Al eliminar la cuenta borraremos todos tus modelos de la base de datos y sera imposible recuperarlos. Ademas eliminaremos todos los datos personales de nuestro sistema.\n      ")]),e._v(" "),a("p",{staticClass:"terms"},[e._v("No volveras a recibir actualizaciones por correo electronico.")]),e._v(" "),a("button",{staticClass:"btn btn-danger",staticStyle:{"margin-right":"10px"},on:{click:function(t){e.deleteAccount()}}},[a("i",{staticClass:"icon trash"}),e._v("ELIMINAR CUENTA")]),e._v(" "),a("button",{staticClass:"btn btn-primary",on:{click:function(t){e.goMain()}}},[a("i",{staticClass:"icon cancel"}),e._v("CANCELAR")])]),e._v(" "),a("div",{staticClass:"col-md-4"},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"4","background-color":"#545c64","text-color":"#ffffff","active-text-color":"#ffd04b"}},[a("el-menu-item",{attrs:{index:"1"},on:{click:function(t){e.goToProfile()}}},[a("i",{staticClass:"el-icon-tickets white"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Datos personales")])]),e._v(" "),a("el-menu-item",{attrs:{index:"2"},on:{click:function(t){e.goToTerms()}}},[a("i",{staticClass:"el-icon-printer white"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Terminos y condiciones")])]),e._v(" "),a("el-menu-item",{attrs:{index:"3"},on:{click:function(t){e.goToAnswers()}}},[a("i",{staticClass:"el-icon-info white"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Preguntas frecuentes")])]),e._v(" "),a("el-menu-item",{attrs:{index:"4"},on:{click:function(t){e.goToDeleteAccount()}}},[a("i",{staticClass:"el-icon-delete white"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Eliminar cuenta")])])],1)],1)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("h3",[t("i",{staticClass:"icon trash circular grey inverted"}),this._v("ELIMINAR CUENTA")])}]};var Z=a("VU/8")(J,Y,!1,function(e){a("Q7Uz")},"data-v-e65805fc",null).exports,X={name:"User",mounted:function(){this.getUser()},components:{navBar:u.a},methods:{capitalize:function(e){return e.toLowerCase().replace(/\b./g,function(e){return e.toUpperCase()})},formatName:function(e){return this.capitalize(e)},formatLastName:function(e){return this.capitalize(e)},formatEmail:function(e){return e.toLowerCase()},formatCompany:function(e){return e.toUpperCase()},saveRoles:function(){var e=this;this.$confirm("Estas modificando los permisos del usuario. Continuar?","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"warning"}).then(function(){r.a.updateUser(e.user).then(function(){e.$auth.fetch(),e.$message({message:"Adverencia, Los permisos ya estan guardados.",type:"success"})})})},goToUserModel:function(){this.$router.push({name:"userModel",params:{id:this.user.id}})},saveUser:function(){var e=this;if(this.changePassword){if(this.user.password!==this.user.password_confirmation&&this.changePassword)return void this.$message({type:"error",message:"La confirmación del password y el password no coincide"});if(!this.user.password)return void this.$message({type:"error",message:"El password es requerido"});if(this.user.password.length<6)return void this.$message({type:"error",message:"El password debe de tener mínimo 6 caracteres"})}if(this.user.password!==this.user.password_confirmation&&this.changePassword||""===this.user.password)this.$message({type:"error",message:"La confirmación del password y el password no coincide"});else{if(""===this.user.name||""===this.user.lastname||""===this.user.meta.company||""===this.user.meta.phone||""===this.user.email)return this.$message({type:"error",message:"Debes agregar todos los campos"}),!1;this.user.meta.company=this.formatCompany(this.user.meta.company),this.user.name=this.formatName(this.user.name),this.user.lastname=this.formatLastName(this.user.lastname),this.user.email=this.formatEmail(this.user.email),this.$confirm("Estas modificando el usuario. Continuar?","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"warning"}).then(function(){r.a.updateUser(e.user).then(function(){e.$auth.fetch(),e.$message({message:"Adverencia, El usuario ya esta guardado.",type:"success"})})})}},checkIfHaveThisRole:function(e){if(e=_.find(this.user.roles,{name:e.name}))return!0},addRoleIfNotExist:function(e){_.find(this.user.roles,{name:e.name})?this.user.roles=this.user.roles.filter(function(t){return t.id!==e.id}):this.user.roles.push(e)},goToRoles:function(){this.$router.push({name:"roles"})},goToMain:function(){this.$router.push({name:"users"})},getUser:function(){var e=this;C.a.all([r.a.getUser(this.$route.params.id),r.a.getRoles()]).then(function(t){e.user=_.clone(t[0].data,!0),e.user.meta.is_active=1===e.user.meta.is_active,e.roles=t[1].data,e.loading=!1})},canEdit:function(){var e=this,t=!1;return _.each(this.$auth.user().roles,function(a){t||(t=e.eachRolesPermissions(a,e.havePermissionToEditUser))}),t},canCreateOrEditRol:function(){var e=this,t=!1;return _.each(this.$auth.user().roles,function(a){t||(t=e.eachRolesPermissions(a,e.havePermissionToEditRolOrCreateRol))}),t},canSeeUserModels:function(){var e=this,t=!1;return _.each(this.$auth.user().roles,function(a){t||(t=e.eachRolesPermissions(a,e.havePermissionToSeeUserModels))}),t},eachRolesPermissions:function(e,t){var a=[],i=!1;return(a=e.permissions)&&_.each(a.split(","),function(e){e&&t(e)&&(i=!0)}),i},havePermissionToEditUser:function(e){return"editUser"===e.trim()},havePermissionToEditRolOrCreateRol:function(e){return"editRoles"===e.trim()||"createRoles"===e.trim()},havePermissionToSeeUserModels:function(e){return"seeUserModels"===e.trim()}},data:function(){return{changePassword:!1,loading:!0,roles:[],user:{roles:[],meta:{company:"",phone:"",models:""},name:"",lastname:"",email:"",company:"",password:"",password_confirmation:"",phone:""}}}},ee={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"container"},[a("nav-bar"),e._v(" "),a("div",{staticClass:"row mt-5"},[e.user?a("div",{staticClass:"col-md-8"},[a("h3",[a("i",{staticClass:"user icon circular inverted yellow"}),e._v(e._s(this.user.name.toUpperCase())+" "+e._s(this.user.lastname.toUpperCase()))]),e._v(" "),e._l(e.user.roles,function(t){return e.user.roles?a("el-tag",{key:t.id,staticStyle:{"margin-right":"10px"},attrs:{type:"danger"}},[a("i",{staticClass:"icon key"}),a("b",[e._v(e._s(t.label))])]):e._e()}),e._v(" "),e.user.meta?a("el-tag",{staticStyle:{"margin-right":"10px"},attrs:{type:"warning"}},[e._v(e._s(e.user.meta.models)+" "),a("b",[e._v("disponibles")])]):e._e(),e._v(" "),a("hr"),e._v(" "),a("div",{attrs:{id:"main-offer-form"}},[a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Nombre")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.name,expression:"user.name"}],staticClass:"form-control",attrs:{disabled:!e.canEdit(),type:"text",name:"name",placeholder:"Nombre",required:""},domProps:{value:e.user.name},on:{input:function(t){t.target.composing||e.$set(e.user,"name",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Apellido")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.lastname,expression:"user.lastname"}],staticClass:"form-control",attrs:{disabled:!e.canEdit(),type:"text",name:"lastname",placeholder:"Apellido",required:""},domProps:{value:e.user.lastname},on:{input:function(t){t.target.composing||e.$set(e.user,"lastname",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Compañia")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.meta.company,expression:"user.meta.company"}],staticClass:"form-control",attrs:{disabled:!e.canEdit(),type:"text",name:"company",placeholder:"Empresa",required:""},domProps:{value:e.user.meta.company},on:{input:function(t){t.target.composing||e.$set(e.user.meta,"company",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Teléfono")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.meta.phone,expression:"user.meta.phone"}],staticClass:"form-control",attrs:{disabled:!e.canEdit(),type:"text",name:"phone",placeholder:"Teléfono",required:""},domProps:{value:e.user.meta.phone},on:{input:function(t){t.target.composing||e.$set(e.user.meta,"phone",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Email")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],staticClass:"form-control",attrs:{disabled:!e.canEdit(),type:"text",name:"email",placeholder:"Dirección de correo",required:""},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}})]),e._v(" "),e.changePassword?e._e():a("button",{staticClass:"btn btn-outline-danger",on:{click:function(t){e.changePassword=!0}}},[a("i",{staticClass:"icon key"}),e._v(" Solicitar cambio de contraseña")]),e._v(" "),e.changePassword?a("div",[a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Contraseña")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{disabled:!e.canEdit(),type:"password",name:"password",placeholder:"Contraseña*",required:""},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Repetir contraseña")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password_confirmation,expression:"user.password_confirmation"}],staticClass:"form-control",attrs:{disabled:!e.canEdit(),type:"password",name:"password",placeholder:"Repetir contraseña*",required:""},domProps:{value:e.user.password_confirmation},on:{input:function(t){t.target.composing||e.$set(e.user,"password_confirmation",t.target.value)}}})])]):e._e(),e._v(" "),a("center",[a("button",{staticClass:"btn btn-dark float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.goToMain()}}},[a("i",{staticClass:"icon cancel"}),e._v("Cancelar\n          ")]),e._v(" "),a("button",{staticClass:"btn btn-primary float-right",attrs:{disabled:!e.canEdit()},on:{click:function(t){e.saveUser()}}},[a("i",{staticClass:"icon save"}),e._v("Actualizar\n          ")])])],1)],2):e._e(),e._v(" "),a("div",{staticClass:"col-md-4"},[e._m(0),e._v(" "),a("el-tabs",{staticStyle:{height:"200px"}},[a("el-tab-pane",{attrs:{label:"Configuración de usuario"}},[a("div",{staticClass:"form-group"},[a("label",[e._v("Casos disponibles")]),e._v(" "),a("br"),e._v(" "),a("el-input-number",{attrs:{min:0,size:"mini",disabled:!e.canEdit()},model:{value:e.user.meta.models,callback:function(t){e.$set(e.user.meta,"models",t)},expression:"user.meta.models"}})],1),e._v(" "),a("el-switch",{staticStyle:{display:"block"},attrs:{disabled:!e.canEdit(),"active-text":"Cuenta Activada","inactive-text":"Cuenta Desactivada","active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.user.meta.is_active,callback:function(t){e.$set(e.user.meta,"is_active",t)},expression:"user.meta.is_active"}}),e._v(" "),a("hr"),e._v(" "),e.canSeeUserModels()?a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"0","background-color":"#545c64","text-color":"#ffffff"}},[a("el-menu-item",{attrs:{index:"1"},on:{click:function(t){e.goToUserModel()}}},[a("i",{staticClass:"el-icon-menu"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Modelos asociados")])])],1):e._e()],1),e._v(" "),a("el-tab-pane",{attrs:{label:"Roles"}},[a("p",[e._v("Los privilegios le permitiran a un usuario acceder a ciertas areas del sistema.")]),e._v(" "),a("hr"),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("button",{staticClass:"btn btn-outline-danger float-right",attrs:{disabled:!e.canCreateOrEditRol()},on:{click:function(t){e.goToRoles()}}},[a("i",{staticClass:"icon key"}),e._v("Personalizar")]),e._v(" "),a("button",{staticClass:"btn btn-outline-primary float-left",attrs:{disabled:!e.canEdit()},on:{click:function(t){e.saveRoles()}}},[a("i",{staticClass:"icon save"}),e._v(" Guardar privilegios")])])]),e._v(" "),a("hr"),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},e._l(e.roles,function(t){return a("div",{key:t.id,staticStyle:{"margin-bottom":"10px"}},[a("el-switch",{staticStyle:{display:"block"},attrs:{disabled:!e.canEdit(),value:e.checkIfHaveThisRole(t),"active-color":"#13ce66","inactive-color":"#ff4949","active-text":t.label},on:{change:function(a){e.addRoleIfNotExist(t)}}})],1)}))])])],1)],1)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("h3",[t("i",{staticClass:"cube icon circular inverted yellow"}),this._v("PROPIEDADES")])}]},te=a("VU/8")(X,ee,!1,null,null,null).exports,ae=a("QmSG"),ie={name:"SupervisorConsole",data:function(){return{logs:[],supervisordPath:ae.a.supervisordLogPath}},mounted:function(){this.registerListener()},methods:{clearLogs:function(){r.a.clearLogs("processes")},gotoBottom:function(e){var t=document.getElementById("terminal-logs");S.a.isNil(t)||(t.scrollTop=t.scrollHeight-t.clientHeight)},isEmpty:function(){return this.logs.length<1},registerListener:function(){var e=this;this.$options.sockets.logsSupervisor=function(t){e.logs=t.split("\n"),e.$forceUpdate(),setTimeout(function(){e.gotoBottom("terminal-logs")},3e3)}}}},se={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"300px"}},[e.isEmpty?a("div",{staticClass:"ui icon message"},[a("i",{staticClass:"notched circle loading icon"}),e._v(" "),e._m(0)]):e._e(),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.supervisordPath,expression:"supervisordPath"}],staticClass:"form-control",attrs:{disabled:"",type:"text"},domProps:{value:e.supervisordPath},on:{input:function(t){t.target.composing||(e.supervisordPath=t.target.value)}}}),e._v(" "),a("button",{staticClass:"btn btn-danger float-right mt-1",on:{click:function(t){e.clearLogs()}}},[a("i",{staticClass:"icon trash"}),e._v("Limpiar")])])]),e._v(" "),e.logs.length>0?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isEmpty(),expression:"isEmpty()"}],staticClass:"terminal-logs",staticStyle:{"margin-top":"5px"},attrs:{id:"terminal-logs"}},[a("ul",{staticStyle:{"list-style-type":"none"}},e._l(e.logs,function(t){return t?a("li",[e._v(e._s(t))]):e._e()}))]):e._e()])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"content"},[t("div",{staticClass:"header"},[this._v("\n        Esperando logs\n        "),t("hr")]),this._v(" "),t("p",[this._v("Este servicio se encarga de monitorear redis y los diferentes WORKERS en ejecución.")]),this._v(" "),t("p",[this._v("Si el problema persiste ejecute el siguiente comando en el servidor desde la carpeta del backend:")]),this._v(" "),t("code",[this._v("\n        pkill -f supervisord && \n        supervisord -c supervisord.conf\n      ")])])}]},ne=a("VU/8")(ie,se,!1,null,null,null).exports,oe={name:"SupervisorConsole",data:function(){return{logs:[],supervisordPath:ae.a.queuePath}},mounted:function(){this.registerListener()},destroyed:function(){delete this.$options.sockets.logsQueue},methods:{clearLogs:function(){r.a.clearLogs("queues")},gotoBottom:function(e){var t=document.getElementById("terminal-logs");S.a.isNil(t)||(t.scrollTop=t.scrollHeight-t.clientHeight)},isEmpty:function(){return this.logs.length<1},registerListener:function(){var e=this;this.$options.sockets.logsQueue=function(t){e.logs=t.split("\n"),e.$forceUpdate(),setTimeout(function(){e.gotoBottom("terminal-logs")},5e3)}}}},re={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"300px"}},[e.isEmpty?a("div",{staticClass:"ui icon message"},[a("i",{staticClass:"notched circle loading icon"}),e._v(" "),e._m(0)]):e._e(),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.supervisordPath,expression:"supervisordPath"}],staticClass:"form-control",attrs:{disabled:"",type:"text"},domProps:{value:e.supervisordPath},on:{input:function(t){t.target.composing||(e.supervisordPath=t.target.value)}}}),e._v(" "),a("button",{staticClass:"btn btn-danger float-right mt-1",on:{click:function(t){e.clearLogs()}}},[a("i",{staticClass:"icon trash"}),e._v("Limpiar")])])]),e._v(" "),e.logs.length>0?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isEmpty(),expression:"isEmpty()"}],staticClass:"terminal-logs",staticStyle:{"margin-top":"5px"},attrs:{id:"terminal-logs"}},[a("ul",{staticStyle:{"list-style-type":"none"}},e._l(e.logs,function(t){return t?a("li",[e._v(e._s(t))]):e._e()}))]):e._e()])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"content"},[t("div",{staticClass:"header"},[this._v("\n        Esperando logs\n        "),t("hr")]),this._v(" "),t("p",[this._v("Esta consola muestra los logs de los workers (Ejecución de modelos).")])])}]};var le=a("VU/8")(oe,re,!1,function(e){a("y/O0")},"data-v-2c7eb394",null).exports,ce={name:"Main",props:["data"],mounted:function(){this.categories=this.data,this.category=this.categories[0]},methods:{deleteFromTree:function(){var e=this,t=this.parent,a=t.parent.data.children||t.parent.data,i=a.findIndex(function(t){return t.id===e.category.id});a.splice(i,1)},remove:function(e){var t=this;-1!==this.category.parentId?r.a.deleteCategory(e).then(function(){t.deleteFromTree(),t.$message({type:"success",message:"La eliminación se ha realizado con exito."})}):this.$message({type:"warning",message:"No podemos eliminar la categoría padre"})},save:function(){var e=this;this.validateCategory()&&r.a.updateCategory(this.category).then(function(t){e.$message({type:"success",message:"La categoria se modifico con exito"})})},validateCategory:function(){if(""!==this.category.name)return!0;this.$message({type:"error",message:"La categoria debe de tener un nombre"})},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},handleNodeClick:function(e,t){this.parent=t,this.selectedNode=e,this.category=e},add:function(){var e=this;""===this.subcategory.name||_.isNil(this.subcategory.name)?this.$message({type:"warning",message:"El nombre esta vacio."}):(this.subcategory.parentId=this.category.id,r.a.createCategory(this.subcategory).then(function(t){_.isNil(e.category.children)&&e.$set(e.category,"children",[]),e.category.children.push(e.subcategory),e.subcategory={}}))}},data:function(){return{defaultProps:{children:"children",label:"name"},selectedNode:{},category:{name:"",parentId:"",disabled:!0},subcategory:{name:"",parentId:"",disabled:!0,order:0},categories:[]}}},de={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-md-6"},[e._m(0),e._v(" "),a("div",{attrs:{id:"main-offer-form"}},[a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Nombre de la categoría")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.category.name,expression:"category.name"}],staticClass:"form-control",attrs:{type:"text",name:"name",placeholder:"Nombre*",required:""},domProps:{value:e.category.name},on:{input:function(t){t.target.composing||e.$set(e.category,"name",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Componente asociado")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.category.component,expression:"category.component"}],staticClass:"form-control",attrs:{type:"text",name:"component",placeholder:"Nombre*",required:""},domProps:{value:e.category.component},on:{input:function(t){t.target.composing||e.$set(e.category,"component",t.target.value)}}})])]),e._v(" "),a("el-switch",{staticStyle:{display:"block"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"Activa","inactive-text":"Inactiva"},model:{value:e.category.disabled,callback:function(t){e.$set(e.category,"disabled",t)},expression:"category.disabled"}}),e._v(" "),a("hr"),e._v(" "),a("button",{staticClass:"btn btn-dark",on:{click:function(t){e.save()}}},[a("i",{staticClass:"icon sitemap"}),e._v(" Guardar\n      ")]),e._v(" "),a("button",{staticClass:"btn btn-danger",on:{click:function(t){e.remove(e.category.id)}}},[a("i",{staticClass:"icon trash"}),e._v(" Eliminar")]),e._v(" "),a("hr"),e._v(" "),""!==e.category.name?a("div",{attrs:{id:"main-offer-form"}},[a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Agregar un hijo")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.subcategory.name,expression:"subcategory.name"}],staticClass:"form-control",attrs:{type:"text",name:"name",placeholder:"Nombre*",required:""},domProps:{value:e.subcategory.name},on:{input:function(t){t.target.composing||e.$set(e.subcategory,"name",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Componente asociado")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.subcategory.component,expression:"subcategory.component"}],staticClass:"form-control",attrs:{type:"text",name:"component",placeholder:"Nombre*",required:""},domProps:{value:e.subcategory.component},on:{input:function(t){t.target.composing||e.$set(e.subcategory,"component",t.target.value)}}})])]):e._e(),e._v(" "),a("el-switch",{staticStyle:{display:"block"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"Activa","inactive-text":"Inactiva"},model:{value:e.subcategory.disabled,callback:function(t){e.$set(e.subcategory,"disabled",t)},expression:"subcategory.disabled"}}),e._v(" "),a("hr"),e._v(" "),""!==e.category.name?a("button",{staticClass:"btn btn-primary",on:{click:function(t){e.add()}}},[a("i",{staticClass:"save icon"}),e._v(" Guardar\n      ")]):e._e()],1),e._v(" "),a("div",{staticClass:"col-md-6"},[a("el-tree",{ref:"tree2",staticClass:"filter-tree",attrs:{"default-expand-all":"",data:e.categories,props:e.defaultProps,"filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick}})],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("h3",[t("i",{staticClass:"tasks icon circular inverted blue"}),this._v(" ADMINISTRAR CONTENIDO")])}]},ue=a("VU/8")(ce,de,!1,null,null,null).exports,me={mounted:function(){this.$socket.emit("admin"),this.getModels(),this.registerListener(),this.checkUserIsValidated(),this.addCurrentConnection()},destroyed:function(){clearInterval(this.interval),clearInterval(this.IntervalConnection),this.$off("reloadModels"),this.$socket.emit("admin-leave")},name:"Main",components:{navBar:u.a,processed:d,queue:f,supervisorConsole:ne,queueConsole:le,categories:ue},methods:{adminContent:function(){this.$router.push({name:"categories"})},removeQueueRegister:function(e){var t=this;console.log(e),r.a.delete(e.id).then(function(){t.$auth.fetch(),t.queue.data.splice(e,1),t.$message({type:"success",message:"Eliminado con exito"}),t.getModels()})},registerListener:function(){var e=this;this.$bus.on("removeQueueRegister",this.removeQueueRegister),this.$bus.on("refreshRegisters",this.getModels),this.$options.sockets.processing=function(t){e.processing=t},this.$options.sockets.diskInfo=function(t){e.info=t},this.$options.sockets.logsSupervisorConfig=function(t){var a=t.match(/numprocs=\d{1,3}/);e.workers=a[0].match(/\d{1,3}/)[0]}},bytesToSize:function(e){if(0===e)return"0 Byte";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)),10);return Math.round(e/Math.pow(1024,t),2)+" "+["Bytes","KB","MB","GB","TB"][t]},isActive:function(e){return this.selected===e},selectInfo:function(){this.selected="info"},selectProcess:function(){this.selected="process"},selectCategories:function(){this.selected="categories"},selectQueue:function(){this.selected="queue"},addCurrentConnection:function(){var e=this;this.IntervalConnection=setInterval(function(){r.a.addCurrentConnection(e)},5e3)},checkUserIsValidated:function(){this.$auth.user().meta.is_active||this.$alert("Al parecer no as validado tu dirección de correo, es necesario que la actives para poder acceder al sistema.",{confirmButtonText:"Ok",type:"error",title:"Error de acceso",center:!0}).then(this.sendOtherToken)},sendOtherToken:function(){var e=this;r.a.sendToken().then(function(){e.$auth.logout(),e.$router.push({name:"login",query:{message:"Hemos enviado un nuevo correo de activación"}})})},filterQueue:function(){this.pageQueue=0,this.getModels()},createProcess:function(){this.$router.push({name:"process"})},intervalModels:function(){var e=this;this.inverval=setInterval(function(){e.getModels()},3e4)},changeQueueList:function(e){this.pageQueue=e,this.getModels()},changeProcessedList:function(e){this.pageProcessed=e,this.getModels()},getModels:function(){var e=this;C.a.all([r.a.getProcess(this.limit,this.offset,this.pageProcessed,5,this.searchProcessed,null),r.a.getProcess(this.limit,this.offset,this.pageQueue,1,this.searchQueue,null),r.a.getCategories()]).then(function(t){e.processed=t[0].data,e.queue=t[1].data,console.log(e.queue),e.totalQueue=t[1].data.total,e.totalProcessed=t[0].data.total,e.categories=t[2].data,e.loading=!1})}},data:function(){return{categories:[],processing:0,info:{},workers:0,freeSpace:0,totalSpace:0,takenPercent:0,availablePercent:0,selected:"info",activeTab:"queue",loading:!0,queue:{data:[]},processed:{data:[]},limit:5,offset:0,pageQueue:0,pageProcessed:0,totalQueue:0,totalProcessed:0,searchQueue:"",searchProcessed:""}}},pe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("nav-bar"),e._v(" "),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-md-12"},[e._m(0),e._v(" "),a("div",{staticClass:"ui four item menu grey inverted"},[a("a",{staticClass:"item",class:{active:e.isActive("info")},on:{click:function(t){e.selectInfo()}}},[a("i",{staticClass:"info icon"}),e._v("Información General")]),e._v(" "),a("a",{staticClass:"item",class:{active:e.isActive("categories")},on:{click:function(t){e.selectCategories()}}},[a("i",{staticClass:"icon sitemap"}),e._v("\n                            Administrar contenido")]),e._v(" "),a("a",{staticClass:"item",class:{active:e.isActive("process")},on:{click:function(t){e.selectProcess()}}},[a("i",{staticClass:"cubes icon"}),e._v("Información de casos")]),e._v(" "),a("a",{staticClass:"item",class:{active:e.isActive("queue")},on:{click:function(t){e.selectQueue()}}},[a("i",{staticClass:"server icon"}),e._v("Información de colas")])])])]),e._v(" "),"process"==e.selected?a("div",{staticClass:"row mt-2"},[a("div",{staticClass:"col-md-12"},[a("supervisor-console")],1)]):e._e(),e._v(" "),"queue"==e.selected?a("div",{staticClass:"row mt-2"},[a("div",{staticClass:"col-md-12"},[a("queue-console")],1)]):e._e(),e._v(" "),"categories"===e.selected?a("div",{staticClass:"row-mt-2"},[a("categories",{attrs:{data:e.categories}})],1):e._e(),e._v(" "),"info"==e.selected?a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col-md-6"},[a("el-tabs",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"Procesados",name:"processed"}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"Búsqueda rápida de casos procesados"},on:{change:e.getModels},model:{value:e.searchProcessed,callback:function(t){e.searchProcessed=t},expression:"searchProcessed"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1),e._v(" "),a("processed",{attrs:{registers:e.processed.data}}),e._v(" "),e.processed.data.length>0?a("div",{staticClass:"mt-1"},[a("el-pagination",{attrs:{small:"","page-size":e.limit,layout:"prev, pager, next",total:e.totalProcessed},on:{"current-change":e.changeProcessedList}})],1):e._e(),e._v(" "),e.processed.data.length<1&&!e.loading?a("div",[a("center",[a("img",{staticClass:"fadeIn animated",staticStyle:{"margin-top":"30px"},attrs:{height:"105",src:"/static/finish.svg"}}),e._v(" "),a("h3",{staticStyle:{"margin-top":"0px"}},[e._v("Nadie tiene casos "),a("br"),e._v(" procesados")])])],1):e._e(),e._v(" "),e.loading?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("h4",[e._v("esperando casos..")])]):e._e()],1),e._v(" "),a("el-tab-pane",{attrs:{label:"Pendientes por procesar",name:"queue"}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"Búsqueda rápida de casos en cola"},on:{change:e.filterQueue},model:{value:e.searchQueue,callback:function(t){e.searchQueue=t},expression:"searchQueue"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1),e._v(" "),a("queue",{attrs:{registers:e.queue.data}}),e._v(" "),e.queue.data.length>0?a("div",{staticClass:"mt-1"},[a("el-pagination",{attrs:{small:"","page-size":e.limit,layout:"prev, pager, next",total:e.totalQueue},on:{"current-change":e.changeQueueList}})],1):e._e(),e._v(" "),e.queue.data.length<1&&!e.loading?a("div",[a("center",[a("img",{staticClass:"fadeIn animated",staticStyle:{"margin-top":"30px"},attrs:{height:"105",src:"/static/database.svg"}}),e._v(" "),a("h3",{staticStyle:{"margin-top":"0px"}},[e._v("Nadie tiene casos "),a("br"),e._v(" pendientes por procesar.")])])],1):e._e(),e._v(" "),e.loading?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("h4",[e._v("esperando casos..")])]):e._e()],1)],1)],1),e._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.workers<1,expression:"workers < 1"}],staticClass:"ui  statistics mini float-right",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"Cargando"}},[a("div",{staticClass:"statistic red animated  fadeIn"},[a("div",{staticClass:"value"},[a("i",{staticClass:"microchip circular small icon"}),e._v(" "+e._s(e.workers)+"\n              ")]),e._v(" "),e._m(1)]),e._v(" "),a("div",{staticClass:"statistic red animated fadeIn"},[a("div",{staticClass:"value"},[a("i",{staticClass:"bullseye circular small icon"}),e._v(" "+e._s(e.totalProcessed+e.totalQueue)+"\n              ")]),e._v(" "),e._m(2)])])]),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:!e.info.free,expression:"!info.free"}],staticClass:"col-md-12"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[e.info.free?a("label",{staticClass:"float-right"},[a("i",{staticClass:"tasks icon circular"}),e._v(e._s(e.bytesToSize(e.info.free))+" DISPONIBLES DE "+e._s(e.bytesToSize(e.info.total)))]):e._e()])]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[e._m(3),e._v(" "),e.info.cpuUsage?a("el-progress",{attrs:{"text-inside":!0,"stroke-width":18,percentage:e.info.cpuUsage,status:"primary"}}):e._e()],1)])])])])]):e._e()],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("h3",[t("i",{staticClass:"tasks icon circular inverted red"}),this._v("ADMINISTRACIÓN")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"label"},[this._v("\n                WORKERS\n                "),t("br"),this._v("CONECTADOS\n              ")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"label"},[this._v("\n                CASOS\n                "),t("br"),this._v("CREADOS\n              ")])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{staticClass:"float-right"},[t("i",{staticClass:"chart line icon circular"}),this._v(" USO DE LA CPU")])}]};var ge=a("VU/8")(me,pe,!1,function(e){a("CiRU")},null,null).exports,he={mounted:function(){this.$auth.fetch(),this.getModels(),this.registerListener(),this.checkUserIsValidated(),this.addCurrentConnection()},destroyed:function(){clearInterval(this.interval),clearInterval(this.IntervalConnection)},name:"Main",components:{navBar:u.a,processed:d,queue:f},methods:{addCurrentConnection:function(){var e=this;this.IntervalConnection=setInterval(function(){r.a.addCurrentConnection(e)},5e3)},checkUserIsValidated:function(){this.$auth.user().meta.is_active||this.$alert("Al parecer no as validado tu dirección de correo, es necesario que la actives para poder acceder al sistema.",{confirmButtonText:"Ok",type:"error",title:"Error de acceso",center:!0}).then(this.sendOtherToken)},sendOtherToken:function(){var e=this;r.a.sendToken().then(function(){e.$auth.logout(),e.$router.push({name:"login",query:{message:"Hemos enviado un nuevo correo de activación"}})})},filterQueue:function(){this.pageQueue=0,this.getModels()},createProcess:function(){this.$router.push({name:"process"})},intervalModels:function(){var e=this;this.inverval=setInterval(function(){e.getModels()},3e4)},registerListener:function(){this.$bus.off("refreshRegisters"),this.$bus.on("refreshRegisters",this.getModels)},changeQueueList:function(e){this.pageQueue=e,this.getModels()},changeProcessedList:function(e){this.pageProcessed=e,this.getModels()},getModels:function(){var e=this;C.a.all([r.a.getProcess(this.limit,this.offset,this.pageProcessed,5,this.searchProcessed,this.$route.params.id),r.a.getProcess(this.limit,this.offset,this.pageQueue,1,this.searchQueue,this.$route.params.id),r.a.getUser(this.$route.params.id)]).then(function(t){e.processed=t[0].data,e.queue=t[1].data,console.log(t[1].data.total),e.totalQueue=t[1].data.total,e.totalProcessed=t[0].data.total,e.user=t[2].data,e.loading=!1})}},data:function(){return{user:{},loading:!0,queue:{data:[]},processed:{data:[]},limit:5,offset:0,pageQueue:0,pageProcessed:0,totalQueue:0,totalProcessed:0,searchQueue:"",searchProcessed:""}}},fe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("nav-bar"),e._v(" "),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-md-6"},[a("h3",[a("i",{staticClass:"user icon circular inverted blue"}),e._v(" "+e._s(e.user.name.toUpperCase())+"  "+e._s(e.user.lastname.toUpperCase()))])]),e._v(" "),a("div",{staticClass:"col-md-6"},[a("button",{staticClass:"btn btn-primary float-right",on:{click:function(t){e.$router.go(-1)}}},[a("i",{staticClass:"icon user"}),e._v("Volver a "+e._s(e.user.name))])])]),e._v(" "),a("div",{staticClass:"row mt-5"},[e.user?a("div",{staticClass:"col-md-6"},[a("h4",[e._v("CASOS PROCESADOS")]),e._v(" "),a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"Búsqueda rápida de casos procesados"},on:{change:e.getModels},model:{value:e.searchProcessed,callback:function(t){e.searchProcessed=t},expression:"searchProcessed"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1),e._v(" "),a("processed",{attrs:{registers:e.processed.data}}),e._v(" "),e.processed.data.length>0?a("div",{staticClass:"mt-1"},[a("el-pagination",{attrs:{small:"","page-size":e.limit,layout:"prev, pager, next",total:e.totalProcessed},on:{"current-change":e.changeProcessedList}})],1):e._e(),e._v(" "),e.processed.data.length<1&&!e.loading?a("div",[a("center",[a("img",{staticClass:"fadeIn animated",staticStyle:{"margin-top":"30px"},attrs:{height:"105",src:"/static/finish.svg"}}),e._v(" "),a("h3",{staticStyle:{"margin-top":"0px"}},[e._v(e._s(this.user.name)+" no tiene "),a("br"),e._v(" casos procesados")])])],1):e._e(),e._v(" "),e.loading?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("h4",[e._v("esperando casos..")])]):e._e()],1):e._e(),e._v(" "),a("div",{staticClass:"col-md-6"},[a("h4",[e._v("CASOS PENDIENTES")]),e._v(" "),a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"Búsqueda rápida de casos en cola"},on:{change:e.filterQueue},model:{value:e.searchQueue,callback:function(t){e.searchQueue=t},expression:"searchQueue"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1),e._v(" "),a("queue",{attrs:{registers:e.queue.data}}),e._v(" "),e.queue.data.length>0?a("div",{staticClass:"mt-1"},[a("el-pagination",{attrs:{small:"","page-size":e.limit,layout:"prev, pager, next",total:e.totalQueue},on:{"current-change":e.changeQueueList}})],1):e._e(),e._v(" "),e.queue.data.length<1&&!e.loading?a("div",[a("center",[a("img",{staticClass:"fadeIn animated",staticStyle:{"margin-top":"30px"},attrs:{height:"105",src:"/static/database.svg"}}),e._v(" "),a("h3",{staticStyle:{"margin-top":"0px"}},[e._v(e._s(this.user.name)+" no tiene casos "),a("br"),e._v(" pendientes por procesar.")])])],1):e._e(),e._v(" "),e.loading?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("h4",[e._v("esperando casos..")])]):e._e()],1)])],1)},staticRenderFns:[]};var ve=a("VU/8")(he,fe,!1,function(e){a("hCFh")},null,null).exports;i.default.use(o.a);var _e=new o.a({mode:"history",routes:[{path:"/",meta:{auth:!0},name:"main",component:y},{path:"/login/:id?",meta:{auth:!1},name:"login",component:D},{path:"/process/:id?",meta:{auth:!0},name:"process",component:z},{path:"/users",meta:{auth:{roles:["seeUsers"],forbiddenRedirect:"/"}},name:"users",component:A},{path:"/profile",meta:{auth:!0},name:"profile",component:B},{path:"/roles",meta:{auth:{roles:["seeRoles"],forbiddenRedirect:"/"}},name:"roles",component:G},{path:"/terms",meta:{auth:!0},name:"terms",component:j},{path:"/answers",meta:{auth:!0},name:"answers",component:W},{path:"/delete-account",meta:{auth:!0},name:"deleteAccount",component:Z},{path:"/user/:id?",meta:{auth:{roles:["seeUser"],forbiddenRedirect:"/"}},name:"user",component:te},{path:"/admin",meta:{auth:{roles:["administrate"],forbiddenRedirect:"/"}},name:"admin",component:ge},{path:"/user/:id?/models",meta:{auth:{roles:["seeUserModels"],forbiddenRedirect:"/"}},name:"userModel",component:ve}]}),Ce=a("mtWM"),be=a.n(Ce),we=a("Rf8U"),ye=a.n(we),xe=a("hMcO"),Re=a.n(xe),Se=(a("Jmt5"),a("crOU"),a("JR9b")),ke=a.n(Se),$e=a("hm+w"),De=a("fC7K"),Ee=(a("L773"),a("aq5g"),a("7KzD")),Te=(a("ZHcu"),a("zL8q")),ze=a.n(Te),Ne=(a("tvR6"),a("oPmM"),a("LpxE"),a("cq1k")),Ue=a("O6Gy"),Pe=a.n(Ue),Me=(a("ux0l"),a("IPdH")),Ie=a.n(Me);i.default.config.devtools=!0,i.default.config.performance=!0,i.default.router=_e,i.default.config.productionTip=!1,i.default.use(Re.a,window.pathBase+":3000"),i.default.use($e.VuePlugin),i.default.use(De.a),i.default.use(ye.a,be.a),i.default.axios.defaults.baseURL=window.pathBase+":"+window.portBaseLaravel+"/api/v1",console.log(i.default.axios.defaults.baseURL),Object(Ee.loadProgressBar)(),i.default.use(Pe.a),i.default.use(Ne.a,{}),i.default.use(Ie.a,{name:"timeago",locale:"es-ES",locales:{"es-ES":a("sXeN")}}),i.default.use(ze.a,{locale:ke.a}),i.default.use(a("MLZB"),{auth:a("2T3s"),http:a("E/+Z"),router:a("LFDJ"),rolesVar:"permissions"});var Ae=new i.default({el:"#app",router:_e,components:{App:n},template:"<App/>"});be.a.interceptors.response.use(function(e){return e},function(e){return 401===e.response.status&&["invalid_credentials"].indexOf(e.response.data.error)>-1&&Ae.$children[0].$emit("login-error",!0),401===e.response.status&&["UnauthorizedAccess","InvalidToken","token_not_provided"].indexOf(e.response.data.error)>-1?i.default.auth.logout({redirect:{name:"login"}}):500===e.response.status&&i.default.router.push({name:"main"}),e})},Q7Uz:function(e,t){},QmSG:function(e,t,a){"use strict";t.a={path:window.pathBase,backendPort:window.portBaseLaravel,supervisordLogPath:"supervisord.log",supervisorConfPath:"supervisord.conf",queuePath:"laraqueue.supervisord_out.log",enableWindGeneration:window.enableWindGeneration,enableResults:window.enableResults}},T3Qk:function(e,t){},TcFf:function(e,t){},UFK0:function(e,t){},XJ7b:function(e,t,a){"use strict";var i=a("QmSG"),s={props:["data","templates"],name:"BasicConfig",methods:{getAction:function(){return console.log(i.a),i.a.path+":"+i.a.backendPort+"/api/v1/uploadExcel/"+this.randomCode},changeUpload:function(e,t){this.data.fileCode=this.randomCode},changeWindConfig:function(e){this.data.form.generate_wind&&this.$alert('Se ha agregado la pestaña de "proceso estocástico" en la pre-ejecución, recuerda diligenciar las series hídricas y eólicas.',"Advertencia",{confirmButtonText:"OK",type:"success"})},onSubmit:function(){if("Plantilla"!==this.data.form.type||this.data.form.template_id||this.data.form.id)if("Excel"!==this.data.form.type||this.data.fileCode){this.$route.query.deploy;this.$bus.emit("submited",{type:"basicConfig",data:this.data})}else this.$notify.error({title:"Error",message:"Debes de subir un archivo"});else this.$notify.error({title:"Error",message:"Debes seleccionar una plantilla."})},goToMain:function(){this.$router.go(-1)}},data:function(){return{config:i.a,enableTemplate:!1,enableWindGeneration:i.a.enableWindGeneration,randomCode:_.random(1,1e6),procesamiento:!1}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Nombre del caso*")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.data.form.name,expression:"data.form.name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Nombre"},domProps:{value:e.data.form.name},on:{input:function(t){t.target.composing||e.$set(e.data.form,"name",t.target.value)}}})]),e._v(" "),!e.$route.params.id&&e.$auth.check(["changeInitialConfigData"])?a("div",{staticClass:"form-group"},[a("label",[e._v("Típo de proyecto")]),e._v(" "),a("br"),e._v(" "),a("el-radio-group",{attrs:{size:"small"},model:{value:e.data.form.type,callback:function(t){e.$set(e.data.form,"type",t)},expression:"data.form.type"}},[a("el-radio-button",{attrs:{label:"En blanco"}}),e._v(" "),e.templates.length>0?a("el-radio-button",{attrs:{label:"Plantilla"}}):e._e(),e._v(" "),a("el-radio-button",{attrs:{label:"Excel"}})],1)],1):e._e(),e._v(" "),e.$auth.check(["generateWind"])&&"En blanco"===e.data.form.type&&e.enableWindGeneration?a("div",{staticClass:"form-group"},[a("label",[e._v("Generar proceso estocástico *")]),e._v(" "),a("br"),e._v(" "),a("el-switch",{staticStyle:{display:"block"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"Generar","inactive-text":"No generar"},on:{change:function(t){e.changeWindConfig()}},model:{value:e.data.form.generate_wind,callback:function(t){e.$set(e.data.form,"generate_wind",t)},expression:"data.form.generate_wind"}})],1):e._e(),e._v(" "),e.$auth.check(["createTemplates"])&&!e.$route.params.id&&e.enableTemplate?a("div",{staticClass:"form-group"},[a("label",[e._v("Es plantilla *")]),e._v(" "),a("br"),e._v(" "),a("el-switch",{staticStyle:{display:"block"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"Es plantilla","inactive-text":"No es plantilla"},model:{value:e.data.form.template,callback:function(t){e.$set(e.data.form,"template",t)},expression:"data.form.template"}})],1):e._e()]),e._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Fecha de creación")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.data.form.date,expression:"data.form.date"}],staticClass:"form-control",attrs:{disabled:"",type:"text",placeholder:"Nombre"},domProps:{value:e.data.form.date},on:{input:function(t){t.target.composing||e.$set(e.data.form,"date",t.target.value)}}})]),e._v(" "),"En blanco"===e.data.form.type&&!e.$route.params.id&&e.$auth.check(["changeInitialConfigData"])?a("div",{staticClass:"form-group"},[a("label",[e._v("Número de escenarios*")]),e._v(" "),a("br"),e._v(" "),a("el-input-number",{attrs:{max:48,type:"text",placeholder:"Nombre"},model:{value:e.data.form.scenarios,callback:function(t){e.$set(e.data.form,"scenarios",t)},expression:"data.form.scenarios"}})],1):e._e(),e._v(" "),"En blanco"===e.data.form.type&&!e.$route.params.id&&e.$auth.check(["changeInitialConfigData"])?a("div",{staticClass:"form-group"},[a("label",[e._v("Número de bloques*")]),e._v(" "),a("br"),e._v(" "),a("el-input-number",{attrs:{max:48,type:"text",placeholder:"Nombre"},model:{value:e.data.form.blocks,callback:function(t){e.$set(e.data.form,"blocks",t)},expression:"data.form.blocks"}})],1):e._e(),e._v(" "),e.$route.params.id&&"En blanco"===e.data.form.type?a("div",{staticClass:"message ui warning"},[e._v("\n      Para cambiar el número de etapas o el número de bloques debes realizar el procedimiento desde el módulo de configuración.\n    ")]):e._e(),e._v(" "),"Plantilla"!==e.data.form.type||e.$route.params.id||e.$route.params.id||!e.$auth.check(["useTemplate"])?e._e():a("div",{staticClass:"form-group"},[a("label",[e._v("Seleccione el proyecto a clonar")]),e._v(" "),a("br"),e._v(" "),a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"seleccione plantilla"},model:{value:e.data.form.template_id,callback:function(t){e.$set(e.data.form,"template_id",t)},expression:"data.form.template_id"}},e._l(e.templates,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),"Excel"===e.data.form.type?a("div",{staticClass:"form-group"},[a("label",[e._v("Selecciona archivo")]),e._v(" "),a("el-upload",{staticClass:"upload-demo",staticStyle:{width:"100%"},attrs:{drag:"","on-change":e.changeUpload,action:e.getAction()}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("Suelta tu archivo aquí o "),a("em",[e._v("haz clic para cargar")])]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("Solo archivos excel")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("Puedes descargar un archivo de excel de prueba haciendo click "),a("a",{attrs:{href:"/static/excel_template.xlsx"}},[e._v("aquí")])])])],1):e._e(),e._v(" "),a("div",{staticClass:"form-group"},[a("button",{staticClass:"btn btn-primary",on:{click:function(t){e.onSubmit()}}},[a("i",{staticClass:"icon save"}),e._v(" Guardar\n      ")]),e._v(" "),a("button",{staticClass:"btn btn-dark",on:{click:function(t){e.goToMain()}}},[a("i",{staticClass:"icon cancel"}),e._v(" Cancelar\n      ")])])])])},staticRenderFns:[]},o=a("VU/8")(s,n,!1,null,null,null).exports,r=a("BqJa"),l={mounted:function(){var e=this;"Excel"!==this.infoData.type&&r.a.getErrorsBackend(this.$route.params.id).then(function(t){""!=t.data&&(e.logs=t.data.split("\n"),e.dialogVisible=!0)}),r.a.getScenarios(this.$route.params.id).then(function(t){e.totalScenarios=t.data.length+1}),r.a.getDemand(this.$route.params.id).then(function(t){e.totalDemand=t.data.length+1,console.log(e.totalDemand),e.loadedRemote=!0}),"Excel"!==this.infoData.form.type?r.a.getValidation(this.$route.params.id).then(function(t){e.validation=t.data}):this.validation.valid=!0},props:["data","infoData"],name:"ModelConfig",methods:{stageIsNotValid:function(){return"En blanco"!==this.infoData.form.type&&(this.data.months+this.data.bnd_stages>this.totalDemand&&"En blanco"===this.infoData.form.type)},onSubmit:function(){this.$bus.emit("submitedModelConfig",{type:"modelConfig",data:this.data})},goToMain:function(){this.$router.push({name:"main"})},start:function(){var e=this;this.onSubmit(),r.a.processNew(this.$route.params.id).then(function(){e.$bus.$emit("changeStep",2)})},cancel:function(){this.$bus.$emit("changeStep",1)}},data:function(){return{loadedRemote:!1,dialogVisible:!1,logs:[],validation:{valid:!1},totalScenarios:null,totalDemand:null}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",["Excel"==e.infoData.type?a("el-dialog",{attrs:{title:"Errores de ejecución",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("span",[e._v("Hay errores en la ejecución del script en el servidor")]),e._v(" "),a("div",{staticClass:"terminal-logs",staticStyle:{height:"120px !important","margin-top":"0px"},attrs:{id:"terminal-logs"}},[a("ul",{staticStyle:{"list-style-type":"none"}},e._l(e.logs,function(t){return t?a("li",[e._v(e._s(t))]):e._e()}))]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("Cerrar mensaje")])],1)]):e._e(),e._v(" "),""!==e.infoData.form.name?a("div",{staticClass:"row",staticStyle:{"margin-bottom":"10px"}},[a("div",{staticClass:"col-md-12"},[a("button",{staticClass:"ui button inverted green float-right",staticStyle:{"margin-left":"10px"},attrs:{disabled:e.stageIsNotValid()||!e.validation.valid&&"Excel"!==e.infoData.form.type},on:{click:e.start}},[a("i",{staticClass:"icon play"}),e._v("Iniciar ejecución")]),e._v(" "),"Excel"!==e.infoData.form.type?a("button",{staticClass:"button ui black float-right init-button",on:{click:e.cancel}},[a("i",{staticClass:"icon chevron left"}),e._v(" Cancelar lanzamiento")]):e._e()])]):e._e(),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:""==e.infoData.form.name,expression:"infoData.form.name == ''"}],staticClass:"row",attrs:{"element-loading-text":"Espere un momento...","element-loading-background":"rgba(255,255,255,255)"}},[a("div",{staticClass:"col-md-4"},[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"Módulos de simulación"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"Leer datos"},model:{value:e.data.read_data,callback:function(t){e.$set(e.data,"read_data",t)},expression:"data.read_data"}})],1),e._v(" "),a("div",{staticClass:"col-md-12"},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"Calculo de parámetros"},model:{value:e.data.param_calculation,callback:function(t){e.$set(e.data,"param_calculation",t)},expression:"data.param_calculation"}})],1),e._v(" "),a("div",{staticClass:"col-md-12"},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"Flujo de carga optimo"},model:{value:e.data.param_opf,callback:function(t){e.$set(e.data,"param_opf",t)},expression:"data.param_opf"}})],1),e._v(" "),a("div",{staticClass:"col-md-12"},[a("el-switch",{attrs:{disabled:!e.$auth.check(["Experimental"]),"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"Modelo eólico geometrico"},model:{value:e.data.wind_model2,callback:function(t){e.$set(e.data,"wind_model2",t)},expression:"data.wind_model2"}})],1),e._v(" "),a("div",{staticClass:"col-md-12"},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"Restricción de flujo"},model:{value:e.data.flow_gates,callback:function(t){e.$set(e.data,"flow_gates",t)},expression:"data.flow_gates"}})],1),e._v(" "),a("div",{staticClass:"col-md-12"},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"Calculo de política"},model:{value:e.data.policy,callback:function(t){e.$set(e.data,"policy",t)},expression:"data.policy"}})],1),e._v(" "),a("div",{staticClass:"col-md-12"},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"Simulación"},model:{value:e.data.simulation,callback:function(t){e.$set(e.data,"simulation",t)},expression:"data.simulation"}})],1),e._v(" "),a("div",{staticClass:"col-md-12"},[a("el-switch",{attrs:{disabled:!e.$auth.check(["Experimental"]),"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"Paralelización"},model:{value:e.data.parallel,callback:function(t){e.$set(e.data,"parallel",t)},expression:"data.parallel"}})],1)])])],1)],1),e._v(" "),a("div",{staticClass:"col-md-8"},[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"Parámetros de simulación"}},[e.loadedRemote?a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12",staticStyle:{"margin-bottom":"15px"}},[e.stageIsNotValid()?a("div",{staticClass:"ui message red"},[a("small",[e._v("La suma de etapas y etapas extra debe ser menor o igual a los meses de la demanda.")])]):e._e()])]):e._e(),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label"},[e._v("Número máximo de iteraciones\n                ")]),e._v(" "),a("vue-numeric",{staticClass:"form-control",attrs:{disabled:!e.$auth.check(["changeInitialConfigData"]),precision:0,"decimal-separator":".","thousand-separator":","},model:{value:e.data.max_iter,callback:function(t){e.$set(e.data,"max_iter",t)},expression:"data.max_iter"}})],1)]),e._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label"},[e._v("Etapas \n                ")]),e._v(" "),a("vue-numeric",{staticClass:"form-control",attrs:{disabled:!e.$auth.check(["changeInitialConfigData"]),precision:0,"decimal-separator":".","thousand-separator":","},model:{value:e.data.months,callback:function(t){e.$set(e.data,"months",t)},expression:"data.months"}})],1)]),e._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label"},[e._v("Etapa extra\n                ")]),e._v(" "),a("vue-numeric",{staticClass:"form-control",attrs:{disabled:!e.$auth.check(["changeInitialConfigData"]),precision:0,"decimal-separator":".","thousand-separator":","},model:{value:e.data.bnd_stages,callback:function(t){e.$set(e.data,"bnd_stages",t)},expression:"data.bnd_stages"}})],1)]),e._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label"},[e._v("Series forward\n                ")]),e._v(" "),a("vue-numeric",{staticClass:"form-control",attrs:{disabled:!e.$auth.check(["changeInitialConfigData"]),precision:0,"decimal-separator":".","thousand-separator":","},model:{value:e.data.seriesForw,callback:function(t){e.$set(e.data,"seriesForw",t)},expression:"data.seriesForw"}})],1)]),e._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label"},[e._v("Series backward (max: número de escenarios)\n                ")]),e._v(" "),a("vue-numeric",{staticClass:"form-control",attrs:{disabled:!e.$auth.check(["changeInitialConfigData"]),max:e.totalScenarios,precision:0,"decimal-separator":".","thousand-separator":","},model:{value:e.data.seriesBack,callback:function(t){e.$set(e.data,"seriesBack",t)},expression:"data.seriesBack"}})],1)]),e._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label"},[e._v("Sensibilidad a la demanda\n                ")]),e._v(" "),a("vue-numeric",{staticClass:"form-control",attrs:{disabled:!e.$auth.check(["changeInitialConfigData"]),max:1,min:0,precision:0,"decimal-separator":".","thousand-separator":","},model:{value:e.data.sensDem,callback:function(t){e.$set(e.data,"sensDem",t)},expression:"data.sensDem"}})],1)]),e._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label"},[e._v(" Epsilon area  (max:1, min: 0)\n                ")]),e._v(" "),a("vue-numeric",{staticClass:"form-control",attrs:{disabled:!e.$auth.check(["changeInitialConfigData"]),precision:0,max:1,min:0,"decimal-separator":".","thousand-separator":","},model:{value:e.data.eps_area,callback:function(t){e.$set(e.data,"eps_area",t)},expression:"data.eps_area"}})],1)]),e._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label"},[e._v("Epsilon sistema (max:1, min: 0)\n                ")]),e._v(" "),a("vue-numeric",{staticClass:"form-control",attrs:{disabled:!e.$auth.check(["changeInitialConfigData"]),precision:0,max:1,min:0,"decimal-separator":".","thousand-separator":","},model:{value:e.data.eps_all,callback:function(t){e.$set(e.data,"eps_all",t)},expression:"data.eps_all"}})],1)]),e._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label"},[e._v("Epsilon largo plazo (max:1, min: 0)\n                ")]),e._v(" "),a("vue-numeric",{staticClass:"form-control",attrs:{disabled:!e.$auth.check(["changeInitialConfigData"]),precision:0,max:1,min:0,"decimal-separator":".","thousand-separator":","},model:{value:e.data.eps_risk,callback:function(t){e.$set(e.data,"eps_risk",t)},expression:"data.eps_risk"}})],1)]),e._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label"},[e._v("Factor de riesgo\n                ")]),e._v(" "),a("vue-numeric",{staticClass:"form-control",attrs:{disabled:!e.$auth.check(["changeInitialConfigData"]),precision:0,"decimal-separator":".","thousand-separator":","},model:{value:e.data.commit,callback:function(t){e.$set(e.data,"commit",t)},expression:"data.commit"}})],1)])]),e._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{disabled:e.stageIsNotValid()},on:{click:function(t){e.onSubmit()}}},[e._v("Guardar")])])],1)],1)])],1)},staticRenderFns:[]};var d=a("VU/8")(l,c,!1,function(e){a("438B")},null,null).exports,u=a("6H7d"),m=a("M4fF"),p=a.n(m),g={name:"ConfigStep",components:{basicConfig:o,modelConfig:d,windConfig:u.a},mounted:function(){this.registerListener()},destroyed:function(){this.$bus.$off("submited"),this.$bus.$off("submitedWind"),this.$bus.$off("submitedModelConfig")},props:["configData","infoData","windData","templates"],methods:{getSelected:function(){return this.$route.query.deploy?"process":"info"},registerListener:function(){var e=this;this.$bus.on("submitedWind",function(t){"windConfig"===t.type&&(e.windData=t.data,e.$bus.emit("sendUpdate",{infoData:e.infoData,configData:e.configData,windData:e.windData,reload:!1}))}),this.$bus.on("submitedModelConfig",function(t){"modelConfig"===t.type&&(e.configData=t.data,e.$bus.emit("sendUpdate",{infoData:e.infoData,configData:e.configData,windData:e.windData,reload:!1}))}),this.$bus.on("submited",function(t){"windConfig"===t.type&&(e.windData=t.data),"modelConfig"===t.type&&(e.configData=t.data),"basicConfig"===t.type&&(e.infoData=t.data),e.updateOrSave()})},updateOrSave:function(){p.a.isNil(this.$route.params.id)?this.$bus.emit("sendCreate",{infoData:this.infoData,configData:this.configData,windData:this.windData,reload:!0}):this.$bus.emit("sendUpdate",{infoData:this.infoData,configData:this.configData,windData:this.windData,reload:!1})}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{attrs:{"tab-position":"top",value:e.getSelected()}},[a("el-tab-pane",{attrs:{name:"info",label:"INFORMACIÓN DEL CASO"}},[a("basicConfig",{attrs:{templates:e.templates,data:e.infoData}})],1),e._v(" "),e.$route.query.deploy?a("el-tab-pane",{attrs:{name:"process",label:"PROCESAMIENTO"}},[a("modelConfig",{attrs:{infoData:e.infoData,data:e.configData}})],1):e._e(),e._v(" "),e.infoData.form.generate_wind&&e.$route.query.deploy?a("el-tab-pane",{attrs:{name:"wind",label:"PROCESO ESTOCÁSTICO"}},[a("windConfig",{attrs:{data:e.windData}})],1):e._e()],1)],1)},staticRenderFns:[]},f=a("VU/8")(g,h,!1,null,null,null);t.a=f.exports},ZHcu:function(e,t){},aq5g:function(e,t){},crOU:function(e,t){},"cx5+":function(e,t){},evKp:function(e,t,a){"use strict";var i,s,n=a("mvHQ"),o=a.n(n),r=a("M4fF"),l=a.n(r),c=a("BqJa"),d=a("6EGr"),u=a.n(d),m={mounted:function(){if(!this.$auth.check(["areas"]))return this.$message({message:"No tienes permisos",type:"error"}),void this.$parent.goToCategory(1)},name:"Areas",props:["data"],computed:{rows:function(e){return this.data.areas}},components:{ReactDataGrid:u.a},methods:{openModal:function(){this.dialogCreateVisible=!0,this.nameArea="Area "+parseInt(this.rows.length+1,10)},addRow:function(){var e=this;this.dialogCreateVisible=!1,this.selectedRow=null,c.a.createArea({name:this.nameArea,process_id:this.$route.params.id}).then(function(t){200===t.status?e.$bus.emit("getModulesData",[{url:"getAreas",reference:"areas"}]):e.$message({message:"Error al agregar fila.",type:"error"})}).catch(function(){console.log("error")})},deleteRow:function(e){var t=this;c.a.deleteArea(e.id).then(function(a){l.a.isNil(a.response)?(t.rows.splice(t.rows.indexOf(e),1),t.selectedRow=null,t.$bus.emit("getModulesData",[{url:"getAreas",reference:"areas"}]),t.$message({message:"Area eliminada correctamente",type:"success"})):t.$message({message:"No se ha podido eliminar el registro, esta siendo usado en otra dependencia.",type:"error"})}).catch(function(e){console.log(e)})},clickedRow:function(e){this.selectedRow=this.rows[e]},rowGetter:function(e){return this.rows[e]},handleGridRowsUpdated:function(e){for(var t=this,a=function(a){var i=t.rows[a],s=l.a.extend(i,e.updated);c.a.updateArea(s.id,s).then(function(e){200===e.status?(t.$message({message:"Modificado correctamente.",type:"success"}),t.rows[a]=s,t.$bus.emit("getModulesData",[{url:"getAreas",reference:"areas"}])):(t.rows[a].name="Inserte nuevo valor",t.$forceUpdate(),t.$message({message:"Error al modificar.",type:"error"}))}).catch(function(e){console.log(e)})},i=e.fromRow;i<=e.toRow;i++)a(i)},countRows:function(){return this.rows.length}},data:function(){return{dialogCreateVisible:!1,nameArea:"",uploadPath:window.pathBase+":"+window.portBaseLaravel+"/api/v1/areas/importExcel/"+this.$route.params.id,showUpload:!1,selectedRow:null,columns:[{key:"name",name:"Nombre",editable:!0}]}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:"Nuevo",visible:e.dialogCreateVisible,width:"30%"},on:{"update:visible":function(t){e.dialogCreateVisible=t}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("label",{staticClass:"control-label"},[e._v("Nombre del área")]),e._v(" "),a("div",{staticClass:"form-group required"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.nameArea,expression:"nameArea"}],staticClass:"form-control",attrs:{type:"text",name:"name",placeholder:"Ingrese el nombre del área"},domProps:{value:e.nameArea},on:{input:function(t){t.target.composing||(e.nameArea=t.target.value)}}})])])]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogCreateVisible=!1}}},[e._v("Cancelar")]),e._v(" "),a("el-button",{attrs:{disabled:!e.nameArea,type:"primary"},on:{click:function(t){e.addRow()}}},[e._v("Continuar")])],1),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12",staticStyle:{"margin-bottom":"10px"}},[e.showUpload?e._e():a("button",{staticClass:"btn btn-sm btn-warning float-right",staticStyle:{"margin-left":"10px"},on:{click:e.openModal}},[a("i",{staticClass:"icon plus"}),e._v("Agregar")]),e._v(" "),e.selectedRow&&!e.showUpload?a("button",{staticClass:"btn btn-sm btn-danger float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.deleteRow(e.selectedRow)}}},[a("i",{staticClass:"icon trash"}),e._v("Eliminar seleccionado (id:"+e._s(e.selectedRow.id)+")")]):e._e()])]),e._v(" "),this.rows.length?a("div",[a("ReactDataGrid",{key:"Areas",attrs:{enableCellSelect:!0,enableDragAndDrop:!0,columns:e.columns,rowsCount:e.countRows(),minHeight:500,";":""},on:{rowGetter:e.rowGetter,onRowClick:e.clickedRow,onGridRowsUpdated:e.handleGridRowsUpdated}})],1):e._e(),e._v(" "),this.rows.length<1?a("div",[a("center",[a("h2",[e._v("No existen áreas")]),e._v(" "),a("img",{staticStyle:{"margin-bottom":"10px"},attrs:{width:"100",src:"/static/area.svg"}}),e._v(" "),a("hr"),e._v(" "),a("button",{staticClass:"btn btn-lg btn-primary",on:{click:function(t){e.openModal()}}},[a("i",{staticClass:"icon add"}),e._v("Agregar nueva")])])],1):e._e()],1)},staticRenderFns:[]},g=a("VU/8")(m,p,!1,null,null,null).exports,h=a("bOdI"),f=a.n(h),v={name:"ThermalConfig",mounted:function(){var e=this;if(!this.$auth.check(["thermalConfigs"]))return this.$message({message:"No tienes permisos",type:"error"}),void this.$parent.goToCategory(1);this.data.areas.length<1&&this.$alert("No hay áreas, vas a ser redirigido al modulo de áreas.","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"error"}).then(function(){e.$parent.goToCategory(14)}),this.data.fuels.length<1&&this.$alert("No puedes acceder a esta entidad porque no hay combustibles creados. Vas a ser redirigido al modulo de combustibles.","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"error"}).then(function(){e.$parent.goToCategory(17)}),this.columns=this.filterHiddenColumns(),this.onPropsChanged()},watch:{data:{handler:function(e,t){this.onPropsChanged()},deep:!0,immediate:!0}},props:["data"],components:{ReactDataGrid:u.a},methods:{getDataSelect:function(e){return"typeName"===e.key?this.data[e.entity].filter(function(e){return"Gas"===e.name||"Coal"===e.name||"Liquids"===e.name||"Cogeneration"===e.name||"Geothermal"===e.name}):this.data[e.entity]},formatMonthDate:function(e){var t=new Date(e);e=t.getUTCMonth()+1,t.getUTCDate();return t.getUTCFullYear()+"/"+e},filterHiddenColumns:function(){return l.a.filter(this.allColumns,{display:!0})},onPropsChanged:function(e){var t=this;this.rows=l.a.clone(this.data.thermalConfig,!0),e&&(this.rows=e.thermalConfig,console.log(this.rows)),this.rows.length<1&&(this.loading=!1),l.a.each(this.rows,function(e,a){e.area=e.areas.name,e.entrance_stage=e.entrance_stages.name,e.typeName=e.type.name,e.fuelName=e.fuel.name,a===t.rows.length-1&&setTimeout(function(){t.loading=!1},2e3)})},cancelForm:function(){this.visibleTable=!0,this.selectedRow=null},getCounter:function(){return this.rows.length},update:function(){var e=this;c.a.updateThermalConfig(this.selectedRow.id,this.selectedRow).then(function(){e.selectedRow=null,e.$message({message:"Notificación: Acción realizada correctamente",type:"success"}),e.$bus.emit("getModulesData",[{reference:"thermalConfig",url:"getThermalConfig"},{url:"getThermalConfigExpansion",reference:"thermalConfigExpansion"}]),e.visibleTable=!0})},getLabelSelect:function(e,t){return"entrance_stage"===e.key?t.description:t.name},isDisabledField:function(e){return"id"===e},addRow:function(){var e=this;this.dialogCreateVisible=!1,this.selectedRow=null,c.a.createThermalConfig(f()({name:this.thermalConfigName,capacity:0,entrance_stage_id:this.data.entranceStages[0].id,process_id:this.$route.params.id,type_id:this.data.types[0].id,planta_fuel_id:this.data.fuels[0].id,area_id:this.data.areas[0].id,gen_min:0,gen_max:0,heat_rate:0,entrance_stage_date:null,forced_unavailability:0,historic_unavailability:0,"O&MVariable":0,MBTU_MWh:0,emision:0},"process_id",this.$route.params.id)).then(function(t){console.log(t);var a=t.data;a.area=e.data.areas[0].name,e.rows.push(a),e.$bus.emit("getModulesData",[{reference:"thermalConfig",url:"getThermalConfig"},{url:"getThermalConfigExpansion",reference:"thermalConfigExpansion"}])}).catch(function(e){console.log("error",e)})},deleteRow:function(e){var t=this;c.a.deleteThermalConfig(e.id).then(function(){t.rows.splice(t.rows.indexOf(e),1),t.selectedRow=null,t.visibleTable=!0,t.$bus.emit("getModulesData",[{reference:"thermalConfig",url:"getThermalConfig"},{url:"getThermalConfigExpansion",reference:"thermalConfigExpansion"}]),t.$message({message:"El registro se ha eliminado",type:"success"})})},clickedRow:function(e){var t=this;this.$confirm("¿Quieres entrar al detalle de la configuración?","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"warning"}).then(function(){t.visibleTable=!1,t.selectedRow=t.rows[e]})},rowGetter:function(e){return this.rows[e]},handleGridRowsUpdated:function(e){for(var t=this,a=function(a){var i=t.rows[a],s=l.a.extend(i,e.updated);c.a.updateArea(s.id,s).then(function(){t.rows[a]=s,t.$bus.emit("getModulesData",[{reference:"thermalConfig",url:"getThermalConfig"},{url:"getThermalConfigExpansion",reference:"thermalConfigExpansion"}])}).catch(function(e){console.log(e)})},i=e.fromRow;i<=e.toRow;i++)a(i)}},data:function(){return{dialogCreateVisible:!1,thermalConfigName:"",loading:!0,visibleTable:!0,uploadPath:window.pathBase+":"+window.portBaseLaravel+"/api/v1/thermalConfig/importExcel/"+this.$route.params.id,selectedRow:null,rows:[],columns:[],allColumns:[{key:"name",name:"Planta",width:200,type:"text",resizable:!0,display:!0},{key:"area",originalForeign:"area_id",name:"Área",type:"select",entity:"areas",resizable:!0,display:!0},{key:"capacity",name:"Capacidad",unit:"MW",precision:5,decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"typeName",originalForeign:"type_id",name:"Tipo",entity:"types",type:"select",resizable:!0,display:!1},{key:"fuelName",name:"Combustible",originalForeign:"planta_fuel_id",width:80,type:"select",entity:"fuels",resizable:!0,display:!1},{key:"gen_min",name:"Generación mínima",width:80,precision:5,unit:"MW",decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"gen_max",name:"Generación máxima",width:80,unit:"MW",precision:5,decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"forced_unavailability",name:"Indisponibilidad forzada",type:"numeric",precision:6,unit:"%",decimalSeparator:".",thousandSeparator:",",resizable:!0,display:!1},{key:"historic_unavailability",name:"Indisponibilidad historica",precision:6,unit:"%",decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"O&MVariable",name:"Costo variable",type:"numeric",unit:"$/MWh",precision:5,decimalSeparator:".",thousandSeparator:",",resizable:!0,display:!1},{key:"heat_rate",name:"Heat rate",unit:"MBTU/MWh",type:"numeric",precision:5,decimalSeparator:".",thousandSeparator:",",resizable:!0,display:!1},{key:"emision",name:"Factor de emisiones",precision:2,unit:"Ton/MBTU",decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"entrance_stage",type:"select",originalForeign:"entrance_stage_id",entity:"entranceStages",name:"Etapa de entrada",resizable:!0,display:!1}]}}},C={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"Tienes que esperar un poco..."}},[a("el-dialog",{attrs:{title:"Nuevo",visible:e.dialogCreateVisible,width:"30%"},on:{"update:visible":function(t){e.dialogCreateVisible=t}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("label",{staticClass:"control-label"},[e._v("Nombre de planta")]),e._v(" "),a("div",{staticClass:"form-group required"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.thermalConfigName,expression:"thermalConfigName"}],staticClass:"form-control",attrs:{type:"text",name:"name",placeholder:"Ingrese el nombre de la planta"},domProps:{value:e.thermalConfigName},on:{input:function(t){t.target.composing||(e.thermalConfigName=t.target.value)}}})])])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogCreateVisible=!1}}},[e._v("Cancelar")]),e._v(" "),a("el-button",{attrs:{disabled:!e.thermalConfigName,type:"primary"},on:{click:function(t){e.addRow()}}},[e._v("Continuar")])],1)]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12",staticStyle:{"margin-bottom":"10px"}},[e.visibleTable?a("button",{staticClass:"btn btn-sm btn-warning float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.dialogCreateVisible=!0}}},[a("i",{staticClass:"icon plus"}),e._v("Agregar")]):e._e(),e._v(" "),e.selectedRow?a("button",{staticClass:"btn btn-sm btn-danger float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.deleteRow(e.selectedRow)}}},[a("i",{staticClass:"icon trash"}),e._v("Eliminar seleccionado (id:"+e._s(e.selectedRow.id)+")")]):e._e()])]),e._v(" "),e.visibleTable&&!e.loading?a("div",[a("el-alert",{staticStyle:{"margin-bottom":"20px"},attrs:{title:"Para editar las propiedades de la planta selecciona un registro.",type:"warning","show-icon":""}}),e._v(" "),a("ReactDataGrid",{key:"thermalConfig",attrs:{enableCellSelect:!0,columns:e.columns,rowsCount:e.getCounter(),minHeight:500},on:{rowGetter:e.rowGetter,onRowClick:e.clickedRow,onGridRowsUpdated:e.handleGridRowsUpdated}})],1):e._e(),e._v(" "),a("div",{staticClass:"row"},[e.selectedRow&&!e.visibleTable?a("div",{staticClass:"col-md-12"},[e.selectedRow.gen_min>e.selectedRow.gen_max?a("el-alert",{staticStyle:{"margin-bottom":"10px"},attrs:{title:"La generación mínima de la planta térmica no puede ser mayor a la generación máxima.",type:"warning"}}):e._e(),e._v(" "),e.selectedRow.gen_max>e.selectedRow.capacity?a("el-alert",{staticStyle:{"margin-bottom":"10px"},attrs:{title:"La generación máxima de no puede ser superior a la capacidad.",type:"warning"}}):e._e()],1):e._e()]),e._v(" "),e.visibleTable?e._e():a("div",{staticClass:"row"},[e._l(e.allColumns,function(t){return a("div",{staticClass:"col-md-6"},["text"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name))]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedRow[t.key],expression:"selectedRow[column.key]"}],staticClass:"form-control",attrs:{disabled:e.isDisabledField(t.key),type:"text",name:"name",placeholder:"Ingrese valor"},domProps:{value:e.selectedRow[t.key]},on:{input:function(a){a.target.composing||e.$set(e.selectedRow,t.key,a.target.value)}}})]):e._e(),e._v(" "),"numeric"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name)+"\n          "),t.unit?a("el-tag",{attrs:{type:"primary",size:"small"}},[e._v(e._s(t.unit))]):e._e()],1),e._v(" "),a("vue-numeric",{staticClass:"form-control",attrs:{precision:t.precision,"decimal-separator":t.decimalSeparator,"thousand-separator":t.thousandSeparator},model:{value:e.selectedRow[t.key],callback:function(a){e.$set(e.selectedRow,t.key,a)},expression:"selectedRow[column.key]"}})],1):e._e(),e._v(" "),"select"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name))]),e._v(" "),a("el-select",{staticStyle:{width:"100%"},model:{value:e.selectedRow[t.originalForeign],callback:function(a){e.$set(e.selectedRow,t.originalForeign,a)},expression:"selectedRow[column.originalForeign]"}},e._l(e.getDataSelect(t),function(i){return a("el-option",{key:i.id,attrs:{label:e.getLabelSelect(t,i),value:i.id}})}))],1):e._e(),e._v(" "),3===e.selectedRow.entrance_stage_id&&"entrance_stage"===t.key?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Ingrese fecha de entrada")]),e._v(" "),a("el-select",{staticStyle:{width:"100%"},model:{value:e.selectedRow.entrance_stage_date,callback:function(t){e.$set(e.selectedRow,"entrance_stage_date",t)},expression:"selectedRow['entrance_stage_date']"}},e._l(e.data.horizonts,function(t){return a("el-option",{key:t.id,attrs:{label:e.formatMonthDate(t.period),value:t.id}})}))],1):e._e()])}),e._v(" "),a("div",{staticClass:"col-md-12"},[a("button",{staticClass:"btn btn-dark float-right",on:{click:function(t){e.cancelForm()}}},[a("i",{staticClass:"icon cancel"}),e._v("Cancelar ")]),e._v(" "),a("button",{staticClass:"btn btn-primary float-right",staticStyle:{"margin-right":"10px"},on:{click:e.update}},[a("i",{staticClass:"icon save"}),e._v("Actualizar\n      ")])])],2)],1)},staticRenderFns:[]},b=a("VU/8")(v,C,!1,null,null,null).exports,w={name:"windowConfigCategory",mounted:function(){var e=this;if(!this.$auth.check(["windConfigs"]))return this.$message({message:"No tienes permisos",type:"error"}),void this.$parent.goToCategory(1);this.data.areas.length<1&&this.$alert("No existen áreas, vas a ser redirigido al modulo de áreas.","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"error"}).then(function(){e.$parent.goToCategory(14)}),this.columns=this.filterHiddenColumns(),this.onPropsChanged()},watch:{data:{handler:function(e,t){this.onPropsChanged()},deep:!0,immediate:!0}},props:["infoData","data"],components:{ReactDataGrid:u.a},methods:{addEolicSeries:function(){this.dialogVisibleSeries=!0},formatMonthDate:function(e){var t=new Date(e);e=t.getUTCMonth()+1,t.getUTCDate();return t.getUTCFullYear()+"/"+e},getSelectValues:function(e){var t=this;if("horizonts"===e){var a=[];return l.a.each(this.data.horizonts,function(e){a.push({id:e.id,period:t.formatMonthDate(e.period)})}),a}return this.data[e]},filterHiddenColumns:function(){return l.a.filter(this.allColumns,{display:!0})},onPropsChanged:function(e){var t=this;this.rows=l.a.clone(this.data.windConfig,!0),this.rows.length<1&&(this.loading=!1),l.a.each(this.rows,function(e,a){e.area=e.areas.name,e.entrance_stage=e.entrance_stages.name,a===t.rows.length-1&&setTimeout(function(){t.loading=!1},2e3)})},getCounter:function(){return this.rows.length},update:function(){var e=this;console.log(this.selectedRow),c.a.updateWindConfig(this.selectedRow.id,this.selectedRow).then(function(){e.$message({message:"Notificación: Acción realizada correctamente",type:"success"}),e.$bus.emit("getModulesData",[{url:"getWindConfig",reference:"windConfig"},{reference:"windConfigExpansion",url:"getWindExpansion"}]),e.visibleTable=!0})},isDisabledField:function(e){return"id"===e},getActionWind:function(){return window.pathBase+":"+window.portBaseLaravel+"/api/v1/uploadWind/"+this.selectedRow.id},changeUploadWind:function(){this.dialogVisibleSeries&&(this.$notify({title:"Exitoso",message:"El archivo ha sido cargado.",type:"success"}),this.dialogVisibleSeries=!1,this.selectedRow.uploaded_series=1)},successUpload:function(e){this.rows=e,this.rows.splice(0,0),this.showUpload=!1,this.$message({message:"Notificación: Importación realizada correctamente",type:"success"})},getLabelSelect:function(e,t){return"entrance_stage"===e.key?t.description:"initial_storage_stage"===e.key?this.formatMonthDate(t.period):t[e.keySelect]},addRow:function(){var e=this;this.dialogCreateVisible=!1,this.selectedRow=null,c.a.createWindConfig({planta:this.windConfigName,capacity:0,losses:0,density:0,fp:0,p_instalada:0,efficiency:0,diameter:0,speed_rated:0,entrance_stage_id:this.data.entranceStages[0].id,area_id:this.data.areas[0].id,forced_unavailability:0,variability:0,historic_unavailability:0,process_id:this.$route.params.id,speed_in:0,speed_out:0,betz_limit:0}).then(function(t){e.$bus.emit("getModulesData",[{url:"getWindConfig",reference:"windConfig"},{reference:"windConfigExpansion",url:"getWindExpansion"}])})},deleteRow:function(e){var t=this;c.a.deleteWinConfig(e.id).then(function(a){l.a.isNil(a.response)||500!==a.response.status?(t.rows.splice(t.rows.indexOf(e),1),t.selectedRow=null,t.visibleTable=!0,t.$bus.emit("getModulesData",[{url:"getWindConfig",reference:"windConfig"},{reference:"windConfigExpansion",url:"getWindExpansion"}]),t.$message({message:"El registro se ha eliminado",type:"success"})):t.$message({message:"El registro no se puede eliminar porque se esta usando en otras dependencias de plantas eólicas.",type:"error"})})},clickedRow:function(e){var t=this;this.$confirm("¿Quieres entrar al detalle de la configuración?","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"warning"}).then(function(){t.selectedRow=t.rows[e],t.visibleTable=!1})},rowGetter:function(e){return this.rows[e]}},data:function(){return{dialogVisibleSeries:!1,windConfigName:"",dialogCreateVisible:!1,loading:!0,visibleTable:!0,uploadPath:window.pathBase+":"+window.portBaseLaravel+"/api/v1/windConfig/importExcel/"+this.$route.params.id,showUpload:!1,selectedRow:null,rows:[],columns:[],allColumns:[{key:"planta",name:"Nombre",width:200,type:"text",resizable:!0,display:!0},{key:"area",originalForeign:"area_id",name:"Area",type:"select",keySelect:"name",entity:"areas",resizable:!0,display:!0},{key:"capacity",name:"Capacidad",unit:"MW",precision:5,decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"losses",name:"Perdidas (%) max: 1, min: 0",max:1,min:0,unit:"%",precision:6,decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"density",name:"Densidad",unit:"Kg/m3",precision:5,decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"efficiency",name:"Eficiencia % Max: 1, Min: 0",unit:"%",max:1,min:1,precision:6,decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"diameter",name:"Diametro",unit:"m",precision:5,decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"speed_rated",name:"Velocidad nominal",precision:5,unit:"m/s",decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"initial_storage_stage",originalForeign:"initial_storage_stage",name:"Fecha inicial de almacenamiento",type:"select",keySelect:"period",entity:"horizonts",resizable:!0,display:!1},{key:"forced_unavailability",name:"Indisponibilidad forzada",precision:6,unit:"%",decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"variability",name:"Variabilidad min:0, max:100",precision:5,unit:"%",max:100,min:0,decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"speed_in",name:"Velocidad de entrada",unit:"m/s",precision:5,decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"speed_out",name:"Velocidad de salida",unit:"m/s",precision:5,decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"betz_limit",name:"Limite de Betz min: 0, max: 1",precision:6,decimalSeparator:".",thousandSeparator:",",min:0,max:1,type:"numeric",resizable:!0,display:!1},{key:"entrance_stage",keySelect:"name",type:"select",originalForeign:"entrance_stage_id",entity:"entranceStages",name:"Etapa de entrada",resizable:!0,display:!1}]}}},y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"Tienes que esperar un poco..."}},[a("el-dialog",{attrs:{title:"Nuevo",visible:e.dialogCreateVisible,width:"30%"},on:{"update:visible":function(t){e.dialogCreateVisible=t}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("label",{staticClass:"control-label"},[e._v("Nombre de la planta")]),e._v(" "),a("div",{staticClass:"form-group required"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.windConfigName,expression:"windConfigName"}],staticClass:"form-control",attrs:{type:"text",name:"name",placeholder:"Ingrese el nombre de la planta"},domProps:{value:e.windConfigName},on:{input:function(t){t.target.composing||(e.windConfigName=t.target.value)}}})])])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogCreateVisible=!1}}},[e._v("Cancelar")]),e._v(" "),a("el-button",{attrs:{disabled:!e.windConfigName,type:"primary"},on:{click:function(t){e.addRow()}}},[e._v("Continuar")])],1)]),e._v(" "),e.selectedRow?a("el-dialog",{attrs:{title:"Agregar series eólicas",visible:e.dialogVisibleSeries,width:"30%"},on:{"update:visible":function(t){e.dialogVisibleSeries=t}}},[e.selectedRow.uploaded_series?a("div",[a("center",[a("h4",[e._v("Ya se han introducido series en esta planta")]),e._v(" "),a("button",{staticClass:"btn btn-primary",on:{click:function(t){e.selectedRow.uploaded_series=null}}},[e._v("Volver a subir")])])],1):a("div",[a("center",[a("el-upload",{staticClass:"upload-demo",staticStyle:{width:"100%"},attrs:{drag:"","on-change":e.changeUploadWind,action:e.getActionWind()}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("Suelta tu archivo aquí o "),a("em",[e._v("haz clic para cargar")])]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("Puedes descargar un archivo de excel de prueba haciendo click "),a("a",{attrs:{href:"/static/template_series.csv"}},[e._v("aquí")])])])],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisibleSeries=!1}}},[e._v("Cancelar")])],1)]):e._e(),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12",staticStyle:{"margin-bottom":"10px"}},[!e.showUpload&&e.visibleTable?a("button",{staticClass:"btn btn-sm btn-warning float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.dialogCreateVisible=!0}}},[a("i",{staticClass:"icon plus"}),e._v("Agregar")]):e._e(),e._v(" "),e.selectedRow&&!e.showUpload?a("button",{staticClass:"btn btn-sm btn-danger float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.deleteRow(e.selectedRow)}}},[a("i",{staticClass:"icon trash"}),e._v("Eliminar seleccionado (id:"+e._s(e.selectedRow.id)+")")]):e._e(),e._v(" "),e.selectedRow&&!e.visibleTable&&e.infoData.form.generate_wind?a("button",{staticClass:"btn btn-sm btn-warning float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.addEolicSeries()}}},[a("i",{staticClass:"icon plus"}),e._v("Agregar series eólicas")]):e._e()])]),e._v(" "),e.showUpload||!e.visibleTable||e.loading?e._e():a("div",[e.rows.length>0?a("el-alert",{staticStyle:{"margin-bottom":"20px"},attrs:{title:"Para editar las propiedades de la planta selecciona un registro.",type:"warning","show-icon":""}}):e._e(),e._v(" "),a("ReactDataGrid",{key:"windConfig",attrs:{enableCellSelect:!0,columns:e.columns,rowsCount:e.getCounter(),minHeight:500,";":""},on:{rowGetter:e.rowGetter,onRowClick:e.clickedRow}})],1),e._v(" "),a("div",{staticClass:"row"},[e.selectedRow&&!e.visibleTable?a("div",{staticClass:"col-md-12"},[e.selectedRow.speed_in>e.selectedRow.speed_rated?a("el-alert",{staticStyle:{"margin-bottom":"10px"},attrs:{title:"La velocidad de entrada debe de ser menor a la velocidad nominal",type:"warning"}}):e._e(),e._v(" "),e.selectedRow.speed_out>e.selectedRow.speed_rated?a("el-alert",{staticStyle:{"margin-bottom":"10px"},attrs:{title:"La velocidad de salida no puede ser mayor a velocidad nominal",type:"warning"}}):e._e()],1):e._e()]),e._v(" "),e.infoData.form.generate_wind&&!e.visibleTable?a("div",{staticClass:"ui message yellow row"},[e._m(0),e._v(" "),a("div",{staticClass:"col-md-6",staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Potencia instalada\n          "),a("el-tag",{attrs:{size:"small",type:"primary"}},[e._v("MW")])],1),e._v(" "),a("vue-numeric",{staticClass:"form-control",attrs:{max:100,min:0,precision:5,"decimal-separator":",","thousand-separator":"."},model:{value:e.selectedRow.p_instalada,callback:function(t){e.$set(e.selectedRow,"p_instalada",t)},expression:"selectedRow.p_instalada"}})],1)]),e._v(" "),a("div",{staticClass:"col-md-6",staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Factor de planta\n          "),a("el-tag",{attrs:{size:"small",type:"primary"}},[e._v("%")])],1),e._v(" "),a("vue-numeric",{staticClass:"form-control",attrs:{max:100,min:0,precision:5,"decimal-separator":",","thousand-separator":"."},model:{value:e.selectedRow.fp,callback:function(t){e.$set(e.selectedRow,"fp",t)},expression:"selectedRow.fp"}})],1)])]):e._e(),e._v(" "),e.showUpload||e.visibleTable?e._e():a("div",{staticClass:"row"},[e._l(e.allColumns,function(t){return a("div",{staticClass:"col-md-6"},["text"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name))]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedRow[t.key],expression:"selectedRow[column.key]"}],staticClass:"form-control",attrs:{disabled:e.isDisabledField(t.key),type:"text",name:"name",placeholder:t.key},domProps:{value:e.selectedRow[t.key]},on:{input:function(a){a.target.composing||e.$set(e.selectedRow,t.key,a.target.value)}}})]):e._e(),e._v(" "),"numeric"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name)+"\n          "),t.unit?a("el-tag",{attrs:{type:"primary",size:"small"}},[e._v(e._s(t.unit))]):e._e()],1),e._v(" "),a("vue-numeric",{staticClass:"form-control",attrs:{min:t.min,max:t.max,precision:t.precision,"decimal-separator":t.decimalSeparator,"thousand-separator":t.thousandSeparator},model:{value:e.selectedRow[t.key],callback:function(a){e.$set(e.selectedRow,t.key,a)},expression:"selectedRow[column.key]"}})],1):e._e(),e._v(" "),"select"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name))]),e._v(" "),a("el-select",{staticStyle:{width:"100%"},model:{value:e.selectedRow[t.originalForeign],callback:function(a){e.$set(e.selectedRow,t.originalForeign,a)},expression:"selectedRow[column.originalForeign]"}},e._l(e.data[t.entity],function(i){return a("el-option",{key:i.id,attrs:{label:e.getLabelSelect(t,i),value:i.id}})}))],1):e._e(),e._v(" "),3===e.selectedRow.entrance_stage_id&&"entrance_stage"===t.key?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Ingrese fecha de entrada")]),e._v(" "),a("el-select",{staticStyle:{width:"100%"},model:{value:e.selectedRow.entrance_stage_date,callback:function(t){e.$set(e.selectedRow,"entrance_stage_date",t)},expression:"selectedRow['entrance_stage_date']"}},e._l(e.data.horizonts,function(t){return a("el-option",{key:t.id,attrs:{label:e.formatMonthDate(t.period),value:t.id}})}))],1):e._e()])}),e._v(" "),a("div",{staticClass:"col-md-12"},[a("button",{staticClass:"btn btn-dark float-right",on:{click:function(t){e.visibleTable=!0}}},[a("i",{staticClass:"icon cancel"}),e._v("Cancelar ")]),e._v(" "),a("button",{staticClass:"btn btn-primary float-right",staticStyle:{"margin-right":"10px"},on:{click:e.update}},[a("i",{staticClass:"icon save"}),e._v("Actualizar\n      ")])])],2),e._v(" "),e.showUpload?a("div",{staticStyle:{"margin-top":"100px"}},[a("center",[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"","on-success":e.successUpload,action:e.uploadPath,multiple:""}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("Suelta tu archivo aquí o "),a("em",[e._v("haz clic para cargar")])]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("Solo archivos excel")])]),e._v(" "),a("hr"),e._v(" "),a("button",{staticClass:"btn btn-outline-danger btn-lg",on:{click:function(t){e.showUpload=!1}}},[e._v("\n        Cancelar subida")])],1)],1):e._e()],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"col-md-12"},[t("h3",[this._v("Información generación (generación de datos)")])])}]},x=a("VU/8")(w,y,!1,null,null,null).exports,R={name:"Types",mounted:function(){this.rows=l.a.clone(this.data.types,!0),console.log(this.rows)},props:["data"],components:{ReactDataGrid:u.a},methods:{successUpload:function(e){this.rows=e,this.rows.splice(0,0),this.showUpload=!1,this.$message({message:"Notificación: Importación realizada correctamente",type:"success"}),this.$bus.emit("getModulesData")},addRow:function(){var e=this;this.selectedRow=null,c.a.createArea({name:"Nueva area",process_id:this.$route.params.id}).then(function(t){e.rows.push(t.data),e.$bus.emit("getModulesData")})},deleteRow:function(e){var t=this;c.a.deleteArea(e.id).then(function(){t.rows.splice(t.rows.indexOf(e),1),t.selectedRow=null,t.$bus.emit("getModulesData")})},clickedRow:function(e){this.selectedRow=this.rows[e]},download:function(){[].unshift(["ID","name"]),c.a.donwloadExcelAreas(this.$route.params.id).then(function(e){var t=document.createElement("a");t.href=e.data.file,t.download=e.data.name,document.body.appendChild(t),t.click(),t.remove()})},rowGetter:function(e){return this.rows[e]},handleGridRowsUpdated:function(e){for(var t=this,a=function(a){var i=t.rows[a],s=l.a.extend(i,e.updated);c.a.updateArea(s.id,s).then(function(){t.rows[a]=s,t.$bus.emit("getModulesData")}).catch(function(e){console.log(e)})},i=e.fromRow;i<=e.toRow;i++)a(i)},countRows:function(){return this.rows.length}},data:function(){return{uploadPath:window.pathBase+":"+window.portBaseLaravel+"/api/v1/areas/importExcel/"+this.$route.params.id,showUpload:!1,selectedRow:null,rows:[],columns:[{key:"name",name:"Tipo",editable:!1}]}}},S={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12",staticStyle:{"margin-bottom":"10px",visibility:"hidden"}},[e.showUpload?e._e():a("button",{staticClass:"btn btn-sm btn-warning float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.addRow()}}},[a("i",{staticClass:"icon plus"}),e._v("Agregar")]),e._v(" "),e.selectedRow&&!e.showUpload?a("button",{staticClass:"btn btn-sm btn-danger float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.deleteRow(e.selectedRow)}}},[a("i",{staticClass:"icon trash"}),e._v("Eliminar seleccionado (id:"+e._s(e.selectedRow.id)+")")]):e._e(),e._v(" "),a("button",{staticClass:"btn btn-sm btn-dark float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.download()}}},[a("i",{staticClass:"icon download"}),e._v("Descargar plantilla")]),e._v(" "),a("button",{staticClass:"btn btn-sm btn-primary float-right",on:{click:function(t){e.showUpload=!0}}},[a("i",{staticClass:"icon upload"}),e._v("Cargar plantilla")])])]),e._v(" "),e.showUpload?e._e():a("div",[a("el-alert",{staticStyle:{"margin-bottom":"20px"},attrs:{title:"Contenido es de solo lectura",type:"warning"}}),e._v(" "),a("ReactDataGrid",{key:"Areas",attrs:{enableCellSelect:!0,columns:e.columns,rowsCount:e.countRows(),minHeight:500,";":""},on:{rowGetter:e.rowGetter,onRowClick:e.clickedRow,onGridRowsUpdated:e.handleGridRowsUpdated}})],1),e._v(" "),e.showUpload?a("div",{staticStyle:{"margin-top":"100px"}},[a("center",[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"","on-success":e.successUpload,action:e.uploadPath,multiple:""}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("Suelta tu archivo aquí o "),a("em",[e._v("haz clic para cargar")])]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("Solo archivos excel")])]),e._v(" "),a("hr"),e._v(" "),a("button",{staticClass:"btn btn-outline-danger btn-lg",on:{click:function(t){e.showUpload=!1}}},[e._v("\n        Cancelar subida")])],1)],1):e._e()])},staticRenderFns:[]},k=a("VU/8")(R,S,!1,null,null,null).exports,$={name:"EntranceStage",mounted:function(){if(!this.$auth.check(["entranceStages"]))return this.$message({message:"No tienes permisos",type:"error"}),void this.$parent.goToCategory(1);this.rows=l.a.clone(this.data.entranceStages,!0)},props:["data"],components:{ReactDataGrid:u.a},methods:{successUpload:function(e){this.rows=e,this.rows.splice(0,0),this.showUpload=!1,this.$message({message:"Notificación: Importación realizada correctamente",type:"success"}),this.$bus.emit("getModulesData")},addRow:function(){var e=this;this.selectedRow=null,c.a.createArea({name:"Nueva area",process_id:this.$route.params.id}).then(function(t){e.rows.push(t.data),e.$bus.emit("getModulesData")})},deleteRow:function(e){var t=this;c.a.deleteArea(e.id).then(function(){t.rows.splice(t.rows.indexOf(e),1),t.selectedRow=null,t.$bus.emit("getModulesData")})},clickedRow:function(e){this.selectedRow=this.rows[e]},download:function(){[].unshift(["ID","name"]),c.a.donwloadExcelAreas(this.$route.params.id).then(function(e){var t=document.createElement("a");t.href=e.data.file,t.download=e.data.name,document.body.appendChild(t),t.click(),t.remove()})},rowGetter:function(e){return this.rows[e]},handleGridRowsUpdated:function(e){for(var t=this,a=function(a){var i=t.rows[a],s=l.a.extend(i,e.updated);c.a.updateArea(s.id,s).then(function(){t.rows[a]=s,t.$bus.emit("getModulesData")}).catch(function(e){console.log(e)})},i=e.fromRow;i<=e.toRow;i++)a(i)},countRows:function(){return this.rows.length}},data:function(){return{uploadPath:window.pathBase+":"+window.portBaseLaravel+"/api/v1/areas/importExcel/"+this.$route.params.id,showUpload:!1,selectedRow:null,rows:[],columns:[{key:"name",name:"Tipo",editable:!1},{key:"description",name:"Descripcion",editable:!1}]}}},D={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12",staticStyle:{"margin-bottom":"10px",visibility:"hidden"}},[e.showUpload?e._e():a("button",{staticClass:"btn btn-sm btn-warning float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.addRow()}}},[a("i",{staticClass:"icon plus"}),e._v("Agregar")]),e._v(" "),e.selectedRow&&!e.showUpload?a("button",{staticClass:"btn btn-sm btn-danger float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.deleteRow(e.selectedRow)}}},[a("i",{staticClass:"icon trash"}),e._v("Eliminar seleccionado (id:"+e._s(e.selectedRow.id)+")")]):e._e(),e._v(" "),a("button",{staticClass:"btn btn-sm btn-dark float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.download()}}},[a("i",{staticClass:"icon download"}),e._v("Descargar plantilla")]),e._v(" "),a("button",{staticClass:"btn btn-sm btn-primary float-right",on:{click:function(t){e.showUpload=!0}}},[a("i",{staticClass:"icon upload"}),e._v("Cargar plantilla")])])]),e._v(" "),e.showUpload?e._e():a("div",[a("el-alert",{staticStyle:{"margin-bottom":"20px"},attrs:{title:"Contenido es de solo lectura",type:"warning"}}),e._v(" "),a("ReactDataGrid",{key:"Areas",attrs:{enableCellSelect:!0,columns:e.columns,rowsCount:e.countRows(),minHeight:500,";":""},on:{rowGetter:e.rowGetter,onRowClick:e.clickedRow,onGridRowsUpdated:e.handleGridRowsUpdated}})],1),e._v(" "),e.showUpload?a("div",{staticStyle:{"margin-top":"100px"}},[a("center",[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"","on-success":e.successUpload,action:e.uploadPath,multiple:""}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("Suelta tu archivo aquí o "),a("em",[e._v("haz clic para cargar")])]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("Solo archivos excel")])]),e._v(" "),a("hr"),e._v(" "),a("button",{staticClass:"btn btn-outline-danger btn-lg",on:{click:function(t){e.showUpload=!1}}},[e._v("\n        Cancelar subida")])],1)],1):e._e()])},staticRenderFns:[]},E=a("VU/8")($,D,!1,null,null,null).exports,T={name:"Demand",props:["data"],mounted:function(){if(!this.$auth.check(["demands"]))return this.$message({message:"No tienes permisos",type:"error"}),void this.$parent.goToCategory(1);"true"===window.localStorage.getItem("showFactorArea")&&(window.localStorage.setItem("showFactorArea",!1),this.showFactorArea=!0),this.onPropsChanged()},watch:{data:{handler:function(e){this.onPropsChanged(e)},deep:!0,immediate:!0}},components:{ReactDataGrid:u.a},methods:{validDemand:function(){var e=!0,t=0;return console.log(this.data),this.data.horizonts.forEach(function(e){console.log(e),t+=e.national}),0==t&&(e=!1),e},validFactor:function(){var e=!0,t=0;return this.demand.forEach(function(e){t+=e.factor}),0==t&&(e=!1),e},onPropsChanged:function(e){e&&(this.areas=e.areas,this.horizont=e.horizonts,this.formatHorizontDate())},deleteSelectedHorizon:function(){var e=this;c.a.deleteHorizontById(this.selectedRowHorizont.id).then(function(t){"error"!==t.data?(e.horizont.splice(e.horizont.indexOf(e.selectedRowHorizont),1),e.selectedRowHorizont=null):e.$message({message:"Error al eliminar, esta siendo usado en otra dependencia.",type:"error"})})},clickedRowHorizon:function(e){this.selectedRowHorizont=this.horizont[e]},handleDemandUpdated:function(e){var t=this;if(!l.a.isNil(e.updated.factor)){if(isNaN(e.updated.factor))return this.$message({message:"Introduce un valor numérico",type:"error"}),!1;if(e.updated.factor<0)return this.$message({message:"Introduce un valor positivo.",type:"error"}),!1}e.fromRowData.factor=e.updated.factor,e.fromRowData.area_id=this.selectedArea,l.a.isNil(e.fromRowData.demand_id)?(e.fromRowData.horizont_id=e.fromRowData.id,c.a.createDemand(e.fromRowData).then(function(a){200===a.status&&(e.fromRowData.demand_id=a.data.id,t.$message({message:"Periodo creado",type:"success"}))})):c.a.updateDemand(e.fromRowData.demand_id,e.fromRowData).then(function(e){console.log(e)})},handleHorizonUpdated:function(e){var t=this;if(!l.a.isNil(e.updated.national)){if(isNaN(e.updated.national))return this.$message({message:"El valor no es numérico",type:"error"}),!1;if(e.updated.national<0)return this.$message({message:"La demanda debe de ser mayor a cero.",type:"error"}),!1}e.fromRowData.national=e.updated.national,c.a.updateHorizont(e.fromRowData.id,e.fromRowData).then(function(e){t.$message({message:"Periodo actualizado",type:"success"})})},deleteHorizont:function(){var e=this;this.$confirm("Estas completamente seguro de que deseas eliminar la demanda? Esto es muy peligroso pues borra un monton de entidades en cascada. Luego es imposible recuperar. Continuar?","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"warning"}).then(function(){c.a.deleteHorizontByProcessId(e.$route.params.id).then(function(t){200===t.status&&"error"!==t.data?(e.$bus.emit("getModulesData",[{url:"getHorizontByProcessId",reference:"horizonts"}]),e.$message({message:"El horizonte se elimino satisfactoriamente",type:"success"})):e.$message({message:"No se ha podido eliminar, esta siendo usado por otra dependencia.",type:"error"})})})},formatHorizontDate:function(){var e=this;l.a.each(this.horizont,function(t){t.fecha=e.formatMonthDate(t.period)})},formatPeriodDate:function(){var e=this;l.a.each(this.demand,function(t){t.fecha=e.formatMonthDate(t.period)})},toggleFactorArea:function(){var e=this;this.data.areas.length>0?(this.selectedArea=null,this.demand=[],this.showFactorArea=!this.showFactorArea):this.$confirm("No tienes areas por lo que no puedes acceder a configurar. Deseas ir a crear áreas?","Advertencia",{confirmButtonText:"ir a crear áreas",cancelButtonText:"Cancelar",type:"warning"}).then(function(t){t&&e.$parent.goToCategory(14)})},addDemand:function(){this.showMenuAdd=!1},formatData:function(e){l.a.each(e,function(e){e.area=e.areas.name})},countRowsHorizont:function(){return this.horizont.length},countRowsDemand:function(){return this.demand.length},changeArea:function(){var e=this,t=[];l.a.each(this.horizont,function(e){t.push({id:e.id,process_id:e.process_id,period:e.period,national:e.national,created_at:e.created_at,updated_at:e.updated_at,fecha:e.fecha})});c.a.getDemandByArea(this.selectedArea).then(function(a){l.a.each(t,function(i){l.a.each(a.data,function(a){a.horizont_id===i.id&&a.area_id===e.selectedArea&&(i.factor=a.factor,i.demand_id=a.demand_id,i.horizont_id=a.horizont_id,i.area_id=a.area_id,e.demand=t)})}),e.demand=t})},formatMonthDate:function(e){var t=new Date(e);e=t.getUTCMonth()+1,t.getUTCDate();return t.getUTCFullYear()+"/"+e},rowGetterDemand:function(e){return this.demand[e]},rowGetterHorizont:function(e){return this.horizont[e]},toggleAdd:function(){this.showAddForm=!0},periodExist:function(e){var t=new Date(e),a=t.getFullYear()+"/"+t.getMonth();return l.a.find(this.horizont,{fecha:a})},addRange:function(){var e=this,t=this.monthDiff(this.initialDate,this.finishDate);if(t>-1)for(var a=t;a>=0;a--){var i=0,s=this.generateDateToCreate(a,this.initialDate);if(console.log(t),this.periodExist(s)){this.$message({message:"El periodo ya existe",type:"warning"});break}this.loading=!0,c.a.createHorizont({process_id:parseInt(this.$route.params.id,10),period:s.toLocaleString(),national:0}).then(function(){(i+=1)===t&&(e.$message({message:"Rango agregado correctamente",type:"success"}),e.$bus.emit("getModulesData",[{url:"getHorizontByProcessId",reference:"horizonts"}]),e.showAddForm=!1,e.loading=!1)})}else this.$message({message:"El mes de inicio debe ser mayor.",type:"error"})},generateDateToCreate:function(e,t){var a=new Date;a.setDate(1),a.setYear(t.getFullYear()),a.setMonth(t.getMonth()+e);var i=a.getDate(),s=a.getMonth()+1,n=a.getFullYear();return i<10&&(i="0"+i),s<10&&(s="0"+s),s+"/"+i+"/"+n},monthDiff:function(e,t){var a;return a=12*(t.getFullYear()-e.getFullYear()),a-=e.getMonth()+1,(a+=t.getMonth())<=0?0:a+1},mysqlDate:function(e){return(e=e||new Date).toISOString().split("T")[0]}},data:function(){return{showFactorArea:!1,selectedRowHorizont:null,showMenuAdd:!1,horizont:[],loading:!1,demand:[],initialDate:"",finishDate:"",areas:[],selectedArea:null,rows:[],columnsHorizont:[{key:"fecha",name:"Mes",editable:!1},{key:"national",name:"Demanda agregada (MW)",editable:!0}],columnsFactor:[{key:"fecha",name:"Horizonte",editable:!1},{key:"national",name:"Demanda agregada (MW)",editable:!1},{key:"factor",name:"Factor",editable:!0}]}}},z={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"row",attrs:{"element-loading-text":"Creando demanda"}},[a("div",{staticClass:"col-md-12"},[e.showMenuAdd?a("div",{staticClass:"mainButton"},[a("center",[e.areas.length>0?a("button",{staticClass:"btn btn-primary btn-lg",staticStyle:{"margin-top":"130px"},on:{click:function(t){e.addDemand()}}},[a("i",{staticClass:"icon add"}),e._v(" Agregar demanda")]):e._e()])],1):e._e(),e._v(" "),e.showFactorArea?a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("button",{staticClass:"btn btn-warning float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.toggleFactorArea()}}},[a("i",{staticClass:"icon calendar"}),e._v(" Definición de horizonte")]),e._v(" "),a("button",{staticClass:"btn btn-primary float-right",on:{click:function(t){e.$parent.goToCategory(14)}}},[a("i",{staticClass:"icon cube"}),e._v("Configurar áreas")])])]),e._v(" "),e._m(0),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("el-select",{attrs:{placeholder:"seleccione"},on:{change:function(t){e.changeArea()}},model:{value:e.selectedArea,callback:function(t){e.selectedArea=t},expression:"selectedArea"}},e._l(e.areas,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)]),e._v(" "),a("div",{staticClass:"row",staticStyle:{"margin-top":"20px"}},[e.demand.length>0?a("div",{staticClass:"col-md-12"},[e.validFactor()?e._e():a("el-alert",{staticStyle:{"margin-bottom":"10px"},attrs:{title:"El factor no es valido por que todos los valores estan en cero.",type:"warning"}}),e._v(" "),a("ReactDataGrid",{key:e.selectedArea,attrs:{enableCellSelect:!0,columns:e.columnsFactor,rowsCount:e.countRowsDemand(),minHeight:500,";":""},on:{rowGetter:e.rowGetterDemand,onGridRowsUpdated:e.handleDemandUpdated}})],1):e._e()])]):e._e(),e._v(" "),e.showMenuAdd||e.showFactorArea?e._e():a("div",[a("div",{staticClass:"row"},[e.horizont.length>0?a("div",{staticClass:"col-md-12"},[a("button",{staticClass:"btn btn-warning float-right",staticStyle:{"margin-top":"10px"},on:{click:function(t){e.toggleFactorArea()}}},[a("i",{staticClass:"icon cube"}),e._v("Configurar la demanda de las areas")]),e._v(" "),a("button",{staticClass:"btn btn-danger float-right",staticStyle:{"margin-top":"10px","margin-right":"10px"},on:{click:function(t){e.deleteHorizont()}}},[a("i",{staticClass:"trash icon"}),e._v("Eliminar horizonte")])]):e._e()]),e._v(" "),a("h3",[e._v("Agregar horizonte de demanda")]),e._v(" "),a("div",{staticClass:"row",staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"col-md-6"},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"month",placeholder:"Seleccione fecha inicial"},model:{value:e.initialDate,callback:function(t){e.initialDate=t},expression:"initialDate"}})],1),e._v(" "),a("div",{staticClass:"col-md-6"},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"month",placeholder:"Seleccione fecha de fín"},model:{value:e.finishDate,callback:function(t){e.finishDate=t},expression:"finishDate"}}),e._v(" "),e.initialDate&&e.finishDate?a("button",{staticClass:"btn btn-outline-primary float-right",staticStyle:{"margin-top":"10px"},on:{click:function(t){e.addRange()}}},[a("i",{staticClass:"icon plus"}),e._v("Agregar horizonte")]):e._e(),e._v(" "),null!==e.selectedRowHorizont?a("button",{staticClass:"btn btn-outline-danger float-right",staticStyle:{"margin-top":"10px","margin-right":"2px"},on:{click:function(t){e.deleteSelectedHorizon()}}},[a("i",{staticClass:"icon plus"}),e._v("Eliminar seleccionado")]):e._e()],1)]),e._v(" "),a("div",{staticClass:"row",staticStyle:{"margin-top":"20px"}},[e.horizont.length>0?a("div",{staticClass:"col-md-12"},[e.validDemand()?e._e():a("el-alert",{staticStyle:{"margin-bottom":"10px"},attrs:{title:"La demanda no es valida por que todos los valores estan en cero.",type:"warning"}}),e._v(" "),a("ReactDataGrid",{key:"Horizont",attrs:{enableCellSelect:!0,enableDragAndDrop:!0,columns:e.columnsHorizont,rowsCount:e.countRowsHorizont(),minHeight:500,";":""},on:{rowGetter:e.rowGetterHorizont,onRowClick:e.clickedRowHorizon,onGridRowsUpdated:e.handleHorizonUpdated}})],1):e._e(),e._v(" "),0===e.horizont.length?a("div",{staticClass:"col-md-12"},[a("center",[a("h2",[e._v("No se ha definido un horizonte")]),e._v(" "),a("div",{staticClass:"ui message warning"},[a("p",[e._v("Debe seleccionar una fecha inicial y una fecha final para poder agregar un horizonte.")])]),e._v(" "),a("img",{attrs:{width:"250",src:"/static/rationing.svg"}})])],1):e._e()])])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("h3",[this._v("Seleccione Área")]),this._v(" "),t("hr")])])}]},N=a("VU/8")(T,z,!1,null,null,null).exports,U={components:{ReactDataGrid:u.a},name:"FuelCost",props:["data"],mounted:function(){var e=this;if(!this.$auth.check(["fuelCosts"]))return this.$message({message:"No tienes permisos",type:"error"}),void this.$parent.goToCategory(1);this.fuels=this.data.fuels,this.fuels.length<1&&this.$alert("No puedes acceder a esta entidad porque no hay combustibles creados. Vas a ser redirigido al modulo de combustibles.","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"error"}).then(function(){e.$parent.goToCategory(17)}),this.data.horizonts.length<1&&this.$alert("No hay horizontes, vas a ser redirigido al modulo de demanda.","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"error"}).then(function(){e.$parent.goToCategory(2)}),this.fuelCost=this.data.horizonts,this.formatHorizontDate(),this.onPropsChanged()},methods:{changeFuel:function(){var e=this,t=[];l.a.each(this.fuelCost,function(e){t.push({id:e.id,horizont_id:e.id,process_id:e.process_id,period:e.period,fecha:e.fecha})});c.a.getFuelCostByFuelId(this.fuelSelected).then(function(a){l.a.each(t,function(t){l.a.each(a.data,function(a){a.horizont_id===t.id&&a.planta_fuel_id===e.fuelSelected&&(t.value=a.value,t.horizont_id=a.horizont_id,t.planta_fuel_id=a.planta_fuel_id,t.fuel_cost_horizonts_id=a.id)})}),e.fuelCost=t})},onPropsChanged:function(e){e&&(this.fuelCost=e.horizonts,this.formatHorizontDate())},formatHorizontDate:function(){var e=this;l.a.each(this.fuelCost,function(t){t.fecha=e.formatMonthDate(t.period)})},formatMonthDate:function(e){var t=new Date(e);e=t.getUTCMonth()+1,t.getUTCDate();return t.getUTCFullYear()+"/"+e},addFuel:function(){},rowGetterFuelCost:function(e){return this.fuelCost[e]},countRowsHorizont:function(){return this.fuelCost.length},clickedRowHorizon:function(e){this.selectedRowFuelCost=this.fuelCost[e]},handleFuelUpdated:function(e){var t=this;return console.log(e.updated.value),e.updated.value<0?(this.$message({message:"El valor debe de ser positivo.",type:"error"}),!1):isNaN(e.updated.value)?(this.$message({message:"El valor debe de ser numérico.",type:"error"}),!1):(e.fromRowData.value=e.updated.value,void(l.a.isNil(e.fromRowData.planta_fuel_id)?(e.fromRowData.planta_fuel_id=this.fuelSelected,c.a.createFuelCostHorizont(e.fromRowData).then(function(a){200===a.status&&(e.fromRowData.demand_id=a.data.id,t.$message({message:"Periodo creado",type:"success"}))})):c.a.updateFuelCostHorizont(e.fromRowData.fuel_cost_horizonts_id,e.fromRowData).then(function(e){console.log(e)})))}},data:function(){return{loading:!1,selectedRowFuelCost:"",fuelSelected:null,fuels:[],fuelCost:[],columnsFuelCost:[{key:"fecha",name:"Horizonte",editable:!1},{key:"value",name:"Valor (USD/MBTU)",editable:!0}]}}},P={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("div",{staticClass:"row"},[e._m(0),e._v(" "),a("div",{staticClass:"col-md-6"},[a("button",{staticClass:"btn btn-warning float-right",staticStyle:{"margin-top":"10px"},on:{click:function(t){e.$parent.goToCategory(17)}}},[a("i",{staticClass:"icon cube"}),e._v("Agregar combustible")])])]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("el-select",{attrs:{placeholder:"Seleccioné"},on:{change:function(t){e.changeFuel()}},model:{value:e.fuelSelected,callback:function(t){e.fuelSelected=t},expression:"fuelSelected"}},e._l(e.fuels,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)]),e._v(" "),e.fuelSelected?e._e():a("div",{staticClass:"row",staticStyle:{"margin-top":"50px"}},[a("div",{staticClass:"col-md-12"},[a("center",[a("h4",[e._v("Debes seleccionar un combustible para comenzar a asignar los valores.")]),e._v(" "),a("img",{attrs:{width:"200",src:"/static/truck.svg"}})])],1)]),e._v(" "),a("div",{staticClass:"row",staticStyle:{"margin-top":"10px"}},[e.fuelSelected?a("div",{staticClass:"col-md-12"},[a("ReactDataGrid",{key:"FuelCost",attrs:{enableCellSelect:!0,enableDragAndDrop:!0,columns:e.columnsFuelCost,rowsCount:e.countRowsHorizont(),minHeight:500,";":""},on:{rowGetter:e.rowGetterFuelCost,onRowClick:e.clickedRowHorizon,onGridRowsUpdated:e.handleFuelUpdated}})],1):e._e()])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"col-md-6"},[t("h3",[this._v("Seleccione combustible")])])}]},M=a("VU/8")(U,P,!1,null,null,null).exports,I={name:"Fuel",mounted:function(){if(!this.$auth.check(["fuels"]))return this.$message({message:"No tienes permisos",type:"error"}),void this.$parent.goToCategory(1)},props:["data"],computed:{rows:function(e){return this.data.fuels}},components:{ReactDataGrid:u.a},methods:{openModal:function(){this.dialogCreateVisible=!0,this.nameFuel="Combustible "+parseInt(this.rows.length+1,10)},successUpload:function(e){this.rows=e,this.rows.splice(0,0),this.showUpload=!1,this.$message({message:"Importación realizada correctamente",type:"success"}),this.$bus.emit("getModulesData",[{reference:"fuels",url:"getCombustiblesByProcessId"}])},addRow:function(){var e=this;this.dialogCreateVisible=!1,this.selectedRow=null,c.a.createFuel({name:this.nameFuel,process_id:this.$route.params.id}).then(function(t){200===t.status?e.$bus.emit("getModulesData",[{reference:"fuels",url:"getCombustiblesByProcessId"}]):e.$message({message:"Error al agregar fila.",type:"error"})}).catch(function(){console.log("error")})},deleteRow:function(e){var t=this;c.a.deleteFuel(e.id).then(function(a){l.a.isNil(a.response)?(t.rows.splice(t.rows.indexOf(e),1),t.selectedRow=null,t.$bus.emit("getModulesData",[{reference:"fuels",url:"getCombustiblesByProcessId"}]),t.$message({message:"Combustible eliminado correctamente",type:"success"})):t.$message({message:"No se ha podido eliminar el registro, esta siendo usado en otra dependencia.",type:"error"})}).catch(function(e){console.log(e)})},clickedRow:function(e){this.selectedRow=this.rows[e]},download:function(){[].unshift(["ID","name"]),c.a.donwloadExcelAreas(this.$route.params.id).then(function(e){var t=document.createElement("a");t.href=e.data.file,t.download=e.data.name,document.body.appendChild(t),t.click(),t.remove()})},rowGetter:function(e){return this.rows[e]},handleGridRowsUpdated:function(e){for(var t=this,a=function(a){var i=t.rows[a],s=l.a.extend(i,e.updated);c.a.updateFuel(s.id,s).then(function(e){200===e.status?(t.rows[a]=s,t.$bus.emit("getModulesData",[{reference:"fuels",url:"getCombustiblesByProcessId"}])):(t.rows[a].name="Inserte nuevo valor",t.$forceUpdate(),t.$message({message:"Error al modificar, el combustible ya existe.",type:"error"}))}).catch(function(e){console.log(e)})},i=e.fromRow;i<=e.toRow;i++)a(i)},countRows:function(){return this.rows.length}},data:function(){return{nameFuel:"",dialogCreateVisible:!1,uploadPath:window.pathBase+":"+window.portBaseLaravel+"/api/v1/fuel/importExcel/"+this.$route.params.id,showUpload:!1,selectedRow:null,columns:[{key:"name",name:"Nombre",editable:!0}]}}},A={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:"Crear combustible",visible:e.dialogCreateVisible,width:"30%"},on:{"update:visible":function(t){e.dialogCreateVisible=t}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("label",{staticClass:"control-label"},[e._v("Nombre del combustible")]),e._v(" "),a("div",{staticClass:"form-group required"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.nameFuel,expression:"nameFuel"}],staticClass:"form-control",attrs:{type:"text",name:"name",placeholder:"Ingrese el nombre del combustible"},domProps:{value:e.nameFuel},on:{input:function(t){t.target.composing||(e.nameFuel=t.target.value)}}})])])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogCreateVisible=!1}}},[e._v("Cancelar")]),e._v(" "),a("el-button",{attrs:{disabled:!e.nameFuel,type:"primary"},on:{click:function(t){e.addRow()}}},[e._v("Continuar")])],1)]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12",staticStyle:{"margin-bottom":"10px"}},[e.showUpload?e._e():a("button",{staticClass:"btn btn-sm btn-warning float-right",staticStyle:{"margin-left":"10px"},on:{click:e.openModal}},[a("i",{staticClass:"icon plus"}),e._v("Agregar")]),e._v(" "),e.selectedRow&&!e.showUpload?a("button",{staticClass:"btn btn-sm btn-danger float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.deleteRow(e.selectedRow)}}},[a("i",{staticClass:"icon trash"}),e._v("Eliminar seleccionado (id:"+e._s(e.selectedRow.id)+")")]):e._e()])]),e._v(" "),!e.showUpload&&this.rows.length>0?a("div",[a("ReactDataGrid",{key:"Areas",attrs:{enableCellSelect:!0,enableDragAndDrop:!0,columns:e.columns,rowsCount:e.countRows(),minHeight:500,";":""},on:{rowGetter:e.rowGetter,onRowClick:e.clickedRow,onGridRowsUpdated:e.handleGridRowsUpdated}})],1):e._e(),e._v(" "),this.rows.length<1?a("div",[a("center",[a("h2",[e._v("No existen combustibles")]),e._v(" "),a("img",{staticStyle:{"margin-bottom":"10px"},attrs:{width:"100",src:"/static/truck.svg"}}),e._v(" "),a("hr"),e._v(" "),a("button",{staticClass:"btn btn-lg btn-primary",on:{click:function(t){e.openModal()}}},[a("i",{staticClass:"icon add"}),e._v("Agregar nuevo")])])],1):e._e(),e._v(" "),e.showUpload?a("div",{staticStyle:{"margin-top":"100px"}},[a("center",[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"","on-success":e.successUpload,action:e.uploadPath,multiple:""}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("Suelta tu archivo aquí o "),a("em",[e._v("haz clic para cargar")])]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("Solo archivos excel")])]),e._v(" "),a("hr"),e._v(" "),a("button",{staticClass:"btn btn-outline-danger btn-lg",on:{click:function(t){e.showUpload=!1}}},[e._v("\n        Cancelar subida")])],1)],1):e._e()],1)},staticRenderFns:[]},F=a("VU/8")(I,A,!1,null,null,null).exports,L={components:{ReactDataGrid:u.a},name:"RationingCost",props:["data"],mounted:function(){var e=this;if(!this.$auth.check(["rationingCost"]))return this.$message({message:"No tienes permisos",type:"error"}),void this.$parent.goToCategory(1);this.segments=this.data.segments,this.data.segments.length<1&&this.$alert("Debe de existir por lo menos un segmento, vas a ser redirigido al modulo de segmentos.","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"error"}).then(function(){e.$parent.goToCategory(18)}),this.data.horizonts.length<1&&this.$alert("No hay horizontes, vas a ser redirigido al modulo de demanda.","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"error"}).then(function(){e.$parent.goToCategory(2)}),this.rationingCost=this.data.horizonts,this.formatHorizontDate(),this.onPropsChanged()},methods:{changeSegment:function(){var e=this,t=[];l.a.each(this.rationingCost,function(e){t.push({id:e.id,horizont_id:e.id,process_id:e.process_id,period:e.period,fecha:e.fecha})});c.a.getRationingCostBySegmentId(this.segmentSelected).then(function(a){l.a.each(t,function(t){l.a.each(a.data,function(a){a.horizont_id===t.id&&a.segment_id===e.segmentSelected&&(t.value=a.value,t.horizont_id=a.horizont_id,t.rationing_costs_id=a.rationing_costs_id,t.segment_id=a.segment_id)})}),e.rationingCost=t})},onPropsChanged:function(e){e&&(this.rationingCost=e.horizonts,this.formatHorizontDate())},formatHorizontDate:function(){var e=this;l.a.each(this.rationingCost,function(t){t.fecha=e.formatMonthDate(t.period)})},validFactor:function(){var e=!0,t=0;return this.rationingCost.forEach(function(e){t+=e.value}),0==t&&(e=!1),e},formatMonthDate:function(e){var t=new Date(e);e=t.getUTCMonth()+1,t.getUTCDate();return t.getUTCFullYear()+"/"+e},addFuel:function(){},rowGetterRationingCost:function(e){return this.rationingCost[e]},countRowsHorizont:function(){return this.rationingCost.length},clickedRowHorizon:function(e){this.selectedRowRationingCost=this.rationingCost[e]},handleFuelUpdated:function(e){var t=this;isNaN(e.updated.value)?this.$message({message:"El valor no es numérico",type:"error"}):e.updated.value<0?this.$message({message:"El valor no debe ser negativo o nulo.",type:"error"}):(e.fromRowData.value=e.updated.value,l.a.isNil(e.fromRowData.rationing_costs_id)?(e.fromRowData.segment_id=this.segmentSelected,c.a.createRationingCost(e.fromRowData).then(function(a){200===a.status&&(e.fromRowData.rationing_costs_id=a.data.id,t.$message({message:"Costo de racionamiento creado.",type:"success"}))})):c.a.updateRationingCost(e.fromRowData.rationing_costs_id,e.fromRowData).then(function(e){t.$message({message:"Costo de racionamiento modificado.",type:"success"})}))}},data:function(){return{loading:!1,selectedRowRationingCost:"",segmentSelected:null,segments:[],rationingCost:[],columnsRationingCost:[{key:"fecha",name:"Horizonte",editable:!1},{key:"value",name:"Valor (USD/MWh)",editable:!0}]}}},B={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("h3",[e._v("Seleccione segmento")]),e._v(" "),a("el-select",{attrs:{placeholder:"Seleccione"},on:{change:function(t){e.changeSegment()}},model:{value:e.segmentSelected,callback:function(t){e.segmentSelected=t},expression:"segmentSelected"}},e._l(e.segments,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"col-md-8"},[a("button",{staticClass:"btn btn-warning float-right",staticStyle:{"margin-top":"10px"},on:{click:function(t){e.$parent.goToCategory(18)}}},[a("i",{staticClass:"icon cube"}),e._v("Agregar segmento")])])]),e._v(" "),a("div",{staticClass:"row",staticStyle:{"margin-top":"10px"}},[e.segmentSelected?a("div",{staticClass:"col-md-12"},[e.validFactor()?e._e():a("el-alert",{staticStyle:{"margin-bottom":"10px"},attrs:{title:"El factor no es valido por que todos los valores estan en cero.",type:"warning"}}),e._v(" "),a("ReactDataGrid",{key:"RationingCost",attrs:{enableCellSelect:!0,enableDragAndDrop:!0,columns:e.columnsRationingCost,rowsCount:e.countRowsHorizont(),minHeight:500,";":""},on:{rowGetter:e.rowGetterRationingCost,onRowClick:e.clickedRowHorizon,onGridRowsUpdated:e.handleFuelUpdated}})],1):e._e()]),e._v(" "),e.segmentSelected?e._e():a("div",{staticClass:"row",staticStyle:{"margin-top":"50px"}},[a("div",{staticClass:"col-md-12"},[a("center",[a("h4",[e._v("Debes seleccionar un segmento para comenzar a asignar los valores.")]),e._v(" "),a("img",{attrs:{width:"180",src:"/static/rationing1.svg"}})])],1)])])},staticRenderFns:[]},q=a("VU/8")(L,B,!1,null,null,null).exports,O={mounted:function(){if(!this.$auth.check(["segments"]))return this.$message({message:"No tienes permisos",type:"error"}),void this.$parent.goToCategory(1);l.a.isNil(this.configData.segment_id)||l.a.isNaN(this.configData.segment_id)||(this.selectedSegment=this.configData.segment_id)},name:"Segment",props:["data","configData"],computed:{rows:function(e){return this.data.segments}},components:{ReactDataGrid:u.a},methods:{changeDefaultSegment:function(){var e=this;c.a.changeSelectedSegment({id:this.$route.params.id,segment_id:this.selectedSegment}).then(function(t){e.configData.segment_id=e.selectedSegment,e.$message({message:"Notificación: El segmento por defecto se a guardado correctamente",type:"success"})})},openModal:function(){this.dialogCreateVisible=!0,this.nameSegment="Segmento "+parseInt(this.rows.length+1,10)},successUpload:function(e){this.rows=e,this.rows.splice(0,0),this.showUpload=!1,this.$message({message:"Importación realizada correctamente",type:"success"}),this.$bus.emit("getModulesData",[{reference:"segments",url:"getSegments"}])},addRow:function(){var e=this;this.dialogCreateVisible=!1,this.selectedRow=null,c.a.createSegment({name:this.nameSegment,process_id:this.$route.params.id}).then(function(t){200===t.status?e.$bus.emit("getModulesData",[{reference:"segments",url:"getSegments"}]):e.$message({message:"Error al agregar fila.",type:"error"})}).catch(function(){console.log("error")})},deleteRow:function(e){var t=this;c.a.deleteSegment(e.id).then(function(a){l.a.isNil(a.response)?(t.rows.splice(t.rows.indexOf(e),1),t.selectedRow=null,t.$bus.emit("getModulesData",[{reference:"segments",url:"getSegments"}]),t.$message({message:"Segmento eliminado correctamente",type:"success"})):t.$message({message:"No se ha podido eliminar el registro, esta siendo usado en otra dependencia.",type:"error"})}).catch(function(e){console.log(e)})},clickedRow:function(e){this.selectedRow=this.rows[e]},download:function(){[].unshift(["ID","name"]),c.a.donwloadExcelSegments(this.$route.params.id).then(function(e){var t=document.createElement("a");t.href=e.data.file,t.download=e.data.name,document.body.appendChild(t),t.click(),t.remove()})},rowGetter:function(e){return this.rows[e]},handleGridRowsUpdated:function(e){for(var t=this,a=function(a){var i=t.rows[a],s=l.a.extend(i,e.updated);c.a.updateSegment(s.id,s).then(function(e){200===e.status?(t.rows[a]=s,t.$bus.emit("getModulesData",[{reference:"segments",url:"getSegments"}])):(t.rows[a].name="Inserte nuevo valor",t.$forceUpdate(),t.$message({message:"Error al modificar, el segmento ya existe.",type:"error"}))}).catch(function(e){console.log(e)})},i=e.fromRow;i<=e.toRow;i++)a(i)},countRows:function(){return this.rows.length}},data:function(){return{selectedSegment:"",dialogCreateVisible:!1,nameSegment:"",uploadPath:window.pathBase+":"+window.portBaseLaravel+"/api/v1/areas/importSegment/"+this.$route.params.id,showUpload:!1,selectedRow:null,columns:[{key:"name",name:"Nombre",editable:!0}]}}},G={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:"Nuevo",visible:e.dialogCreateVisible,width:"30%"},on:{"update:visible":function(t){e.dialogCreateVisible=t}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("label",{staticClass:"control-label"},[e._v("Nombre del segmento")]),e._v(" "),a("div",{staticClass:"form-group required"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.nameSegment,expression:"nameSegment"}],staticClass:"form-control",attrs:{type:"text",name:"name",placeholder:"Ingrese el nombre del segmento"},domProps:{value:e.nameSegment},on:{input:function(t){t.target.composing||(e.nameSegment=t.target.value)}}})])])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogCreateVisible=!1}}},[e._v("Cancelar")]),e._v(" "),a("el-button",{attrs:{disabled:!e.nameSegment,type:"primary"},on:{click:function(t){e.addRow()}}},[e._v("Continuar")])],1)]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12",staticStyle:{"margin-bottom":"10px"}},[e.showUpload?e._e():a("button",{staticClass:"btn btn-sm btn-warning float-right",staticStyle:{"margin-left":"10px"},on:{click:e.openModal}},[a("i",{staticClass:"icon plus"}),e._v("Agregar")]),e._v(" "),e.selectedRow&&!e.showUpload?a("button",{staticClass:"btn btn-sm btn-danger float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.deleteRow(e.selectedRow)}}},[a("i",{staticClass:"icon trash"}),e._v("Eliminar seleccionado (id:"+e._s(e.selectedRow.id)+")")]):e._e()])]),e._v(" "),!e.showUpload&&this.rows.length>0?a("div",[a("el-alert",{staticStyle:{"margin-bottom":"20px","margin-top":"20px"},attrs:{title:"Actualmente el sistema solo trabaja con un segmento, por lo que solo se tendra en cuenta el segmento seleccionado por defecto.",type:"warning","show-icon":""}}),e._v(" "),e.data.segments.length>1?a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h4",[e._v("Seleccione segmento por defecto")]),e._v(" "),a("el-select",{attrs:{placeholder:"Seleccione segmento"},on:{change:function(t){e.changeDefaultSegment()}},model:{value:e.selectedSegment,callback:function(t){e.selectedSegment=t},expression:"selectedSegment"}},e._l(e.rows,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)]):e._e(),e._v(" "),a("div",{staticClass:"row",staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"col-md-12"},[a("ReactDataGrid",{key:"Areas",attrs:{enableCellSelect:!0,enableDragAndDrop:!0,columns:e.columns,rowsCount:e.countRows(),minHeight:500,";":""},on:{rowGetter:e.rowGetter,onRowClick:e.clickedRow,onGridRowsUpdated:e.handleGridRowsUpdated}})],1)])],1):e._e(),e._v(" "),this.rows.length<1?a("div",[a("center",[a("h2",[e._v("No existen segmentos")]),e._v(" "),a("img",{staticStyle:{"margin-bottom":"10px"},attrs:{width:"100",src:"/static/segment.svg"}}),e._v(" "),a("hr"),e._v(" "),a("button",{staticClass:"btn btn-lg btn-primary",on:{click:function(t){e.openModal()}}},[a("i",{staticClass:"icon add"}),e._v("Agregar nuevo")])])],1):e._e(),e._v(" "),e.showUpload?a("div",{staticStyle:{"margin-top":"100px"}},[a("center",[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"","on-success":e.successUpload,action:e.uploadPath,multiple:""}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("Suelta tu archivo aquí o "),a("em",[e._v("haz clic para cargar")])]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("Solo archivos excel")])]),e._v(" "),a("hr"),e._v(" "),a("button",{staticClass:"btn btn-outline-danger btn-lg",on:{click:function(t){e.showUpload=!1}}},[e._v("\n        Cancelar subida")])],1)],1):e._e()],1)},staticRenderFns:[]},V=a("VU/8")(O,G,!1,null,null,null).exports,H={name:"ThermalExpansion",mounted:function(){var e=this;if(!this.$auth.check(["thermalExpansions"]))return this.$message({message:"No tienes permisos",type:"error"}),void this.$parent.goToCategory(1);this.data.thermalConfig.length<1&&this.$alert("No puedes acceder a esta entidad porque no hay plantas termicas creadas. Vas a ser redirigido al modulo de plantas termicas.","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"error"}).then(function(){e.$parent.goToCategory(4)}),this.data.horizonts.length<1&&this.$alert("No puedes acceder a esta entidad porque no hay horizontes creados. Vas a ser redirigido al modulo de demanda.","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"error"}).then(function(){e.$parent.goToCategory(2)}),this.columns=this.filterHiddenColumns(),this.onPropsChanged()},watch:{data:{handler:function(e,t){this.onPropsChanged(e)},deep:!0,immediate:!0}},props:["data"],components:{ReactDataGrid:u.a},methods:{getSelectValues:function(e){var t=this;if("horizonts"===e){var a=[];return l.a.each(this.data.horizonts,function(e){a.push({id:e.id,name:t.formatMonthDate(e.period),period:t.formatMonthDate(e.period)})}),a}return this.data[e]},showModal:function(){this.dialogCreateVisible=!0},formatMonthDate:function(e){var t=new Date(e);e=t.getUTCMonth()+1,t.getUTCDate();return t.getUTCFullYear()+"/"+e},filterHiddenColumns:function(){return l.a.filter(this.allColumns,{display:!0})},onPropsChanged:function(e){var t=this;this.rows=l.a.clone(this.data.thermalConfigExpansion,!0),e&&(this.rows=e.thermalConfigExpansion),this.rows.length<1&&(this.loading=!1),l.a.each(this.rows,function(e,a){e.thermalName=e.thermal_config.name,e.modifcationFormatted=t.formatMonthDate(e.horizont.period),a===t.rows.length-1&&setTimeout(function(){t.loading=!1},2e3)})},getCounter:function(){return this.rows.length},update:function(){var e=this;c.a.updateThermalConfigExpansion(this.selectedRow.id,this.selectedRow).then(function(){e.$message({message:"Notificación: Acción realizada correctamente",type:"success"}),e.$bus.emit("getModulesData",[{url:"getThermalConfigExpansion",reference:"thermalConfigExpansion"}]),e.visibleTable=!0})},isDisabledField:function(e){return"id"===e},successUpload:function(e){this.rows=e,this.rows.splice(0,0),this.showUpload=!1,this.$message({message:"Notificación: Importación realizada correctamente",type:"success"})},addRow:function(){var e=this;this.dialogCreateVisible=!1,this.selectedRow=null,c.a.createThermalConfigExpansion({thermal_config_id:this.selectedThermalConfig,horizont_id:this.selectedHorizont,max:0,gen_min:0,gen_max:0,forced_unavailability:0,historic_unavailability:0,process_id:this.$route.params.id}).then(function(t){t.data.area=e.data.areas[0].name,e.$bus.emit("getModulesData",[{url:"getThermalConfigExpansion",reference:"thermalConfigExpansion"}])})},deleteRow:function(e){var t=this;c.a.deleteThermalConfigExpansion(e.id).then(function(){t.rows.splice(t.rows.indexOf(e),1),t.selectedRow=null,t.visibleTable=!0,t.$bus.emit("getModulesData",[{url:"getThermalConfigExpansion",reference:"thermalConfigExpansion"}]),t.$message({message:"El registro se ha eliminado",type:"success"})})},clickedRow:function(e){var t=this;this.$confirm("¿Quieres entrar al detalle de la configuración?","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"warning"}).then(function(){t.visibleTable=!1,t.selectedRow=t.rows[e]})},download:function(){[].unshift(["ID","name"]),c.a.donwloadExcelThermalConfig(this.$route.params.id).then(function(e){var t=document.createElement("a");t.href=e.data.file,t.download=e.data.name,document.body.appendChild(t),t.click(),t.remove()})},rowGetter:function(e){return this.rows[e]},handleGridRowsUpdated:function(e){for(var t=this,a=e.fromRow;a<=e.toRow;a++){var i=this.rows[a],s=l.a.extend(i,e.updated);c.a.updateArea(s.id,s).then(function(){t.$bus.emit("getModulesData",[{url:"getThermalConfigExpansion",reference:"thermalConfigExpansion"}])}).catch(function(e){console.log(e)})}}},data:function(){return{selectedHorizont:null,dialogCreateVisible:!1,selectedThermalConfigMonth:null,selectedThermalConfig:null,loading:!0,visibleTable:!0,uploadPath:window.pathBase+":"+window.portBaseLaravel+"/api/v1/thermalConfig/importExcel/"+this.$route.params.id,showUpload:!1,selectedRow:null,rows:[],columns:[],allColumns:[{key:"thermalName",originalForeign:"thermal_config_id",name:"Nombre",type:"select",entity:"thermalConfig",resizable:!0,display:!0,displayInForm:!1},{key:"horizont_id",originalForeign:"horizont_id",name:"Modificación",type:"select",keySelect:"period",entity:"horizonts",resizable:!0,display:!1,displayInForm:!0},{key:"modifcationFormatted",name:"Modificación",resizable:!0,type:"month",display:!0,displayInForm:!1},{key:"max",name:"Capacidad máxima",resizable:!0,type:"numeric",unit:"MW",precision:5,decimalSeparator:".",thousandSeparator:",",display:!1,displayInForm:!0},{key:"gen_min",name:"Generación mínima",resizable:!0,type:"numeric",unit:"MW",precision:5,decimalSeparator:".",thousandSeparator:",",display:!1,displayInForm:!0},{key:"gen_max",name:"Generación máxima",resizable:!0,type:"numeric",unit:"MW",precision:5,decimalSeparator:".",thousandSeparator:",",display:!1,displayInForm:!0},{key:"forced_unavailability",name:"Indisponibilidad forzada",resizable:!0,unit:"%",type:"numeric",precision:6,decimalSeparator:".",thousandSeparator:",",display:!1,displayInForm:!0},{key:"historic_unavailability",name:"Indisponibilidad historica",resizable:!0,precision:6,unit:"%",decimalSeparator:".",thousandSeparator:",",type:"numeric",display:!1,displayInForm:!0}]}}},W={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"Tienes que esperar un poco..."}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12",staticStyle:{"margin-bottom":"10px"}},[!e.showUpload&&e.visibleTable?a("button",{staticClass:"btn btn-sm btn-warning float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.showModal()}}},[a("i",{staticClass:"icon plus"}),e._v("Agregar")]):e._e(),e._v(" "),e.selectedRow&&!e.showUpload?a("button",{staticClass:"btn btn-sm btn-danger float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.deleteRow(e.selectedRow)}}},[a("i",{staticClass:"icon trash"}),e._v("Eliminar seleccionado (id:"+e._s(e.selectedRow.id)+")")]):e._e()])]),e._v(" "),e.showUpload||!e.visibleTable||e.loading?e._e():a("div",[e.rows.length>0?a("el-alert",{staticStyle:{"margin-bottom":"20px"},attrs:{title:"Para editar las propiedades de la planta selecciona un registro.",type:"warning","show-icon":""}}):e._e(),e._v(" "),e.rows.length>0?a("div",[a("ReactDataGrid",{key:"thermalConfig",attrs:{enableCellSelect:!0,columns:e.columns,rowsCount:e.getCounter(),minHeight:500,";":""},on:{rowGetter:e.rowGetter,onRowClick:e.clickedRow,onGridRowsUpdated:e.handleGridRowsUpdated}})],1):a("div",[a("center",[a("h2",[e._v("No existen expansiones")]),e._v(" "),a("img",{attrs:{width:"200",src:"/static/expansion.svg"}}),e._v(" "),a("hr"),e._v(" "),a("button",{staticClass:"btn btn-lg btn-primary",on:{click:function(t){e.showModal()}}},[a("i",{staticClass:"icon add"}),e._v("Agregar nueva")])])],1)],1),e._v(" "),a("div",{staticClass:"row"},[e.selectedRow?a("div",{staticClass:"col-md-12"},[e.selectedRow.gen_min>e.selectedRow.gen_max?a("el-alert",{staticStyle:{"margin-bottom":"10px"},attrs:{title:"La generación mínima de la planta térmica no puede ser mayor a la generación máxima.",type:"warning"}}):e._e(),e._v(" "),e.selectedRow.gen_max>e.selectedRow.max?a("el-alert",{staticStyle:{"margin-bottom":"10px"},attrs:{title:"La generación máxima de no puede ser superior a la capacidad.",type:"warning"}}):e._e()],1):e._e()]),e._v(" "),e.showUpload||e.visibleTable?e._e():a("div",{staticClass:"row"},[e._l(e.allColumns,function(t){return t.displayInForm?a("div",{staticClass:"col-md-6"},["text"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name))]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedRow[t.key],expression:"selectedRow[column.key]"}],staticClass:"form-control",attrs:{disabled:e.isDisabledField(t.key),type:"text",name:"name",placeholder:t.key},domProps:{value:e.selectedRow[t.key]},on:{input:function(a){a.target.composing||e.$set(e.selectedRow,t.key,a.target.value)}}})]):e._e(),e._v(" "),"month"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name))]),e._v(" "),a("el-date-picker",{attrs:{type:"month",placeholder:"Seleccione"},model:{value:e.selectedRow[t.key],callback:function(a){e.$set(e.selectedRow,t.key,a)},expression:"selectedRow[column.key]"}})],1):e._e(),e._v(" "),"select"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name))]),e._v(" "),a("el-select",{staticStyle:{width:"100%"},model:{value:e.selectedRow[t.originalForeign],callback:function(a){e.$set(e.selectedRow,t.originalForeign,a)},expression:"selectedRow[column.originalForeign]"}},e._l(e.getSelectValues(t.entity),function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1):e._e(),e._v(" "),"numeric"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name)+"\n          "),t.unit?a("el-tag",{attrs:{type:"primary",size:"small"}},[e._v(e._s(t.unit))]):e._e()],1),e._v(" "),a("vue-numeric",{staticClass:"form-control",attrs:{precision:t.precision,"decimal-separator":t.decimalSeparator,"thousand-separator":t.thousandSeparator},model:{value:e.selectedRow[t.key],callback:function(a){e.$set(e.selectedRow,t.key,a)},expression:"selectedRow[column.key]"}})],1):e._e()]):e._e()}),e._v(" "),a("div",{staticClass:"col-md-12"},[a("button",{staticClass:"btn btn-dark float-right",on:{click:function(t){e.visibleTable=!0}}},[a("i",{staticClass:"icon cancel"}),e._v("Cancelar ")]),e._v(" "),a("button",{staticClass:"btn btn-primary float-right",staticStyle:{"margin-right":"10px"},on:{click:e.update}},[a("i",{staticClass:"icon save"}),e._v("Actualizar\n      ")])])],2),e._v(" "),e.showUpload?a("div",{staticStyle:{"margin-top":"100px"}},[a("center",[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"","on-success":e.successUpload,action:e.uploadPath,multiple:""}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("Suelta tu archivo aquí o "),a("em",[e._v("haz clic para cargar")])]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("Solo archivos excel")])]),e._v(" "),a("hr"),e._v(" "),a("button",{staticClass:"btn btn-outline-danger btn-lg",on:{click:function(t){e.showUpload=!1}}},[e._v("\n        Cancelar subida")])],1)],1):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"Nueva expansión",visible:e.dialogCreateVisible,width:"30%"},on:{"update:visible":function(t){e.dialogCreateVisible=t}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Seleccione configuración a expandir")]),e._v(" "),a("el-select",{staticStyle:{width:"100%"},model:{value:e.selectedThermalConfig,callback:function(t){e.selectedThermalConfig=t},expression:"selectedThermalConfig"}},e._l(e.data.thermalConfig,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)])]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("label",{staticClass:"control-label"},[e._v("Fecha Modificación")]),e._v(" "),a("div",{staticClass:"form-group required"},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.selectedHorizont,callback:function(t){e.selectedHorizont=t},expression:"selectedHorizont"}},e._l(e.getSelectValues("horizonts"),function(e){return a("el-option",{key:e.id,attrs:{label:e.period,value:e.id}})}))],1)])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogCreateVisible=!1}}},[e._v("Cancelar")]),e._v(" "),a("el-button",{attrs:{disabled:!e.selectedThermalConfig&&e.selectedThermalConfigMonth,type:"primary"},on:{click:function(t){e.addRow()}}},[e._v("Continuar")])],1)])],1)},staticRenderFns:[]},Q=a("VU/8")(H,W,!1,null,null,null).exports,K={name:"smallConfig",mounted:function(){var e=this;if(!this.$auth.check(["smallConfigs"]))return this.$message({message:"No tienes permisos",type:"error"}),void this.$parent.goToCategory(1);this.data.areas.length<1&&this.$alert("No existen áreas, vas a ser redirigido al modulo de áreas.","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"error"}).then(function(){e.$parent.goToCategory(14)}),this.columns=this.filterHiddenColumns(),this.onPropsChanged()},watch:{data:{handler:function(e,t){this.onPropsChanged()},deep:!0,immediate:!0}},props:["data"],components:{ReactDataGrid:u.a},methods:{getDataSelect:function(e){return"typeName"===e.key?this.data[e.entity].filter(function(e){return"Hydro"===e.name||"Cogeneration"===e.name||"Small"===e.name||"Geothermal"===e.name||"Wind"===e.name||"Solar"===e.name||"Storage"===e.name}):this.data[e.entity]},formatMonthDate:function(e){var t=new Date(e);e=t.getUTCMonth()+1,t.getUTCDate();return t.getUTCFullYear()+"/"+e},getLabelSelect:function(e,t){return"entrance_stage"===e.key?t.description:t.name},filterHiddenColumns:function(){return l.a.filter(this.allColumns,{display:!0})},onPropsChanged:function(e){var t=this;this.rows=l.a.clone(this.data.smallConfig,!0),e&&(this.rows=e.smallConfig),this.rows.length<1&&(this.loading=!1),l.a.each(this.rows,function(e,a){e.area=e.areas.name,e.entrance_stage=e.entrance_stages.name,e.typeName=e.type.name,a===t.rows.length-1&&setTimeout(function(){t.loading=!1},2e3)})},getCounter:function(){return this.rows.length},update:function(){var e=this;c.a.updateSmallConfig(this.selectedRow.id,this.selectedRow).then(function(){e.$message({message:"Notificación: Acción realizada correctamente",type:"success"}),e.$bus.emit("getModulesData",[{url:"getSmallConfig",reference:"smallConfig"},{url:"getSmallConfigExpansion",reference:"smallConfigExpansion"}]),e.visibleTable=!0})},isDisabledField:function(e){return"id"===e},successUpload:function(e){this.rows=e,this.rows.splice(0,0),this.showUpload=!1,this.$message({message:"Notificación: Importación realizada correctamente",type:"success"})},addRow:function(){var e=this;this.dialogCreateVisible=!1,this.selectedRow=null,c.a.createSmallConfig(f()({planta_menor:this.smallConfigName,entrance_stage_id:this.data.entranceStages[0].id,process_id:this.$route.params.id,type_id:this.data.types[0].id,area_id:this.data.areas[0].id,gen_min:0,gen_max:0,min:0,max:0,forced_unavailability:0,historic_unavailability:0},"process_id",this.$route.params.id)).then(function(t){var a=t.data;a.area=e.data.areas[0].name,e.rows.push(a),e.$bus.emit("getModulesData",[{url:"getSmallConfig",reference:"smallConfig"},{url:"getSmallConfigExpansion",reference:"smallConfigExpansion"}])})},deleteRow:function(e){var t=this;c.a.deleteSmallConfig(e.id).then(function(){t.rows.splice(t.rows.indexOf(e),1),t.selectedRow=null,t.visibleTable=!0,t.$bus.emit("getModulesData",[{url:"getSmallConfig",reference:"smallConfig"},{url:"getSmallConfigExpansion",reference:"smallConfigExpansion"}]),t.$message({message:"El registro se ha eliminado",type:"success"})})},clickedRow:function(e){var t=this;this.$confirm("¿Quieres entrar al detalle de la configuración?","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"warning"}).then(function(){t.visibleTable=!1,t.selectedRow=t.rows[e]})},download:function(){[].unshift(["ID","name"]),c.a.donwloadExcelThermalConfig(this.$route.params.id).then(function(e){var t=document.createElement("a");t.href=e.data.file,t.download=e.data.name,document.body.appendChild(t),t.click(),t.remove()})},rowGetter:function(e){return this.rows[e]},handleGridRowsUpdated:function(e){for(var t=this,a=function(a){var i=t.rows[a],s=l.a.extend(i,e.updated);c.a.updateArea(s.id,s).then(function(){t.rows[a]=s,t.$bus.emit("getModulesData",[{url:"getSmallConfig",reference:"smallConfig"},{url:"getSmallConfigExpansion",reference:"smallConfigExpansion"}])}).catch(function(e){console.log(e)})},i=e.fromRow;i<=e.toRow;i++)a(i)}},data:function(){return{smallConfigName:"",dialogCreateVisible:!1,loading:!0,visibleTable:!0,uploadPath:window.pathBase+":"+window.portBaseLaravel+"/api/v1/smallConfig/importExcel/"+this.$route.params.id,showUpload:!1,selectedRow:null,rows:[],columns:[],allColumns:[{key:"planta_menor",name:"Planta menor",width:200,type:"text",resizable:!0,display:!0},{key:"area",originalForeign:"area_id",name:"Área",type:"select",entity:"areas",resizable:!0,display:!0},{key:"typeName",originalForeign:"type_id",name:"Tipo",entity:"types",type:"select",resizable:!0,display:!1},{key:"max",name:"Capacidad",width:80,unit:"MW",precision:5,decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"gen_min",name:"Generación mínima",width:80,unit:"MW",precision:5,decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"gen_max",name:"Generación máxima",width:80,unit:"MW",precision:5,decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"forced_unavailability",name:"Indisponibilidad forzada",precision:6,unit:"%",decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"historic_unavailability",name:"Indisponibilidad historica",precision:6,unit:"%",decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"entrance_stage",type:"select",originalForeign:"entrance_stage_id",entity:"entranceStages",name:"Etapa de entrada",resizable:!0,display:!1}]}}},j={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"Tienes que esperar un poco..."}},[a("el-dialog",{attrs:{title:"Nuevo",visible:e.dialogCreateVisible,width:"30%"},on:{"update:visible":function(t){e.dialogCreateVisible=t}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("label",{staticClass:"control-label"},[e._v("Nombre de la planta")]),e._v(" "),a("div",{staticClass:"form-group required"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.smallConfigName,expression:"smallConfigName"}],staticClass:"form-control",attrs:{type:"text",name:"name",placeholder:"Ingrese el nombre de la planta"},domProps:{value:e.smallConfigName},on:{input:function(t){t.target.composing||(e.smallConfigName=t.target.value)}}})])])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogCreateVisible=!1}}},[e._v("Cancelar")]),e._v(" "),a("el-button",{attrs:{disabled:!e.smallConfigName,type:"primary"},on:{click:function(t){e.addRow()}}},[e._v("Continuar")])],1)]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12",staticStyle:{"margin-bottom":"10px"}},[!e.showUpload&&e.visibleTable?a("button",{staticClass:"btn btn-sm btn-warning float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.dialogCreateVisible=!0}}},[a("i",{staticClass:"icon plus"}),e._v("Agregar")]):e._e(),e._v(" "),e.selectedRow&&!e.showUpload?a("button",{staticClass:"btn btn-sm btn-danger float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.deleteRow(e.selectedRow)}}},[a("i",{staticClass:"icon trash"}),e._v("Eliminar seleccionado (id:"+e._s(e.selectedRow.id)+")")]):e._e()])]),e._v(" "),e.showUpload||!e.visibleTable||e.loading?e._e():a("div",[e.rows.length>0?a("el-alert",{staticStyle:{"margin-bottom":"20px"},attrs:{title:"Para editar las propiedades de la planta selecciona un registro.",type:"warning","show-icon":""}}):e._e(),e._v(" "),a("ReactDataGrid",{key:"smallConfig",attrs:{enableCellSelect:!0,columns:e.columns,rowsCount:e.getCounter(),minHeight:500,";":""},on:{rowGetter:e.rowGetter,onRowClick:e.clickedRow,onGridRowsUpdated:e.handleGridRowsUpdated}})],1),e._v(" "),a("div",{staticClass:"row"},[e.selectedRow&&!e.visibleTable?a("div",{staticClass:"col-md-12"},[e.selectedRow.gen_min>e.selectedRow.gen_max?a("el-alert",{staticStyle:{"margin-bottom":"10px"},attrs:{title:"La generación mínima de la planta menor no puede ser mayor a la generación máxima.",type:"warning"}}):e._e(),e._v(" "),e.selectedRow.gen_max>e.selectedRow.max?a("el-alert",{staticStyle:{"margin-bottom":"10px"},attrs:{title:"La generación máxima de no puede ser superior a la capacidad.",type:"warning"}}):e._e()],1):e._e()]),e._v(" "),e.showUpload||e.visibleTable?e._e():a("div",{staticClass:"row"},[e._l(e.allColumns,function(t){return a("div",{staticClass:"col-md-6"},["text"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name))]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedRow[t.key],expression:"selectedRow[column.key]"}],staticClass:"form-control",attrs:{disabled:e.isDisabledField(t.key),type:"text",name:"name",placeholder:t.key},domProps:{value:e.selectedRow[t.key]},on:{input:function(a){a.target.composing||e.$set(e.selectedRow,t.key,a.target.value)}}})]):e._e(),e._v(" "),"numeric"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name)+"\n          "),t.unit?a("el-tag",{attrs:{size:"small",type:"primary"}},[e._v(e._s(t.unit))]):e._e()],1),e._v(" "),a("vue-numeric",{staticClass:"form-control",attrs:{precision:t.precision,"decimal-separator":t.decimalSeparator,"thousand-separator":t.thousandSeparator},model:{value:e.selectedRow[t.key],callback:function(a){e.$set(e.selectedRow,t.key,a)},expression:"selectedRow[column.key]"}})],1):e._e(),e._v(" "),"select"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name))]),e._v(" "),a("el-select",{staticStyle:{width:"100%"},model:{value:e.selectedRow[t.originalForeign],callback:function(a){e.$set(e.selectedRow,t.originalForeign,a)},expression:"selectedRow[column.originalForeign]"}},e._l(e.getDataSelect(t),function(i){return a("el-option",{key:i.id,attrs:{label:e.getLabelSelect(t,i),value:i.id}})}))],1):e._e(),e._v(" "),3===e.selectedRow.entrance_stage_id&&"entrance_stage"===t.key?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Ingrese fecha de entrada")]),e._v(" "),a("el-select",{staticStyle:{width:"100%"},model:{value:e.selectedRow.entrance_stage_date,callback:function(t){e.$set(e.selectedRow,"entrance_stage_date",t)},expression:"selectedRow['entrance_stage_date']"}},e._l(e.data.horizonts,function(t){return a("el-option",{key:t.id,attrs:{label:e.formatMonthDate(t.period),value:t.id}})}))],1):e._e()])}),e._v(" "),a("div",{staticClass:"col-md-12"},[a("button",{staticClass:"btn btn-dark float-right",on:{click:function(t){e.visibleTable=!0}}},[a("i",{staticClass:"icon cancel"}),e._v("Cancelar ")]),e._v(" "),a("button",{staticClass:"btn btn-primary float-right",staticStyle:{"margin-right":"10px"},on:{click:e.update}},[a("i",{staticClass:"icon save"}),e._v("Actualizar\n      ")])])],2),e._v(" "),e.showUpload?a("div",{staticStyle:{"margin-top":"100px"}},[a("center",[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"","on-success":e.successUpload,action:e.uploadPath,multiple:""}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("Suelta tu archivo aquí o "),a("em",[e._v("haz clic para cargar")])]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("Solo archivos excel")])]),e._v(" "),a("hr"),e._v(" "),a("button",{staticClass:"btn btn-outline-danger btn-lg",on:{click:function(t){e.showUpload=!1}}},[e._v("\n        Cancelar subida")])],1)],1):e._e()],1)},staticRenderFns:[]},J=a("VU/8")(K,j,!1,null,null,null).exports,Y={name:"SmallExpansion",mounted:function(){var e=this;if(!this.$auth.check(["smallExpansions"]))return this.$message({message:"No tienes permisos",type:"error"}),void this.$parent.goToCategory(1);this.data.smallConfig.length<1&&this.$alert("No existen plantas menores, vas a ser redirigido al modulo de plantas menores.","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"error"}).then(function(){e.$parent.goToCategory(7)}),this.columns=this.filterHiddenColumns(),this.onPropsChanged()},watch:{data:{handler:function(e,t){this.onPropsChanged(e)},deep:!0,immediate:!0}},props:["data"],components:{ReactDataGrid:u.a},methods:{getSelectValues:function(e){var t=this;if("horizonts"===e){var a=[];return l.a.each(this.data.horizonts,function(e){a.push({id:e.id,name:t.formatMonthDate(e.period),period:t.formatMonthDate(e.period)})}),a}return this.data[e]},showModal:function(){this.dialogCreateVisible=!0},formatMonthDate:function(e){var t=new Date(e);e=t.getUTCMonth()+1,t.getUTCDate();return t.getUTCFullYear()+"/"+e},filterHiddenColumns:function(){return l.a.filter(this.allColumns,{display:!0})},onPropsChanged:function(e){var t=this;console.log(this.data,"LOL"),this.rows=l.a.clone(this.data.smallConfigExpansion,!0),e&&(console.log(e),this.rows=e.smallConfigExpansion,console.log("entra")),this.rows.length<1&&(this.loading=!1),l.a.each(this.rows,function(e,a){e.smallConfigName=e.small_config.planta_menor,e.modifcationFormatted=t.formatMonthDate(e.horizont.period),a===t.rows.length-1&&setTimeout(function(){t.loading=!1},2e3)})},getCounter:function(){return this.rows.length},update:function(){var e=this;c.a.updateSmallConfigExpansion(this.selectedRow.id,this.selectedRow).then(function(){e.$message({message:"Notificación: Acción realizada correctamente",type:"success"}),e.$bus.emit("getModulesData",[{url:"getSmallConfigExpansion",reference:"smallConfigExpansion"}]),e.visibleTable=!0})},isDisabledField:function(e){return"id"===e},successUpload:function(e){this.rows=e,this.rows.splice(0,0),this.showUpload=!1,this.$message({message:"Notificación: Importación realizada correctamente",type:"success"})},addRow:function(){var e=this;this.dialogCreateVisible=!1,this.selectedRow=null,c.a.createSmallConfigExpansion({small_config_id:this.selectedSmallConfig,horizont_id:this.selectedHorizont,max:0,gen_min:0,gen_max:0,forced_unavailability:0,historic_unavailability:0,process_id:this.$route.params.id}).then(function(t){e.$bus.emit("getModulesData",[{url:"getSmallConfigExpansion",reference:"smallConfigExpansion"}])})},deleteRow:function(e){var t=this;c.a.deleteSmallConfigExpansion(e.id).then(function(){t.rows.splice(t.rows.indexOf(e),1),t.selectedRow=null,t.visibleTable=!0,t.$bus.emit("getModulesData",[{url:"getSmallConfigExpansion",reference:"smallConfigExpansion"}]),t.$message({message:"El registro se ha eliminado",type:"success"})})},clickedRow:function(e){var t=this;this.$confirm("¿Quieres entrar al detalle de la configuración?","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"warning"}).then(function(){t.visibleTable=!1,t.selectedRow=t.rows[e]})},download:function(){[].unshift(["ID","name"]),c.a.donwloadExcelThermalConfig(this.$route.params.id).then(function(e){var t=document.createElement("a");t.href=e.data.file,t.download=e.data.name,document.body.appendChild(t),t.click(),t.remove()})},rowGetter:function(e){return this.rows[e]},handleGridRowsUpdated:function(e){for(var t=this,a=function(a){var i=t.rows[a],s=l.a.extend(i,e.updated);c.a.updateArea(s.id,s).then(function(){t.rows[a]=s,t.$bus.emit("getModulesData",[{url:"getSmallConfigExpansion",reference:"smallConfigExpansion"}])}).catch(function(e){console.log(e)})},i=e.fromRow;i<=e.toRow;i++)a(i)}},data:function(){return{selectedHorizont:null,dialogCreateVisible:!1,selectedSmallConfigMonth:null,selectedSmallConfig:null,loading:!0,visibleTable:!0,uploadPath:window.pathBase+":"+window.portBaseLaravel+"/api/v1/smallConfig/importExcel/"+this.$route.params.id,showUpload:!1,selectedRow:null,rows:[],columns:[],allColumns:[{key:"smallConfigName",originalForeign:"small_config_id",name:"Nombre",type:"select",entity:"smallConfig",resizable:!0,display:!0,displayInForm:!1},{key:"horizont_id",originalForeign:"horizont_id",name:"Modificación",type:"select",keySelect:"period",entity:"horizonts",resizable:!0,display:!1,displayInForm:!0},{key:"modifcationFormatted",name:"Modificación",resizable:!0,type:"month",display:!0,displayInForm:!1},{key:"max",name:"Capacidad máxima",resizable:!0,type:"numeric",unit:"MW",precision:5,decimalSeparator:".",thousandSeparator:",",display:!1,displayInForm:!0},{key:"forced_unavailability",name:"Indisponibilidad forzada",resizable:!0,type:"numeric",unit:"%",precision:6,decimalSeparator:".",thousandSeparator:",",display:!1,displayInForm:!0},{key:"historic_unavailability",name:"Indisponibilidad historica",unit:"%",resizable:!0,type:"numeric",precision:6,decimalSeparator:".",thousandSeparator:",",display:!1,displayInForm:!0}]}}},Z={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"Tienes que esperar un poco..."}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12",staticStyle:{"margin-bottom":"10px"}},[!e.showUpload&&e.visibleTable?a("button",{staticClass:"btn btn-sm btn-warning float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.showModal()}}},[a("i",{staticClass:"icon plus"}),e._v("Agregar")]):e._e(),e._v(" "),e.selectedRow&&!e.showUpload?a("button",{staticClass:"btn btn-sm btn-danger float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.deleteRow(e.selectedRow)}}},[a("i",{staticClass:"icon trash"}),e._v("Eliminar seleccionado (id:"+e._s(e.selectedRow.id)+")")]):e._e()])]),e._v(" "),e.showUpload||!e.visibleTable||e.loading?e._e():a("div",[e.rows.length>0?a("el-alert",{staticStyle:{"margin-bottom":"20px"},attrs:{title:"Para editar las propiedades de la planta selecciona un registro.",type:"warning","show-icon":""}}):e._e(),e._v(" "),e.rows.length>0?a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("ReactDataGrid",{key:"smallConfig",attrs:{enableCellSelect:!0,columns:e.columns,rowsCount:e.getCounter(),minHeight:500,";":""},on:{rowGetter:e.rowGetter,onRowClick:e.clickedRow,onGridRowsUpdated:e.handleGridRowsUpdated}})],1)]):a("div",[a("center",[a("h2",[e._v("No existen expansiones")]),e._v(" "),a("img",{attrs:{width:"200",src:"/static/expansion.svg"}}),e._v(" "),a("hr"),e._v(" "),a("button",{staticClass:"btn btn-lg btn-primary",on:{click:function(t){e.showModal()}}},[a("i",{staticClass:"icon add"}),e._v("Agregar nueva")])])],1)],1),e._v(" "),a("div",{staticClass:"row"},[e.selectedRow&&!e.visibleTable?a("div",{staticClass:"col-md-12"},[e.selectedRow.gen_min>e.selectedRow.gen_max?a("el-alert",{staticStyle:{"margin-bottom":"10px"},attrs:{title:"La generación mínima de la planta menor no puede ser mayor a la generación máxima.",type:"warning"}}):e._e()],1):e._e()]),e._v(" "),e.showUpload||e.visibleTable?e._e():a("div",{staticClass:"row"},[e._l(e.allColumns,function(t){return t.displayInForm?a("div",{staticClass:"col-md-6"},["text"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name))]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedRow[t.key],expression:"selectedRow[column.key]"}],staticClass:"form-control",attrs:{disabled:e.isDisabledField(t.key),type:"text",name:"name",placeholder:t.key},domProps:{value:e.selectedRow[t.key]},on:{input:function(a){a.target.composing||e.$set(e.selectedRow,t.key,a.target.value)}}})]):e._e(),e._v(" "),"month"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name))]),e._v(" "),a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"month",placeholder:"Seleccione"},model:{value:e.selectedRow[t.key],callback:function(a){e.$set(e.selectedRow,t.key,a)},expression:"selectedRow[column.key]"}})],1):e._e(),e._v(" "),"select"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name))]),e._v(" "),a("el-select",{staticStyle:{width:"100%"},model:{value:e.selectedRow[t.originalForeign],callback:function(a){e.$set(e.selectedRow,t.originalForeign,a)},expression:"selectedRow[column.originalForeign]"}},e._l(e.getSelectValues(t.entity),function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1):e._e(),e._v(" "),"numeric"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name)+"\n          "),t.unit?a("el-tag",{attrs:{size:"small",type:"primary"}},[e._v(e._s(t.unit))]):e._e()],1),e._v(" "),a("vue-numeric",{staticClass:"form-control",attrs:{precision:t.precision,"decimal-separator":t.decimalSeparator,"thousand-separator":t.thousandSeparator},model:{value:e.selectedRow[t.key],callback:function(a){e.$set(e.selectedRow,t.key,a)},expression:"selectedRow[column.key]"}})],1):e._e()]):e._e()}),e._v(" "),a("div",{staticClass:"col-md-12"},[a("button",{staticClass:"btn btn-dark float-right",on:{click:function(t){e.visibleTable=!0}}},[a("i",{staticClass:"icon cancel"}),e._v("Cancelar ")]),e._v(" "),a("button",{staticClass:"btn btn-primary float-right",staticStyle:{"margin-right":"10px"},on:{click:e.update}},[a("i",{staticClass:"icon save"}),e._v("Actualizar\n      ")])])],2),e._v(" "),a("el-dialog",{attrs:{title:"Seleccione configuración",visible:e.dialogCreateVisible,width:"30%"},on:{"update:visible":function(t){e.dialogCreateVisible=t}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Seleccione configuración a expandir")]),e._v(" "),a("el-select",{staticStyle:{width:"100%"},model:{value:e.selectedSmallConfig,callback:function(t){e.selectedSmallConfig=t},expression:"selectedSmallConfig"}},e._l(e.data.smallConfig,function(e){return a("el-option",{key:e.id,attrs:{label:e.planta_menor,value:e.id}})}))],1)])]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("label",{staticClass:"control-label"},[e._v("Fecha Modificación")]),e._v(" "),a("div",{staticClass:"form-group required"},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.selectedHorizont,callback:function(t){e.selectedHorizont=t},expression:"selectedHorizont"}},e._l(e.getSelectValues("horizonts"),function(e){return a("el-option",{key:e.id,attrs:{label:e.period,value:e.id}})}))],1)])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogCreateVisible=!1}}},[e._v("Cancelar")]),e._v(" "),a("el-button",{attrs:{disabled:!e.selectedSmallConfig&&e.selectedSmallConfigMonth,type:"primary"},on:{click:function(t){e.addRow()}}},[e._v("Continuar")])],1)])],1)},staticRenderFns:[]},X=a("VU/8")(Y,Z,!1,null,null,null).exports,ee={name:"hydroConfig",mounted:function(){var e=this;if(!this.$auth.check(["hydroConfigs"]))return this.$message({message:"No tienes permisos",type:"error"}),void this.$parent.goToCategory(1);this.columns=this.filterHiddenColumns(),this.onPropsChanged(),this.data.areas.length<1&&this.$alert("No hay áreas, vas a ser redirigido al modulo de áreas.","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"error"}).then(function(){e.$parent.goToCategory(14)}),this.data.horizonts.length<1&&this.$alert("No hay horizontes definidos, vas a ser redirigido al modulo de demanda.","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"error"}).then(function(){e.$parent.goToCategory(2)})},watch:{data:{handler:function(e,t){this.onPropsChanged()},deep:!0,immediate:!0}},props:["data","infoData"],components:{ReactDataGrid:u.a},methods:{addHidricSeries:function(){this.dialogVisibleSeries=!0},getDataSelect:function(e){return"typeName"===e.key?this.data[e.entity].filter(function(e){return"Hydro"===e.name||"Small"===e.name}):this.data[e.entity]},getLabelSelect:function(e,t){return"entrance_stage"===e.key?t.description:"initial_storage_stage"===e.key?this.formatMonthDate(t.period):t[e.keySelect]},cancel:function(){this.visibleTable=!0,this.selectedRow=null},formatMonthDate:function(e){var t=new Date(e);e=t.getUTCMonth()+1,t.getUTCDate();return t.getUTCFullYear()+"/"+e},getSelectValues:function(e){var t=this;if("hydroConfig"===e)return l.a.filter(this.data[e],function(e){return e.planta!==t.selectedRow.planta});if("horizonts"===e){var a=[];return l.a.each(this.data.horizonts,function(e){a.push({id:e.id,period:t.formatMonthDate(e.period)})}),a}return this.data[e]},filterHiddenColumns:function(){return l.a.filter(this.allColumns,{display:!0})},onPropsChanged:function(e){var t=this;this.rows=l.a.clone(this.data.hydroConfig,!0),this.rows.length<1&&(this.loading=!1),l.a.each(this.rows,function(e,a){e.area=e.areas.name,e.entrance_stage=e.entrance_stages.name,e.typeName=e.type.name,a===t.rows.length-1&&setTimeout(function(){t.loading=!1},2e3)})},getCounter:function(){return this.rows.length},update:function(){var e=this;console.log(this.selectedRow),c.a.updateHydroConfig(this.selectedRow.id,this.selectedRow).then(function(){e.$message({message:"Notificación: Acción realizada correctamente",type:"success"}),e.$bus.emit("getModulesData",[{url:"getHydroConfig",reference:"hydroConfig"},{url:"getHydroExpansion",reference:"hydroExpansion"}]),e.visibleTable=!0})},isDisabledField:function(e){return"id"===e},successUpload:function(e){this.rows=e,this.rows.splice(0,0),this.showUpload=!1,this.$message({message:"Notificación: Importación realizada correctamente",type:"success"})},addRow:function(){var e=this;this.dialogCreateVisible=!1,this.selectedRow=null,c.a.createHydroConfig(f()({planta:this.hydroConfigName,emision:0,initial_storage:0,min_storage:0,max_storage:0,capacity:10,prod_coefficient:0,max_turbining_outflow:0,entrance_stage_id:this.data.entranceStages[0].id,initial_storage_stage:this.data.horizonts[0].id,"O&M":0,t_downstream_id:null,s_downstream_id:null,area_id:this.data.areas[0].id,type_id:this.data.types[0].id,process_id:this.$route.params.id,forced_unavailability:0,historic_unavailability:0},"process_id",this.$route.params.id)).then(function(t){e.$bus.emit("getModulesData",[{url:"getHydroConfig",reference:"hydroConfig"},{url:"getHydroExpansion",reference:"hydroExpansion"}])})},deleteRow:function(e){var t=this;c.a.deleteHydroConfig(e.id).then(function(){t.rows.splice(t.rows.indexOf(e),1),t.selectedRow=null,t.visibleTable=!0,t.$bus.emit("getModulesData",[{url:"getHydroConfig",reference:"hydroConfig"},{url:"getHydroExpansion",reference:"hydroExpansion"}]),t.$message({message:"El registro se ha eliminado",type:"success"})})},getActionHidric:function(){return window.pathBase+":"+window.portBaseLaravel+"/api/v1/uploadHidric/"+this.selectedRow.id},changeUploadHidric:function(){this.dialogVisibleSeries&&(this.$notify({title:"Exitoso",message:"El archivo ha sido cargado.",type:"success"}),this.dialogVisibleSeries=!1,this.selectedRow.uploaded_series=1)},clickedRow:function(e){var t=this;this.$confirm("¿Quieres entrar al detalle de la configuración?","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"warning"}).then(function(){t.visibleTable=!1,t.selectedRow=t.rows[e],console.log(t.selectedRow)})},rowGetter:function(e){return this.rows[e]}},data:function(){return{dialogVisibleSeries:!1,hydroConfigName:"",dialogCreateVisible:!1,loading:!0,visibleTable:!0,uploadPath:window.pathBase+":"+window.portBaseLaravel+"/api/v1/hydroConfig/importExcel/"+this.$route.params.id,showUpload:!1,selectedRow:null,rows:[],columns:[],allColumns:[{key:"planta",name:"Nombre",width:200,type:"text",resizable:!0,display:!0},{key:"area",originalForeign:"area_id",name:"Area",type:"select",keySelect:"name",entity:"areas",resizable:!0,display:!0},{key:"capacity",name:"Capacidad",unit:"MW",precision:5,decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"prod_coefficient",name:"Coeficiente de producción",precision:6,unit:"MW/m3/s",decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"max_turbining_outflow",name:"Turbinamiento máximo de salida",type:"numeric",precision:5,unit:"m3/s",decimalSeparator:".",thousandSeparator:",",resizable:!0,display:!1},{key:"initial_storage",name:"Almacenamiento inicial",precision:5,max:1,min:0,unit:"Hm3",decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"initial_storage_stage",originalForeign:"initial_storage_stage",name:"Etapa inicial de llenado",type:"select",keySelect:"period",entity:"horizonts",resizable:!0,display:!1},{key:"O&M",name:"Costos variables",precision:6,unit:"$/MWh",decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"planta",type:"select",name:"Turbinamiento aguas abajo",originalForeign:"t_downstream_id",entity:"hydroConfig",keySelect:"planta",resizable:!0,display:!1},{key:"planta",type:"select",name:"Derramamiento aguas abajo",originalForeign:"s_downstream_id",entity:"hydroConfig",keySelect:"planta",resizable:!0,display:!1},{key:"typeName",originalForeign:"type_id",name:"Tipo",keySelect:"name",entity:"types",type:"select",resizable:!0,display:!1},{key:"min_storage",name:"Almacenamiento mínimo",width:80,unit:"Hm3",precision:6,decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"max_storage",name:"Almacenamiento máximo",width:80,unit:"Hm3",precision:6,decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"forced_unavailability",name:"Indisponibilidad forzada",precision:6,unit:"%",decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"historic_unavailability",name:"Indisponibilidad historica",precision:6,unit:"%",decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"emision",name:"Factor de emisiones",precision:2,unit:"Ton/MWh",decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"fp",name:"Factor de planta",precision:3,unit:"%",decimalSeparator:".",thousandSeparator:",",type:"wind",resizable:!0,display:!1},{key:"p_instalada",name:"Potencia instalada",precision:2,unit:"MW",decimalSeparator:".",thousandSeparator:",",type:"wind",resizable:!0,display:!1},{key:"entrance_stage",keySelect:"name",type:"select",originalForeign:"entrance_stage_id",entity:"entranceStages",name:"Etapa de entrada",resizable:!0,display:!1}]}}},te={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"Tienes que esperar un poco..."}},[a("el-dialog",{attrs:{title:"Nuevo",visible:e.dialogCreateVisible,width:"30%"},on:{"update:visible":function(t){e.dialogCreateVisible=t}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("label",{staticClass:"control-label"},[e._v("Nombre de la planta")]),e._v(" "),a("div",{staticClass:"form-group required"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.hydroConfigName,expression:"hydroConfigName"}],staticClass:"form-control",attrs:{type:"text",name:"name",placeholder:"Ingrese el nombre de la planta"},domProps:{value:e.hydroConfigName},on:{input:function(t){t.target.composing||(e.hydroConfigName=t.target.value)}}})])])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogCreateVisible=!1}}},[e._v("Cancelar")]),e._v(" "),a("el-button",{attrs:{disabled:!e.hydroConfigName,type:"primary"},on:{click:function(t){e.addRow()}}},[e._v("Continuar")])],1)]),e._v(" "),e.selectedRow?a("el-dialog",{attrs:{title:"Agregar series hídricas",visible:e.dialogVisibleSeries,width:"30%"},on:{"update:visible":function(t){e.dialogVisibleSeries=t}}},[e.selectedRow.uploaded_series?a("div",[a("center",[a("h4",[e._v("Ya se han introducido series en esta planta")]),e._v(" "),a("button",{staticClass:"btn btn-primary",on:{click:function(t){e.selectedRow.uploaded_series=null}}},[e._v("Volver a subir")])])],1):a("div",[a("center",[a("el-upload",{staticClass:"upload-demo",staticStyle:{width:"100%"},attrs:{drag:"","on-change":e.changeUploadHidric,action:e.getActionHidric()}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("Suelta tu archivo aquí o "),a("em",[e._v("haz clic para cargar")])]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("Puedes descargar un archivo de excel de prueba haciendo click "),a("a",{attrs:{href:"/static/template_series.csv"}},[e._v("aquí")])])])],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisibleSeries=!1}}},[e._v("Cerrar")])],1)]):e._e(),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12",staticStyle:{"margin-bottom":"10px"}},[!e.showUpload&&e.visibleTable?a("button",{staticClass:"btn btn-sm btn-warning float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.dialogCreateVisible=!0}}},[a("i",{staticClass:"icon plus"}),e._v("Agregar")]):e._e(),e._v(" "),!e.visibleTable&&e.selectedRow&&e.infoData.form.generate_wind?a("button",{staticClass:"btn btn-sm btn-warning float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.addHidricSeries()}}},[a("i",{staticClass:"icon plus"}),e._v("Agregar series hidricas")]):e._e(),e._v(" "),e.selectedRow&&!e.showUpload?a("button",{staticClass:"btn btn-sm btn-danger float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.deleteRow(e.selectedRow)}}},[a("i",{staticClass:"icon trash"}),e._v("Eliminar seleccionado (id:"+e._s(e.selectedRow.id)+")")]):e._e()])]),e._v(" "),e.showUpload||!e.visibleTable||e.loading?e._e():a("div",[e.rows.length>0?a("el-alert",{staticStyle:{"margin-bottom":"20px"},attrs:{title:"Para editar las propiedades de la planta selecciona un registro.",type:"warning","show-icon":""}}):e._e(),e._v(" "),a("ReactDataGrid",{key:"hydroConfig",attrs:{enableCellSelect:!0,columns:e.columns,rowsCount:e.getCounter(),minHeight:500,";":""},on:{rowGetter:e.rowGetter,onRowClick:e.clickedRow}})],1),e._v(" "),a("div",{staticClass:"row"},[e.selectedRow&&!e.visibleTable?a("div",{staticClass:"col-md-12"},[e.selectedRow.min_storage>1?a("el-alert",{staticStyle:{"margin-bottom":"10px"},attrs:{title:"Almacenamiento mínimo no puede ser mayor que almacenamiento máximo.",type:"warning"}}):e._e(),e._v(" "),e.selectedRow.gen_max>e.selectedRow.max?a("el-alert",{staticStyle:{"margin-bottom":"10px"},attrs:{title:"Almacenamiento inicial debe de estar entre cero y 1.",type:"warning"}}):e._e()],1):e._e()]),e._v(" "),e.infoData.form.generate_wind&&!e.visibleTable?a("div",{staticClass:"ui message yellow row"},[e._m(0),e._v(" "),a("div",{staticClass:"col-md-6",staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Potencia instalada\n          "),a("el-tag",{attrs:{size:"small",type:"primary"}},[e._v("MW")])],1),e._v(" "),a("vue-numeric",{staticClass:"form-control",attrs:{max:100,min:0,precision:5,"decimal-separator":",","thousand-separator":"."},model:{value:e.selectedRow.p_instalada,callback:function(t){e.$set(e.selectedRow,"p_instalada",t)},expression:"selectedRow.p_instalada"}})],1)]),e._v(" "),a("div",{staticClass:"col-md-6",staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Factor de planta\n          "),a("el-tag",{attrs:{size:"small",type:"primary"}},[e._v("%")])],1),e._v(" "),a("vue-numeric",{staticClass:"form-control",attrs:{max:100,min:0,precision:5,"decimal-separator":",","thousand-separator":"."},model:{value:e.selectedRow.fp,callback:function(t){e.$set(e.selectedRow,"fp",t)},expression:"selectedRow.fp"}})],1)])]):e._e(),e._v(" "),e.showUpload||e.visibleTable?e._e():a("div",{staticClass:"row"},[e._l(e.allColumns,function(t){return a("div",{staticClass:"col-md-6"},["text"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name))]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedRow[t.key],expression:"selectedRow[column.key]"}],staticClass:"form-control",attrs:{disabled:e.isDisabledField(t.key),type:"text",name:"name",placeholder:t.key},domProps:{value:e.selectedRow[t.key]},on:{input:function(a){a.target.composing||e.$set(e.selectedRow,t.key,a.target.value)}}})]):e._e(),e._v(" "),"numeric"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name)+"\n          "),t.unit?a("el-tag",{attrs:{size:"small",type:"primary"}},[e._v(e._s(t.unit))]):e._e()],1),e._v(" "),a("vue-numeric",{staticClass:"form-control",attrs:{max:t.max,min:t.min,precision:t.precision,"decimal-separator":t.decimalSeparator,"thousand-separator":t.thousandSeparator},model:{value:e.selectedRow[t.key],callback:function(a){e.$set(e.selectedRow,t.key,a)},expression:"selectedRow[column.key]"}})],1):e._e(),e._v(" "),"select"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name))]),e._v(" "),a("el-select",{staticStyle:{width:"100%"},model:{value:e.selectedRow[t.originalForeign],callback:function(a){e.$set(e.selectedRow,t.originalForeign,a)},expression:"selectedRow[column.originalForeign]"}},e._l(e.getDataSelect(t),function(i){return a("el-option",{key:i.id,attrs:{label:e.getLabelSelect(t,i),value:i.id}})}))],1):e._e(),e._v(" "),3===e.selectedRow.entrance_stage_id&&"entrance_stage"===t.key?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Ingrese fecha de entrada")]),e._v(" "),a("el-select",{staticStyle:{width:"100%"},model:{value:e.selectedRow.entrance_stage_date,callback:function(t){e.$set(e.selectedRow,"entrance_stage_date",t)},expression:"selectedRow['entrance_stage_date']"}},e._l(e.data.horizonts,function(t){return a("el-option",{key:t.id,attrs:{label:e.formatMonthDate(t.period),value:t.id}})}))],1):e._e()])}),e._v(" "),a("div",{staticClass:"col-md-12"},[a("button",{staticClass:"btn btn-dark float-right",on:{click:function(t){e.cancel()}}},[a("i",{staticClass:"icon cancel"}),e._v("Cancelar ")]),e._v(" "),a("button",{staticClass:"btn btn-primary float-right",staticStyle:{"margin-right":"10px"},on:{click:e.update}},[a("i",{staticClass:"icon save"}),e._v("Actualizar\n      ")])])],2)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"col-md-12"},[t("h3",[this._v("Información generación (generación de datos)")])])}]},ae=a("VU/8")(ee,te,!1,null,null,null).exports,ie={name:"hydroExpansion",mounted:function(){var e=this;if(!this.$auth.check(["hydroExpansions"]))return this.$message({message:"No tienes permisos",type:"error"}),void this.$parent.goToCategory(1);this.data.hydroConfig.length<1&&this.$alert("No existen plantas, vas a ser redirigido al modulo de plantas hidroeléctricas.","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"error"}).then(function(){e.$parent.goToCategory(9)}),this.columns=this.filterHiddenColumns(),this.onPropsChanged()},watch:{data:{handler:function(e,t){this.onPropsChanged()},deep:!0,immediate:!0}},props:["data"],components:{ReactDataGrid:u.a},methods:(i={formatMonthDate:function(e){console.log(e);var t=new Date(e);e=t.getUTCMonth()+1,t.getUTCDate();return t.getUTCFullYear()+"/"+e},getSelectValues:function(e){var t=this;if("horizonts"===e){var a=[];return l.a.each(this.data.horizonts,function(e){a.push({id:e.id,name:t.formatMonthDate(e.period),period:t.formatMonthDate(e.period)})}),a}return this.data[e]},showModal:function(){this.dialogCreateVisible=!0}},f()(i,"formatMonthDate",function(e){var t=new Date(e);e=t.getUTCMonth()+1,t.getUTCDate();return t.getUTCFullYear()+"/"+e}),f()(i,"filterHiddenColumns",function(){return l.a.filter(this.allColumns,{display:!0})}),f()(i,"onPropsChanged",function(e){var t=this;this.rows=l.a.clone(this.data.hydroExpansion,!0),this.rows.length<1&&(this.loading=!1),l.a.each(this.rows,function(e,a){e.hydroName=e.hydro_config.planta,console.log(e.horizont.period),e.modifcationFormatted=t.formatMonthDate(e.horizont.period),a===t.rows.length-1&&setTimeout(function(){t.loading=!1},2e3)})}),f()(i,"getCounter",function(){return this.rows.length}),f()(i,"update",function(){var e=this;c.a.updateHydroConfigExpansion(this.selectedRow.id,{process_id:this.selectedRow.process_id,hidro_config_id:this.selectedRow.hidro_config_id,horizont_id:this.selectedRow.horizont_id,max_turbing_outflow:this.selectedRow.max_turbing_outflow,prod_coefficient:this.selectedRow.prod_coefficient,capacity:this.selectedRow.capacity,max_storage:this.selectedRow.max_storage,forced_unavailability:this.selectedRow.forced_unavailability,historic_unavailability:this.selectedRow.historic_unavailability,emision:this.selectedRow.emision}).then(function(){e.$message({message:"Notificación: Acción realizada correctamente",type:"success"}),e.$bus.emit("getModulesData",[{url:"getHydroExpansion",reference:"hydroExpansion"}]),e.visibleTable=!0})}),f()(i,"isDisabledField",function(e){return"min_storage"===e||"id"===e}),f()(i,"addRow",function(){var e=this;this.dialogCreateVisible=!1,this.selectedRow=null,c.a.createHydroExpansionConfig({horizont_id:this.selectedHorizont,hidro_config_id:this.selectedHydroConfig,modification:this.selectedHydroConfigMonth,max:0,emision:0,capacity:0,prod_coefficient:0,max_turbing_outflow:0,max_storage:0,forced_unavailability:0,historic_unavailability:0,process_id:this.$route.params.id}).then(function(t){e.$bus.emit("getModulesData",[{url:"getHydroExpansion",reference:"hydroExpansion"}])})}),f()(i,"deleteRow",function(e){var t=this;c.a.deleteHydroExpansionConfig(e.id).then(function(){t.rows.splice(t.rows.indexOf(e),1),t.selectedRow=null,t.visibleTable=!0,t.$bus.emit("getModulesData",[{url:"getHydroExpansion",reference:"hydroExpansion"}]),t.$message({message:"El registro se ha eliminado",type:"success"})})}),f()(i,"clickedRow",function(e){var t=this;this.$confirm("¿Quieres entrar al detalle de la configuración?","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"warning"}).then(function(){t.visibleTable=!1,t.selectedRow=t.rows[e]})}),f()(i,"rowGetter",function(e){return this.rows[e]}),i),data:function(){return{selectedHorizont:null,dialogCreateVisible:!1,selectedHydroConfigMonth:null,selectedHydroConfig:null,loading:!0,visibleTable:!0,uploadPath:window.pathBase+":"+window.portBaseLaravel+"/api/v1/hydroConfig/importExcel/"+this.$route.params.id,showUpload:!1,selectedRow:null,rows:[],columns:[],allColumns:[{key:"hydroName",originalForeign:"hidro_config_id",name:"Nombre",type:"select",entity:"hydroConfig",resizable:!0,display:!0,displayInForm:!1,disabled:!1},{key:"horizont_id",originalForeign:"horizont_id",name:"Modificación",type:"select",keySelect:"period",entity:"horizonts",resizable:!0,display:!1,displayInForm:!0,disabled:!1},{key:"modifcationFormatted",name:"Modificación",resizable:!0,type:"month",display:!0,displayInForm:!1,disabled:!1},{key:"max_turbing_outflow",name:"Turbinamiento máximo",resizable:!0,precision:6,unit:"m3/s",decimalSeparator:".",thousandSeparator:",",type:"numeric",display:!1,displayInForm:!0,disabled:!1},{key:"prod_coefficient",name:"Coeficiente de producción",resizable:!0,unit:"MW/m3/s",precision:6,decimalSeparator:".",thousandSeparator:",",type:"numeric",display:!1,displayInForm:!0,disabled:!1},{key:"capacity",name:"Capacidad",unit:"MW",resizable:!0,precision:5,decimalSeparator:".",thousandSeparator:",",type:"numeric",display:!1,displayInForm:!0,disabled:!1},{key:"min_storage",name:"Almacenamiento mínimo",resizable:!0,unit:"Hm3",precision:5,decimalSeparator:".",thousandSeparator:",",type:"numeric",display:!1,displayInForm:!0,disabled:!0},{key:"max_storage",name:"Almacenamiento máximo",resizable:!0,unit:"Hm3",precision:5,decimalSeparator:".",thousandSeparator:",",type:"numeric",display:!1,displayInForm:!0,disabled:!1},{key:"forced_unavailability",name:"Indisponibilidad forzada",resizable:!0,precision:6,unit:"%",decimalSeparator:".",thousandSeparator:",",type:"numeric",display:!1,displayInForm:!0,disabled:!1},{key:"historic_unavailability",name:"Indisponibilidad historica",resizable:!0,precision:6,unit:"%",decimalSeparator:".",thousandSeparator:",",type:"numeric",display:!1,displayInForm:!0,disabled:!1},{key:"emision",name:"Factor de emisiones",precision:2,unit:"Ton/MWh",decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1,displayInForm:!0,disabled:!1}]}}},se={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"Tienes que esperar un poco..."}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12",staticStyle:{"margin-bottom":"10px"}},[!e.showUpload&&e.visibleTable?a("button",{staticClass:"btn btn-sm btn-warning float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.showModal()}}},[a("i",{staticClass:"icon plus"}),e._v("Agregar")]):e._e(),e._v(" "),e.selectedRow&&!e.showUpload?a("button",{staticClass:"btn btn-sm btn-danger float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.deleteRow(e.selectedRow)}}},[a("i",{staticClass:"icon trash"}),e._v("Eliminar seleccionado (id:"+e._s(e.selectedRow.id)+")")]):e._e()])]),e._v(" "),e.showUpload||!e.visibleTable||e.loading?e._e():a("div",[e.rows.length>0?a("el-alert",{staticStyle:{"margin-bottom":"20px"},attrs:{title:"Para editar las propiedades de la planta selecciona un registro.",type:"warning","show-icon":""}}):e._e(),e._v(" "),e.rows.length>0?a("div",[a("ReactDataGrid",{key:"hydroConfig",attrs:{enableCellSelect:!0,columns:e.columns,rowsCount:e.getCounter(),minHeight:500},on:{rowGetter:e.rowGetter,onRowClick:e.clickedRow}})],1):a("div",[a("center",[a("h2",[e._v("No existen expansiones")]),e._v(" "),a("img",{attrs:{width:"200",src:"/static/expansion.svg"}}),e._v(" "),a("hr"),e._v(" "),a("button",{staticClass:"btn btn-lg btn-primary",on:{click:function(t){e.showModal()}}},[a("i",{staticClass:"icon add"}),e._v("Agregar nueva")])])],1)],1),e._v(" "),e.showUpload||e.visibleTable?e._e():a("div",{staticClass:"row"},[e._l(e.allColumns,function(t){return t.displayInForm?a("div",{staticClass:"col-md-6"},["text"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name))]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedRow[t.key],expression:"selectedRow[column.key]"}],staticClass:"form-control",attrs:{disabled:e.isDisabledField(t.key),type:"text",name:"name",placeholder:t.key},domProps:{value:e.selectedRow[t.key]},on:{input:function(a){a.target.composing||e.$set(e.selectedRow,t.key,a.target.value)}}})]):e._e(),e._v(" "),"numeric"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name)+"\n          "),t.unit?a("el-tag",{attrs:{type:"primary",size:"small"}},[e._v(e._s(t.unit))]):e._e()],1),e._v(" "),a("vue-numeric",{staticClass:"form-control",attrs:{disabled:e.isDisabledField(t.key),precision:t.precision,"decimal-separator":t.decimalSeparator,"thousand-separator":t.thousandSeparator},model:{value:e.selectedRow[t.key],callback:function(a){e.$set(e.selectedRow,t.key,a)},expression:"selectedRow[column.key]"}})],1):e._e(),e._v(" "),"month"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name))]),e._v(" "),a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"month",placeholder:"Seleccione"},model:{value:e.selectedRow[t.key],callback:function(a){e.$set(e.selectedRow,t.key,a)},expression:"selectedRow[column.key]"}})],1):e._e(),e._v(" "),"select"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name))]),e._v(" "),a("el-select",{staticStyle:{width:"100%"},model:{value:e.selectedRow[t.originalForeign],callback:function(a){e.$set(e.selectedRow,t.originalForeign,a)},expression:"selectedRow[column.originalForeign]"}},e._l(e.getSelectValues(t.entity),function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1):e._e()]):e._e()}),e._v(" "),a("div",{staticClass:"col-md-12"},[a("button",{staticClass:"btn btn-dark float-right",on:{click:function(t){e.visibleTable=!0}}},[a("i",{staticClass:"icon cancel"}),e._v("Cancelar ")]),e._v(" "),a("button",{staticClass:"btn btn-primary float-right",staticStyle:{"margin-right":"10px"},on:{click:e.update}},[a("i",{staticClass:"icon save"}),e._v("Actualizar\n      ")])])],2),e._v(" "),e.showUpload?a("div",{staticStyle:{"margin-top":"100px"}},[a("center",[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"","on-success":e.successUpload,action:e.uploadPath,multiple:""}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("Suelta tu archivo aquí o "),a("em",[e._v("haz clic para cargar")])]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("Solo archivos excel")])]),e._v(" "),a("hr"),e._v(" "),a("button",{staticClass:"btn btn-outline-danger btn-lg",on:{click:function(t){e.showUpload=!1}}},[e._v("\n        Cancelar subida")])],1)],1):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"Nueva expansión",visible:e.dialogCreateVisible,width:"30%"},on:{"update:visible":function(t){e.dialogCreateVisible=t}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Seleccione configuración a expandir")]),e._v(" "),a("el-select",{staticStyle:{width:"100%"},model:{value:e.selectedHydroConfig,callback:function(t){e.selectedHydroConfig=t},expression:"selectedHydroConfig"}},e._l(e.data.hydroConfig,function(e){return a("el-option",{key:e.id,attrs:{label:e.planta,value:e.id}})}))],1)])]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("label",{staticClass:"control-label"},[e._v("Fecha Modificación")]),e._v(" "),a("div",{staticClass:"form-group required"},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.selectedHorizont,callback:function(t){e.selectedHorizont=t},expression:"selectedHorizont"}},e._l(e.getSelectValues("horizonts"),function(e){return a("el-option",{key:e.id,attrs:{label:e.period,value:e.id}})}))],1)])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogCreateVisible=!1}}},[e._v("Cancelar")]),e._v(" "),a("el-button",{attrs:{disabled:!e.selectedHydroConfig&&e.selectedHydroConfigMonth,type:"primary"},on:{click:function(t){e.addRow()}}},[e._v("Continuar")])],1)])],1)},staticRenderFns:[]},ne=a("VU/8")(ie,se,!1,null,null,null).exports,oe=a("6H7d"),re={name:"windExpansionCategory",mounted:function(){var e=this;if(!this.$auth.check(["windExpansions"]))return this.$message({message:"No tienes permisos",type:"error"}),void this.$parent.goToCategory(1);this.data.windConfig.length<1&&this.$alert("No existen plantas, vas a ser redirigido al modulo de plantas eólicas.","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"error"}).then(function(){e.$parent.goToCategory(12)}),this.columns=this.filterHiddenColumns(),this.onPropsChanged()},watch:{data:{handler:function(e,t){this.onPropsChanged()},deep:!0,immediate:!0}},props:["data"],components:{ReactDataGrid:u.a},methods:{getSelectValues:function(e){var t=this;if("horizonts"===e){var a=[];return l.a.each(this.data.horizonts,function(e){a.push({id:e.id,name:t.formatMonthDate(e.period),period:t.formatMonthDate(e.period)})}),a}return this.data[e]},showModal:function(){this.dialogCreateVisible=!0},formatMonthDate:function(e){var t=new Date(e);e=t.getUTCMonth()+1,t.getUTCDate();return t.getUTCFullYear()+"/"+e},filterHiddenColumns:function(){return l.a.filter(this.allColumns,{display:!0})},onPropsChanged:function(e){var t=this;this.rows=l.a.clone(this.data.windConfigExpansion,!0),this.rows.length<1&&(this.loading=!1),l.a.each(this.rows,function(e,a){e.windName=e.wind_config.planta,e.modifcationFormatted=t.formatMonthDate(e.horizont.period),a===t.rows.length-1&&setTimeout(function(){t.loading=!1},2e3)})},getCounter:function(){return this.rows.length},update:function(){var e=this;c.a.updateWindConfigExpansion(this.selectedRow.id,this.selectedRow).then(function(){e.$message({message:"Notificación: Acción realizada correctamente",type:"success"}),e.$bus.emit("getModulesData",[{reference:"windConfigExpansion",url:"getWindExpansion"}]),e.visibleTable=!0})},isDisabledField:function(e){return"id"===e},successUpload:function(e){this.rows=e,this.rows.splice(0,0),this.showUpload=!1,this.$message({message:"Notificación: Importación realizada correctamente",type:"success"})},addRow:function(){var e=this;this.dialogCreateVisible=!1,this.selectedRow=null,c.a.createWindConfigExpansion({wind_config_id:this.selectedWinConfig,planta:0,horizont_id:this.selectedHorizont,capacity:0,efficiency:0,number_turbines:0,forced_unavailability:0,historic_unavailability:0,losses:0,process_id:this.$route.params.id}).then(function(t){t.data;e.$bus.emit("getModulesData",[{reference:"windConfigExpansion",url:"getWindExpansion"}])})},deleteRow:function(e){var t=this;c.a.deleteWindConfigExpansion(e.id).then(function(){t.rows.splice(t.rows.indexOf(e),1),t.selectedRow=null,t.visibleTable=!0,t.$bus.emit("getModulesData",[{reference:"windConfigExpansion",url:"getWindExpansion"}]),t.$message({message:"El registro se ha eliminado",type:"success"})})},clickedRow:function(e){var t=this;this.$confirm("¿Quieres entrar al detalle de la configuración?","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"warning"}).then(function(){t.visibleTable=!1,t.selectedRow=t.rows[e]})},download:function(){[].unshift(["ID","name"]),c.a.donwloadExcelThermalConfig(this.$route.params.id).then(function(e){var t=document.createElement("a");t.href=e.data.file,t.download=e.data.name,document.body.appendChild(t),t.click(),t.remove()})},rowGetter:function(e){return this.rows[e]},handleGridRowsUpdated:function(e){for(var t=this,a=function(a){var i=t.rows[a],s=l.a.extend(i,e.updated);c.a.updateArea(s.id,s).then(function(){t.rows[a]=s,t.$bus.emit("getModulesData",[{reference:"windConfigExpansion",url:"getWindExpansion"}])}).catch(function(e){console.log(e)})},i=e.fromRow;i<=e.toRow;i++)a(i)}},data:function(){return{selectedHorizont:null,dialogCreateVisible:!1,selectedWinConfigMonth:null,selectedWinConfig:null,loading:!0,visibleTable:!0,uploadPath:window.pathBase+":"+window.portBaseLaravel+"/api/v1/windConfig/importExcel/"+this.$route.params.id,showUpload:!1,selectedRow:null,rows:[],columns:[],allColumns:[{key:"windName",originalForeign:"wind_config_id",name:"Nombre",type:"select",entity:"windConfig",resizable:!0,display:!0,displayInForm:!1},{key:"horizont_id",originalForeign:"horizont_id",name:"Modificación",type:"select",keySelect:"period",entity:"horizonts",resizable:!0,display:!1,displayInForm:!0},{key:"modifcationFormatted",name:"Modificación",resizable:!0,type:"month",display:!0,displayInForm:!1},{key:"capacity",name:"Capacidad",unit:"MW",resizable:!0,precision:5,decimalSeparator:".",thousandSeparator:",",type:"numeric",display:!1,displayInForm:!0},{key:"efficiency",name:"Eficiencia",unit:"%",resizable:!0,precision:6,decimalSeparator:".",thousandSeparator:",",type:"numeric",display:!1,displayInForm:!0},{key:"number_turbines",name:"Número de turbinas",resizable:!0,precision:6,decimalSeparator:".",thousandSeparator:",",type:"numeric",display:!1,displayInForm:!0},{key:"losses",unit:"%",name:"Pérdidas",resizable:!0,precision:6,decimalSeparator:".",thousandSeparator:",",type:"numeric",display:!1,displayInForm:!0},{key:"forced_unavailability",name:"Indisponibilidad forzada",unit:"%",resizable:!0,precision:6,decimalSeparator:".",thousandSeparator:",",type:"numeric",display:!1,displayInForm:!0},{key:"historic_unavailability",name:"Indisponibilidad historica",unit:"%",resizable:!0,precision:6,decimalSeparator:".",thousandSeparator:",",type:"numeric",display:!1,displayInForm:!0}]}}},le={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"Tienes que esperar un poco..."}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12",staticStyle:{"margin-bottom":"10px"}},[!e.showUpload&&e.visibleTable?a("button",{staticClass:"btn btn-sm btn-warning float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.showModal()}}},[a("i",{staticClass:"icon plus"}),e._v("Agregar")]):e._e(),e._v(" "),e.selectedRow&&!e.showUpload?a("button",{staticClass:"btn btn-sm btn-danger float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.deleteRow(e.selectedRow)}}},[a("i",{staticClass:"icon trash"}),e._v("Eliminar seleccionado (id:"+e._s(e.selectedRow.id)+")")]):e._e()])]),e._v(" "),e.showUpload||!e.visibleTable||e.loading?e._e():a("div",[e.rows.length>0?a("el-alert",{staticStyle:{"margin-bottom":"20px"},attrs:{title:"Para editar las propiedades de la planta selecciona un registro.",type:"warning","show-icon":""}}):e._e(),e._v(" "),e.rows.length>0?a("div",[a("ReactDataGrid",{key:"windConfig",attrs:{enableCellSelect:!0,columns:e.columns,rowsCount:e.getCounter(),minHeight:500,";":""},on:{rowGetter:e.rowGetter,onRowClick:e.clickedRow,onGridRowsUpdated:e.handleGridRowsUpdated}})],1):a("div",[a("center",[a("h2",[e._v("No existen expansiones")]),e._v(" "),a("img",{attrs:{width:"200",src:"/static/expansion.svg"}}),e._v(" "),a("hr"),e._v(" "),a("button",{staticClass:"btn btn-lg btn-primary",on:{click:function(t){e.showModal()}}},[a("i",{staticClass:"icon add"}),e._v("Agregar nueva")])])],1)],1),e._v(" "),e.showUpload||e.visibleTable?e._e():a("div",{staticClass:"row"},[e._l(e.allColumns,function(t){return t.displayInForm?a("div",{staticClass:"col-md-6"},["text"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name))]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedRow[t.key],expression:"selectedRow[column.key]"}],staticClass:"form-control",attrs:{disabled:!0,type:"text",name:"name",placeholder:t.key},domProps:{value:e.selectedRow[t.key]},on:{input:function(a){a.target.composing||e.$set(e.selectedRow,t.key,a.target.value)}}})]):e._e(),e._v(" "),"numeric"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name)+"\n          "),t.unit?a("el-tag",{attrs:{type:"primary",size:"small"}},[e._v(e._s(t.unit))]):e._e()],1),e._v(" "),a("vue-numeric",{staticClass:"form-control",attrs:{disabled:!0,precision:t.precision,"decimal-separator":t.decimalSeparator,"thousand-separator":t.thousandSeparator},model:{value:e.selectedRow[t.key],callback:function(a){e.$set(e.selectedRow,t.key,a)},expression:"selectedRow[column.key]"}})],1):e._e(),e._v(" "),"month"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name))]),e._v(" "),a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"month",placeholder:"Seleccione"},model:{value:e.selectedRow[t.key],callback:function(a){e.$set(e.selectedRow,t.key,a)},expression:"selectedRow[column.key]"}})],1):e._e(),e._v(" "),"select"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name))]),e._v(" "),a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!0},model:{value:e.selectedRow[t.originalForeign],callback:function(a){e.$set(e.selectedRow,t.originalForeign,a)},expression:"selectedRow[column.originalForeign]"}},e._l(e.getSelectValues(t.entity),function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1):e._e()]):e._e()}),e._v(" "),a("div",{staticClass:"col-md-12"},[a("button",{staticClass:"btn btn-dark float-right",on:{click:function(t){e.visibleTable=!0}}},[a("i",{staticClass:"icon cancel"}),e._v("Cancelar ")]),e._v(" "),a("button",{staticClass:"btn btn-primary float-right",staticStyle:{"margin-right":"10px"},on:{click:e.update}},[a("i",{staticClass:"icon save"}),e._v("Actualizar\n      ")])])],2),e._v(" "),e.showUpload?a("div",{staticStyle:{"margin-top":"100px"}},[a("center",[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"","on-success":e.successUpload,action:e.uploadPath,multiple:""}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("Suelta tu archivo aquí o "),a("em",[e._v("haz clic para cargar")])]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("Solo archivos excel")])]),e._v(" "),a("hr"),e._v(" "),a("button",{staticClass:"btn btn-outline-danger btn-lg",on:{click:function(t){e.showUpload=!1}}},[e._v("\n        Cancelar subida")])],1)],1):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"Seleccione configuración de viento",visible:e.dialogCreateVisible,width:"30%"},on:{"update:visible":function(t){e.dialogCreateVisible=t}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("el-alert",{attrs:{title:"Funcionalidad solo disponible en modo experimental.",type:"error"}}),e._v(" "),a("hr"),e._v(" "),a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Seleccione configuración a expandir")]),e._v(" "),a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!0},model:{value:e.selectedWinConfig,callback:function(t){e.selectedWinConfig=t},expression:"selectedWinConfig"}},e._l(e.data.windConfig,function(e){return a("el-option",{key:e.id,attrs:{label:e.planta,value:e.id}})}))],1)],1)]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("label",{staticClass:"control-label"},[e._v("Fecha Modificación")]),e._v(" "),a("div",{staticClass:"form-group required"},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!0,clearable:""},model:{value:e.selectedHorizont,callback:function(t){e.selectedHorizont=t},expression:"selectedHorizont"}},e._l(e.getSelectValues("horizonts"),function(e){return a("el-option",{key:e.id,attrs:{label:e.period,value:e.id}})}))],1)])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogCreateVisible=!1}}},[e._v("Cancelar")]),e._v(" "),a("el-button",{attrs:{disabled:!e.selectedWinConfig&&e.selectedWinConfigMonth,type:"primary"},on:{click:function(t){e.addRow()}}},[e._v("Continuar")])],1)])],1)},staticRenderFns:[]},ce=a("VU/8")(re,le,!1,null,null,null).exports,de={components:{ReactDataGrid:u.a},name:"Inflow",props:["data"],mounted:function(){var e=this;if(!this.$auth.check(["inflows"]))return this.$message({message:"No tienes permisos",type:"error"}),void this.$parent.goToCategory(1);this.data.hydroConfig.length<1&&this.$alert("No existen plantas, vas a ser redirigido al modulo de plantas hidroeléctricas.","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"error"}).then(function(){e.$parent.goToCategory(9)}),this.data.horizonts.length<1&&this.$alert("No hay horizontes, vas a ser redirigido al modulo de demanda.","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"error"}).then(function(){e.$parent.goToCategory(2)}),this.data.scenarios.length<1&&this.$alert("No hay escenarios, vas a ser redirigido al modulo de escenarios.","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"error"}).then(function(){e.$parent.goToCategory(29)}),this.hydroConfig=this.data.hydroConfig,this.formatHorizontDate(),this.onPropsChanged()},methods:{changePlant:function(){var e=this,t=[];l.a.each(this.data.scenarios,function(a,i){l.a.each(e.data.horizonts,function(i,s){t.push({id_horizont:i.id,fecha:e.formatMonthDate(i.period),scenario:a.name,scenario_id:a.id,value:null})})}),c.a.getInflowByHydroConfigId(this.windSelected).then(function(a){l.a.each(t,function(t){l.a.each(a.data,function(a){a.horizont_id===t.id_horizont&&a.hidro_config_id===e.windSelected&&t.scenario_id===a.scenario_id&&(t.value=a.value,t.scenario=a.name,t.horizont_id=a.horizont_id,t.hidro_config_id=a.hidro_config_id,t.id=a.id)})}),console.log(e.speedIndices),e.speedIndices=t})},onPropsChanged:function(e){e&&(this.speedIndices=e.horizonts,this.formatHorizontDate())},formatHorizontDate:function(){var e=this;l.a.each(this.speedIndices,function(t){t.fecha=e.formatMonthDate(t.period)})},formatMonthDate:function(e){var t=new Date(e);e=t.getUTCMonth()+1,t.getUTCDate();return t.getUTCFullYear()+"/"+e},addFuel:function(){},rowGetterFuelCost:function(e){return this.speedIndices[e]},countRowsHorizont:function(){return this.speedIndices.length},clickedRowHorizon:function(e){this.selectedRowFuelCost=this.speedIndices[e]},handleFuelUpdated:function(e){var t=this;if(!l.a.isNil(e.updated.value)){if(isNaN(e.updated.value))return void this.$message({message:"Debes insertar un valor numérico.",type:"error"});if(e.updated.value<0)return void this.$message({message:"El valor debe ser positivo.",type:"error"})}e.fromRowData.value=e.updated.value,e.fromRowData.horizont_id=e.fromRowData.id_horizont,e.fromRowData.process_id=this.$route.params.id,l.a.isNil(e.fromRowData.hidro_config_id)?(e.fromRowData.hidro_config_id=this.windSelected,c.a.createInflow(e.fromRowData).then(function(a){200===a.status&&(e.fromRowData.demand_id=a.data.id,t.$message({message:"El indice ha sido creado",type:"success"}))})):c.a.updateInflow(e.fromRowData.id,e.fromRowData).then(function(e){console.log(e)})}},data:function(){var e;return e={speedIndices:[],loading:!1,selectedRowFuelCost:"",windSelected:null,hydroConfig:[]},f()(e,"speedIndices",[]),f()(e,"columnsFuelCost",[{key:"fecha",name:"Mes",editable:!1},{key:"scenario",name:"Escenario",editable:!1},{key:"value",name:"Afluente (m3/s)",editable:!0}]),e}},ue={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("h3",[e._v("Seleccione Planta")]),e._v(" "),a("el-select",{attrs:{placeholder:"Seleccioné"},on:{change:function(t){e.changePlant()}},model:{value:e.windSelected,callback:function(t){e.windSelected=t},expression:"windSelected"}},e._l(e.hydroConfig,function(e){return a("el-option",{key:e.id,attrs:{label:e.planta,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"col-md-8"},[a("button",{staticClass:"btn btn-warning float-right",staticStyle:{"margin-top":"10px"},on:{click:function(t){e.$parent.goToCategory(9)}}},[a("i",{staticClass:"icon cube"}),e._v("Agregar planta hidroeléctrica")])])]),e._v(" "),a("div",{staticClass:"row",staticStyle:{"margin-top":"10px"}},[e.windSelected?a("div",{staticClass:"col-md-12"},[a("ReactDataGrid",{key:"FuelCost",attrs:{enableCellSelect:!0,enableDragAndDrop:!0,columns:e.columnsFuelCost,rowsCount:e.countRowsHorizont(),minHeight:500,";":""},on:{rowGetter:e.rowGetterFuelCost,onRowClick:e.clickedRowHorizon,onGridRowsUpdated:e.handleFuelUpdated}})],1):e._e(),e._v(" "),e.windSelected?e._e():a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"col-md-12"},[a("center",[a("h4",[e._v("Debes seleccionar una planta para comenzar.")]),e._v(" "),a("img",{attrs:{src:"/static/layers.png"}})])],1)])])])},staticRenderFns:[]},me=a("VU/8")(de,ue,!1,null,null,null).exports,pe=a("pFYg"),ge=a.n(pe),he={name:"Blocks",mounted:function(){if(!this.$auth.check(["blocks"]))return this.$message({message:"No tienes permisos",type:"error"}),void this.$parent.goToCategory(1)},props:["data"],computed:{rows:function(e){return this.mapBlocks(this.data.blocks)}},components:{ReactDataGrid:u.a},methods:{validBlocks:function(){var e=!0;if(this.data.blocks.length>1){var t=0;this.data.blocks.forEach(function(e){t+=e.duration})}return 1!==t&&(e=!1),e},changeRestrictionValue:function(e){this.selectedRow.storage_restrictions=e?"SI":"NO",this.handleGridRowsUpdated({fromRow:this.selectedRowKey,toRow:this.selectedRowKey}),this.$forceUpdate()},mapBlocks:function(e){return l.a.map(e,function(e){return{id:e.id,name:e.name,participation:e.participation,duration:e.duration,storage_restrictions:e.storage_restrictions?"SI":"NO",process_id:e.process_id}})},addRow:function(){var e=this;if(l.a.each(this.rows,function(e){e.duration=parseFloat(e.duration)}),l.a.sumBy(this.rows,"duration")>=1)return this.$message({message:"No se puede agregar registros porque la suma de valores de la duración no puede ser mayor a 1",type:"warning"}),!1;this.selectedRow=null,c.a.createBlock({name:this.nameBlock+(parseInt(this.rows.length,10)+1),duration:0,participation:0,storage_restrictions:!1,process_id:this.$route.params.id}).then(function(t){200===t.status?e.$bus.emit("getModulesData",[{url:"getBlocks",reference:"blocks"}]):e.$message({message:"Error al agregar fila.",type:"error"})}).catch(function(){console.log("error")})},deleteRow:function(){var e=this,t=l.a.last(this.rows);c.a.deleteBlock(t.id).then(function(a){l.a.isNil(a.response)?(e.rows.splice(e.rows.indexOf(t),1),e.selectedRow=null,e.$bus.emit("getModulesData",[{url:"getBlocks",reference:"blocks"}]),e.$message({message:"Bloque eliminado correctamente",type:"success"})):e.$message({message:"No se ha podido eliminar el registro, esta siendo usado en otra dependencia.",type:"error"})}).catch(function(e){console.log(e)})},clickedRow:function(e,t,a){this.selectedRow=this.rows[e],this.selectedRowKey=e,"storage_restrictions"===a.key&&(this.storageRestrictionValue="SI"===this.selectedRow.storage_restrictions,console.log(this.storageRestrictionValue),this.dialogEditVisible=!0)},download:function(){[].unshift(["ID","name"]),c.a.donwloadExcelAreas(this.$route.params.id).then(function(e){var t=document.createElement("a");t.href=e.data.file,t.download=e.data.name,document.body.appendChild(t),t.click(),t.remove()})},rowGetter:function(e){return this.rows[e]},handleGridRowsUpdated:function(e){var t=this;if(l.a.isNil(e.updated.duration)||!isNaN(e.updated.duration)){if(!l.a.isNil(e.updated.participation)){if(e.updated.participation<0||e.updated.participation>1)return void this.$message.error("El valor debe de estar entre cero y uno.");if(isNaN(e.updated.participation))return void this.$message.error("La participación no es un valor valido.")}this.dialogEditVisible=!1;for(var a=function(a){var i=t.rows[a],s=l.a.extend(i,e.updated);if(l.a.each(t.rows,function(e){e.duration=parseFloat(e.duration)}),l.a.sumBy(t.rows,"duration")>1)return s.duration=0,t.$message.error("La suma total no puede ser superior a 1. El valor no sera cambiado"),{v:void 0};c.a.updateBlock(s.id,{duration:s.duration,id:s.id,name:s.name,participation:s.participation,process_id:s.process_id,storage_restrictions:"SI"===s.storage_restrictions}).then(function(e){200===e.status?(t.rows[a]=s,t.$bus.emit("getModulesData",[{url:"getBlocks",reference:"blocks"}])):(t.rows[a].name="Inserte nuevo valor",t.$forceUpdate(),t.$message({message:"Error al modificar",type:"error"}))}).catch(function(e){console.log(e)})},i=e.fromRow;i<=e.toRow;i++){var s=a(i);if("object"===(void 0===s?"undefined":ge()(s)))return s.v}}else this.$message.error("La duración no es un valor valido.")},countRows:function(){return this.rows.length}},data:function(){return{dialogCreateVisible:!1,storageRestrictionValue:!1,dialogEditVisible:!1,nameBlock:"Bloque ",uploadPath:window.pathBase+":"+window.portBaseLaravel+"/api/v1/bloques/importExcel/"+this.$route.params.id,selectedRow:null,columns:[{key:"name",resizable:!0,name:"Bloque",editable:!0},{key:"duration",name:"Duracion",resizable:!0,editable:!0},{key:"participation",resizable:!0,name:"Participación por curva de carga (%)",editable:!0},{key:"storage_restrictions",resizable:!0,name:"Restricción de almacenamiento",editable:!0}]}}},fe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{visible:e.dialogEditVisible,title:"¿Desea ingresar restricciones en la operación del almacenamiento?",width:"35%"},on:{"update:visible":function(t){e.dialogEditVisible=t}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group required"},[a("el-switch",{attrs:{"active-text":"Activar","inactive-text":"Desactivar","active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:e.changeRestrictionValue},model:{value:e.storageRestrictionValue,callback:function(t){e.storageRestrictionValue=t},expression:"storageRestrictionValue"}})],1)])])]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12",staticStyle:{"margin-bottom":"10px"}},[a("button",{staticClass:"btn btn-sm btn-warning float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.addRow()}}},[a("i",{staticClass:"icon plus"}),e._v("Agregar")]),e._v(" "),e.rows.length>0?a("button",{staticClass:"btn btn-sm btn-danger float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.deleteRow()}}},[a("i",{staticClass:"icon trash"}),e._v("Reducir bloques (-1)")]):e._e()])]),e._v(" "),this.rows.length>0?a("div",[e.validBlocks()?e._e():a("el-alert",{staticStyle:{"margin-bottom":"10px"},attrs:{title:"La suma de las duraciones de los bloques deben de ser igual a 1.",type:"warning"}}),e._v(" "),a("ReactDataGrid",{key:"Areas",attrs:{enableCellSelect:!0,enableDragAndDrop:!0,columns:e.columns,rowsCount:e.countRows(),minHeight:500,";":""},on:{rowGetter:e.rowGetter,onRowsSelected:function(t){e.onRowsSelected()},onRowClick:e.clickedRow,onGridRowsUpdated:e.handleGridRowsUpdated}})],1):e._e(),e._v(" "),this.rows.length<1?a("div",[a("center",[a("h2",[e._v("No existen bloques")]),e._v(" "),a("img",{staticStyle:{"margin-bottom":"10px"},attrs:{width:"100",src:"/static/block.png"}}),e._v(" "),a("hr"),e._v(" "),a("button",{staticClass:"btn btn-lg btn-primary",on:{click:function(t){e.addRow()}}},[a("i",{staticClass:"icon add"}),e._v("Agregar nuevo")])])],1):e._e()],1)},staticRenderFns:[]},ve=a("VU/8")(he,fe,!1,null,null,null).exports,_e={name:"lines",mounted:function(){var e=this;if(!this.$auth.check(["lines"]))return this.$message({message:"No tienes permisos",type:"error"}),void this.$parent.goToCategory(1);this.data.areas.length<2&&this.$alert("Mínimo dos areas, vas a ser redirigido al modulo de áreas.","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"error"}).then(function(){e.$parent.goToCategory(14)}),this.columns=this.filterHiddenColumns(),this.onPropsChanged()},watch:{data:{handler:function(e,t){this.onPropsChanged()},deep:!0,immediate:!0}},props:["data"],components:{ReactDataGrid:u.a},methods:{filterHiddenColumns:function(){return l.a.filter(this.allColumns,{display:!0})},changeSelect:function(e){if(("b_final"===e.originalForeign||"a_initial"===e.originalForeign)&&this.selectedRow.a_initial&&this.selectedRow.b_final){var t=l.a.find(this.data.lines,{a_initial:this.selectedRow.a_initial,b_final:this.selectedRow.b_final});if(t&&t.id!==this.selectedRow.b_final){console.log("entro 1");var a=l.a.find(this.data.lines,{a_initial:this.selectedRow.b_final,b_final:this.selectedRow.a_initial});console.log(a)}t&&t.id!==this.selectedRow.id&&(this.selectedRow.b_final=null,this.selectedRow.a_initial=null,this.$message({message:"La linea ya esta registrada.",type:"error"})),a&&a.id!==this.selectedRow.id&&(this.selectedRow.b_final=null,this.selectedRow.a_initial=null,this.$message({message:"La linea ya esta registrada.",type:"error"}))}},onPropsChanged:function(e){var t=this;this.rows=l.a.clone(this.data.lines,!0),this.rows.length<1&&(this.loading=!1),l.a.each(this.rows,function(e,a){l.a.isNil(e.initial)?e.area1="No asociado":e.area1=e.initial.name,l.a.isNil(e.final)?e.area2="No asociado":e.area2=e.final.name,a===t.rows.length-1&&setTimeout(function(){t.loading=!1},2e3)})},getSelectValues:function(e){var t=this;if("horizonts"===e.entity){var a=[];return l.a.each(this.data.horizonts,function(e){a.push({id:e.id,name:t.formatMonthDate(e.period),period:t.formatMonthDate(e.period)})}),a}if("areas"===e.entity){if("b_final"===e.originalForeign){var i=[];return this.data[e.entity].forEach(function(e){e.id!==t.selectedRow.a_initial&&i.push(e)}),i}if("a_initial"===e.originalForeign){i=[];return this.data[e.entity].forEach(function(e){e.id!==t.selectedRow.b_final&&i.push(e)}),i}return this.data[e.entity]}},getCounter:function(){return this.rows.length},update:function(){var e=this;c.a.updateLines(this.selectedRow.id,this.selectedRow).then(function(){e.$message({message:"Notificación: Acción realizada correctamente",type:"success"}),e.$bus.emit("getModulesData",[{url:"getLines",reference:"lines"}]),e.visibleTable=!0})},isDisabledField:function(e){return"id"===e},successUpload:function(e){this.rows=e,this.rows.splice(0,0),this.showUpload=!1,this.$message({message:"Notificación: Importación realizada correctamente",type:"success"})},addRow:function(){var e=this;this.selectedRow=null,c.a.createLines({a_initial:null,b_final:null,a_to_b:0,b_to_a:0,efficiency:0,resistence:0,reactance:0,process_id:this.$route.params.id}).then(function(t){e.$bus.emit("getModulesData",[{url:"getLines",reference:"lines"}])})},deleteRow:function(e){var t=this;c.a.deleteLines(e.id).then(function(){t.rows.splice(t.rows.indexOf(e),1),t.selectedRow=null,t.visibleTable=!0,t.$message({message:"El registro se ha eliminado",type:"success"})})},clickedRow:function(e){var t=this;this.$confirm("¿Quieres entrar al detalle de la configuración?","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"warning"}).then(function(){t.visibleTable=!1,t.selectedRow=t.rows[e]})},rowGetter:function(e){return this.rows[e]}},data:function(){return{lineName:"",dialogCreateVisible:!1,loading:!0,visibleTable:!0,uploadPath:window.pathBase+":"+window.portBaseLaravel+"/api/v1/thermalConfig/importExcel/"+this.$route.params.id,showUpload:!1,selectedRow:null,rows:[],columns:[],allColumns:[{key:"area1",originalForeign:"a_initial",name:"Desde",type:"select",entity:"areas",resizable:!0,display:!0},{key:"area2",originalForeign:"b_final",name:"Hacia",type:"select",entity:"areas",resizable:!0,display:!0},{key:"efficiency",name:"Eficiencia (max:1, min:0)",unit:"%",max:1,min:0,width:80,type:"numeric",resizable:!0,display:!1},{key:"a_to_b",name:"Capacidad desde-hacia",unit:"MW",width:80,type:"numeric",resizable:!0,display:!1},{key:"b_to_a",name:"Capacidad hacia-desde",unit:"MW",width:80,type:"numeric",resizable:!0,display:!1},{key:"resistence",name:"Resistencia",unit:"Ohm",type:"numeric",resizable:!0,display:!1},{key:"reactance",name:"Reactancia",unit:"X",type:"numeric",resizable:!0,display:!1}]}}},Ce={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"Tienes que esperar un poco..."}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12",staticStyle:{"margin-bottom":"10px"}},[!e.showUpload&&e.visibleTable?a("button",{staticClass:"btn btn-sm btn-warning float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.addRow()}}},[a("i",{staticClass:"icon plus"}),e._v("Agregar")]):e._e(),e._v(" "),e.selectedRow&&!e.showUpload?a("button",{staticClass:"btn btn-sm btn-danger float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.deleteRow(e.selectedRow)}}},[a("i",{staticClass:"icon trash"}),e._v("Eliminar seleccionado (id:"+e._s(e.selectedRow.id)+")")]):e._e()])]),e._v(" "),e.showUpload||!e.visibleTable||e.loading?e._e():a("div",[a("el-alert",{staticStyle:{"margin-bottom":"20px"},attrs:{title:"Para editar las propiedades de la planta selecciona un registro.",type:"warning","show-icon":""}}),e._v(" "),a("ReactDataGrid",{key:"thermalConfig",attrs:{enableCellSelect:!0,columns:e.columns,rowsCount:e.getCounter(),minHeight:500},on:{rowGetter:e.rowGetter,onRowClick:e.clickedRow}})],1),e._v(" "),e.showUpload||e.visibleTable?e._e():a("div",{staticClass:"row"},[e._l(e.allColumns,function(t){return a("div",{staticClass:"col-md-6"},["text"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name)+"\n          "),t.unit?a("el-tag",{attrs:{type:"primary",size:"small"}},[e._v(e._s(t.unit))]):e._e()],1),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedRow[t.key],expression:"selectedRow[column.key]"}],staticClass:"form-control",attrs:{disabled:e.isDisabledField(t.key),type:"text",name:"name",placeholder:t.key},domProps:{value:e.selectedRow[t.key]},on:{input:function(a){a.target.composing||e.$set(e.selectedRow,t.key,a.target.value)}}})]):e._e(),e._v(" "),"numeric"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name)+"\n          "),t.unit?a("el-tag",{attrs:{type:"primary",size:"small"}},[e._v(e._s(t.unit))]):e._e()],1),e._v(" "),a("vue-numeric",{staticClass:"form-control",attrs:{min:t.min,max:t.max,precision:t.precision,"decimal-separator":t.decimalSeparator,"thousand-separator":t.thousandSeparator},model:{value:e.selectedRow[t.key],callback:function(a){e.$set(e.selectedRow,t.key,a)},expression:"selectedRow[column.key]"}})],1):e._e(),e._v(" "),"select"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name)+"\n          "),t.unit?a("el-tag",{attrs:{type:"primary",size:"small"}},[e._v(e._s(t.unit))]):e._e()],1),e._v(" "),a("el-select",{staticStyle:{width:"100%"},on:{change:function(a){e.changeSelect(t)}},model:{value:e.selectedRow[t.originalForeign],callback:function(a){e.$set(e.selectedRow,t.originalForeign,a)},expression:"selectedRow[column.originalForeign]"}},e._l(e.getSelectValues(t),function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1):e._e()])}),e._v(" "),a("div",{staticClass:"col-md-12"},[a("button",{staticClass:"btn btn-dark float-right",on:{click:function(t){e.visibleTable=!0}}},[a("i",{staticClass:"icon cancel"}),e._v("Cancelar ")]),e._v(" "),a("button",{staticClass:"btn btn-primary float-right",staticStyle:{"margin-right":"10px"},on:{click:e.update}},[a("i",{staticClass:"icon save"}),e._v("Actualizar\n      ")])])],2),e._v(" "),e.showUpload?a("div",{staticStyle:{"margin-top":"100px"}},[a("center",[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"","on-success":e.successUpload,action:e.uploadPath,multiple:""}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("Suelta tu archivo aquí o "),a("em",[e._v("haz clic para cargar")])]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("Solo archivos excel")])]),e._v(" "),a("hr"),e._v(" "),a("button",{staticClass:"btn btn-outline-danger btn-lg",on:{click:function(t){e.showUpload=!1}}},[e._v("\n        Cancelar subida")])],1)],1):e._e()])},staticRenderFns:[]},be=a("VU/8")(_e,Ce,!1,null,null,null).exports,we={name:"linesExpansion",mounted:function(){var e=this;if(!this.$auth.check(["linesExpansions"]))return this.$message({message:"No tienes permisos",type:"error"}),void this.$parent.goToCategory(1);this.data.horizonts.length<1&&this.$alert("No hay horizontes definidos, vas a ser redirigido al modulo de demanda.","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"error"}).then(function(){e.$parent.goToCategory(2)}),this.data.lines.length<1&&this.$alert("No hay lineas, vas a ser redirigido al modulo de redes de expansión.","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"error"}).then(function(){e.$parent.goToCategory(27)}),this.columns=this.filterHiddenColumns(),this.onPropsChanged()},watch:{data:{handler:function(e,t){this.onPropsChanged()},deep:!0,immediate:!0}},props:["data"],components:{ReactDataGrid:u.a},methods:(s={changeSelect:function(e){if(("a_final"===e.originalForeign||"a_initial"===e.originalForeign)&&this.selectedRow.a_initial&&this.selectedRow.a_final){var t=l.a.find(this.data.linesExpansion,{a_initial:this.selectedRow.a_initial,a_final:this.selectedRow.a_final});if(t&&t.id!==this.selectedRow.a_final)var a=l.a.find(this.data.linesExpansion,{a_initial:this.selectedRow.a_final,a_final:this.selectedRow.a_initial});t&&t.id!==this.selectedRow.id&&(this.selectedRow.a_final=null,this.selectedRow.a_initial=null,this.$message({message:"La linea ya esta registrada.",type:"error"})),a&&a.id!==this.selectedRow.id&&(this.selectedRow.a_final=null,this.selectedRow.a_initial=null,this.$message({message:"La linea ya esta registrada.",type:"error"}))}},formatMonthDate:function(e){var t=new Date(e);e=t.getUTCMonth()+1,t.getUTCDate();return t.getUTCFullYear()+"/"+e},getSelectValues:function(e){var t=this;if("horizonts"===e){var a=[];return l.a.each(this.data.horizonts,function(e){a.push({id:e.id,name:t.formatMonthDate(e.period),period:t.formatMonthDate(e.period)})}),a}return this.data[e]},showModal:function(){this.dialogCreateVisible=!0}},f()(s,"formatMonthDate",function(e){var t=new Date(e);e=t.getUTCMonth()+1,t.getUTCDate();return t.getUTCFullYear()+"/"+e}),f()(s,"filterHiddenColumns",function(){return l.a.filter(this.allColumns,{display:!0})}),f()(s,"onPropsChanged",function(){var e=this;this.rows=l.a.clone(this.data.linesExpansion,!0),this.rows.length<1&&(this.loading=!1),l.a.each(this.rows,function(t,a){l.a.isNil(t.initial)?t.area1="No asociado":t.area1=t.initial.name,l.a.isNil(t.final)?t.area2="No asociado":t.area2=t.final.name,a===e.rows.length-1&&setTimeout(function(){e.loading=!1},2e3)}),l.a.each(this.rows,function(t,a){t.modifcationFormatted=e.formatMonthDate(t.horizont.period),a===e.rows.length-1&&setTimeout(function(){e.loading=!1},2e3)})}),f()(s,"getCounter",function(){return this.rows.length}),f()(s,"getLabel",function(e){return l.a.isNil(e.initial)?"NO ASIGNADO - NO ASIGNADO":e.initial.name+"-"+e.final.name}),f()(s,"update",function(){var e=this;c.a.updateLinesExpansion(this.selectedRow.id,{id:this.selectedRow.id,stage:this.selectedRow.stage,line_id:this.selectedRow.line_id,efficiency:this.selectedRow.efficiency,resistence:this.selectedRow.resistence,reactance:this.selectedRow.reactance,a_b:this.selectedRow.id,a_final:this.selectedRow.a_final,a_initial:this.selectedRow.a_initial,b_ai:this.selectedRow.b_ai,process_id:this.selectedRow.process_id}).then(function(){e.$message({message:"Notificación: Acción realizada correctamente",type:"success"}),e.$bus.emit("getModulesData",[{url:"getLinesExpansion",reference:"linesExpansion"}]),e.visibleTable=!0})}),f()(s,"isDisabledField",function(e){return"id"===e}),f()(s,"addRow",function(){var e=this;this.dialogCreateVisible=!1,this.selectedRow=null,c.a.createLinesExpansion({stage:this.selectedHorizont,line_id:this.selectedLineConfig,efficiency:0,resistence:0,reactance:0,a_b:0,a_final:null,a_initial:null,b_ai:0,process_id:this.$route.params.id}).then(function(t){e.$bus.emit("getModulesData",[{url:"getLinesExpansion",reference:"linesExpansion"}])})}),f()(s,"deleteRow",function(e){var t=this;c.a.deleteLinesExpansion(e.id).then(function(){t.rows.splice(t.rows.indexOf(e),1),t.selectedRow=null,t.visibleTable=!0,t.$bus.emit("getModulesData",[{url:"getLinesExpansion",reference:"linesExpansion"}]),t.$message({message:"El registro se ha eliminado",type:"success"})})}),f()(s,"clickedRow",function(e){var t=this;this.$confirm("¿Quieres entrar al detalle de la configuración?","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"warning"}).then(function(){t.visibleTable=!1,t.selectedRow=t.rows[e]})}),f()(s,"rowGetter",function(e){return this.rows[e]}),s),data:function(){return{selectedHorizont:null,dialogCreateVisible:!1,selectedLineConfigMonth:null,selectedLineConfig:null,loading:!0,visibleTable:!0,uploadPath:window.pathBase+":"+window.portBaseLaravel+"/api/v1/hydroConfig/importExcel/"+this.$route.params.id,selectedRow:null,rows:[],columns:[],allColumns:[{key:"area1",originalForeign:"a_initial",name:"Desde ",type:"select",entity:"areas",resizable:!0,display:!0,displayInForm:!0},{key:"area2",originalForeign:"a_final",name:"Hacia",type:"select",entity:"areas",resizable:!0,display:!0,displayInForm:!0},{key:"modifcationFormatted",name:"Modificación",unit:"%",type:"text",resizable:!0,display:!0,displayInForm:!1},{key:"stage",originalForeign:"stage",name:"Modificación",type:"select",keySelect:"period",entity:"horizonts",resizable:!0,display:!1,displayInForm:!0},{key:"efficiency",name:"Eficiencia max:2, min: 0",unit:"%",max:2,min:0,width:80,type:"numeric",resizable:!0,display:!1,displayInForm:!0},{key:"a_b",name:"Capacidad desde-hacia",unit:"MW",width:80,type:"numeric",resizable:!0,display:!1,displayInForm:!0},{key:"b_ai",name:"Capacidad hacia-desde",unit:"MW",width:80,type:"numeric",resizable:!0,display:!1,displayInForm:!0},{key:"resistence",name:"Resistencia",unit:"Ohm",type:"numeric",resizable:!0,display:!1,displayInForm:!0},{key:"reactance",name:"Reactancia",unit:"X",type:"numeric",resizable:!0,display:!1,displayInForm:!0}]}}},ye={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"Tienes que esperar un poco..."}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12",staticStyle:{"margin-bottom":"10px"}},[e.visibleTable?a("button",{staticClass:"btn btn-sm btn-warning float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.showModal()}}},[a("i",{staticClass:"icon plus"}),e._v("Agregar")]):e._e(),e._v(" "),e.selectedRow?a("button",{staticClass:"btn btn-sm btn-danger float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.deleteRow(e.selectedRow)}}},[a("i",{staticClass:"icon trash"}),e._v("Eliminar seleccionado (id:"+e._s(e.selectedRow.id)+")")]):e._e()])]),e._v(" "),e.visibleTable&&!e.loading?a("div",[e.rows.length>0?a("el-alert",{staticStyle:{"margin-bottom":"20px"},attrs:{title:"Para editar las propiedades de la planta selecciona un registro.",type:"warning","show-icon":""}}):e._e(),e._v(" "),e.rows.length>0?a("div",[a("ReactDataGrid",{key:"hydroConfig",attrs:{enableCellSelect:!0,columns:e.columns,rowsCount:e.getCounter(),minHeight:500},on:{rowGetter:e.rowGetter,onRowClick:e.clickedRow}})],1):a("div",[a("center",[a("h2",[e._v("No existen expansiones")]),e._v(" "),a("img",{attrs:{width:"200",src:"/static/expansion.svg"}}),e._v(" "),a("hr"),e._v(" "),a("button",{staticClass:"btn btn-lg btn-primary",on:{click:function(t){e.showModal()}}},[a("i",{staticClass:"icon add"}),e._v("Agregar nueva")])])],1)],1):e._e(),e._v(" "),e.visibleTable?e._e():a("div",{staticClass:"row"},[e._l(e.allColumns,function(t){return t.displayInForm?a("div",{staticClass:"col-md-6"},["text"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name))]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedRow[t.key],expression:"selectedRow[column.key]"}],staticClass:"form-control",attrs:{disabled:e.isDisabledField(t.key),type:"text",name:"name",placeholder:"Ingrese valor"},domProps:{value:e.selectedRow[t.key]},on:{input:function(a){a.target.composing||e.$set(e.selectedRow,t.key,a.target.value)}}})]):e._e(),e._v(" "),"numeric"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name)+"\n          "),t.unit?a("el-tag",{attrs:{type:"primary",size:"small"}},[e._v(e._s(t.unit))]):e._e()],1),e._v(" "),a("vue-numeric",{staticClass:"form-control",attrs:{min:t.min,max:t.max,precision:t.precision,"decimal-separator":t.decimalSeparator,"thousand-separator":t.thousandSeparator},model:{value:e.selectedRow[t.key],callback:function(a){e.$set(e.selectedRow,t.key,a)},expression:"selectedRow[column.key]"}})],1):e._e(),e._v(" "),"month"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name))]),e._v(" "),a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"month",placeholder:"Seleccione"},model:{value:e.selectedRow[t.key],callback:function(a){e.$set(e.selectedRow,t.key,a)},expression:"selectedRow[column.key]"}})],1):e._e(),e._v(" "),"select"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name)+"\n          "),t.unit?a("el-tag",{attrs:{type:"primary",size:"small"}},[e._v(e._s(t.unit))]):e._e()],1),e._v(" "),a("el-select",{staticStyle:{width:"100%"},on:{change:function(a){e.changeSelect(t)}},model:{value:e.selectedRow[t.originalForeign],callback:function(a){e.$set(e.selectedRow,t.originalForeign,a)},expression:"selectedRow[column.originalForeign]"}},e._l(e.getSelectValues(t.entity),function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1):e._e()]):e._e()}),e._v(" "),a("div",{staticClass:"col-md-12"},[a("button",{staticClass:"btn btn-dark float-right",on:{click:function(t){e.visibleTable=!0}}},[a("i",{staticClass:"icon cancel"}),e._v("Cancelar ")]),e._v(" "),a("button",{staticClass:"btn btn-primary float-right",staticStyle:{"margin-right":"10px"},on:{click:e.update}},[a("i",{staticClass:"icon save"}),e._v("Actualizar\n      ")])])],2),e._v(" "),a("el-dialog",{attrs:{title:"Nueva expansión",visible:e.dialogCreateVisible,width:"30%"},on:{"update:visible":function(t){e.dialogCreateVisible=t}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Seleccione configuración a expandir ")]),e._v(" "),a("el-select",{staticStyle:{width:"100%"},model:{value:e.selectedLineConfig,callback:function(t){e.selectedLineConfig=t},expression:"selectedLineConfig"}},e._l(e.data.lines,function(t){return a("el-option",{key:t.id,attrs:{label:e.getLabel(t),value:t.id}})}))],1)])]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("label",{staticClass:"control-label"},[e._v("Fecha Modificación")]),e._v(" "),a("div",{staticClass:"form-group required"},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.selectedHorizont,callback:function(t){e.selectedHorizont=t},expression:"selectedHorizont"}},e._l(e.getSelectValues("horizonts"),function(e){return a("el-option",{key:e.id,attrs:{label:e.period,value:e.id}})}))],1)])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogCreateVisible=!1}}},[e._v("Cancelar")]),e._v(" "),a("el-button",{attrs:{disabled:!e.selectedLineConfig&&e.selectedLineConfigMonth,type:"primary"},on:{click:function(t){e.addRow()}}},[e._v("Continuar")])],1)])],1)},staticRenderFns:[]},xe=a("VU/8")(we,ye,!1,null,null,null).exports,Re={name:"storageConfig",mounted:function(){var e=this;if(!this.$auth.check(["storageConfigs"]))return this.$message({message:"No tienes permisos",type:"error"}),void this.$parent.goToCategory(1);this.data.areas.length<1&&this.$alert("No existen áreas, vas a ser redirigido al modulo de áreas.","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"error"}).then(function(){e.$parent.goToCategory(14)}),this.columns=this.filterHiddenColumns(),this.onPropsChanged()},watch:{data:{handler:function(e,t){this.onPropsChanged()},deep:!0,immediate:!0}},props:["data"],components:{ReactDataGrid:u.a},methods:{getLabelSelect:function(e,t){return"entrance_stage"===e.key?t.description:"initial_storage_stage"===e.key?this.formatMonthDate(t.period):t[e.keyName]},formatMonthDate:function(e){var t=new Date(e);e=t.getUTCMonth()+1,t.getUTCDate();return t.getUTCFullYear()+"/"+e},filterHiddenColumns:function(){return l.a.filter(this.allColumns,{display:!0})},onPropsChanged:function(e){var t=this;this.rows=l.a.clone(this.data.storageConfig,!0),this.rows.length<1&&(this.loading=!1),l.a.each(this.rows,function(e,a){e.area=e.areas.name,e.entrance_stage=e.entrance_stages.name,a===t.rows.length-1&&setTimeout(function(){t.loading=!1},2e3)})},getCounter:function(){return this.rows.length},update:function(){var e=this;c.a.updateStorageConfig(this.selectedRow.id,this.selectedRow).then(function(){e.$message({message:"Notificación: Acción realizada correctamente",type:"success"}),e.$bus.emit("getModulesData",[{url:"getStorageConfig",reference:"storageConfig"}]),e.selectedRow=null,e.visibleTable=!0})},isDisabledField:function(e){return"id"===e},successUpload:function(e){this.rows=e,this.rows.splice(0,0),this.showUpload=!1,this.$message({message:"Notificación: Importación realizada correctamente",type:"success"})},addRow:function(){var e=this;this.dialogCreateVisible=!1,this.selectedRow=null,c.a.createStorageConfig({name:this.storageConfigName,area_id:this.data.areas[0].id,entrance_stage_id:this.data.entranceStages[0].id,min_storage:0,max_storage:0,capacity:0,process_id:this.$route.params.id,efficiency:0,max_outflow:0,portfolio:"SIN PORTAFOLIO",power_rate:0,linked:0,initial_storage:0,forced_unavailability:0,historic_unavailability:0}).then(function(t){e.$bus.emit("getModulesData",[{url:"getStorageConfig",reference:"storageConfig"}])})},deleteRow:function(e){var t=this;c.a.deleteStorageConfig(e.id).then(function(){t.rows.splice(t.rows.indexOf(e),1),t.selectedRow=null,t.visibleTable=!0,t.$message({message:"El registro se ha eliminado",type:"success"})})},clickedRow:function(e){var t=this;this.$confirm("¿Quieres entrar al detalle de la configuración?","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"warning"}).then(function(){t.visibleTable=!1,t.selectedRow=t.rows[e]})},rowGetter:function(e){return this.rows[e]}},data:function(){return{storageConfigName:"",dialogCreateVisible:!1,loading:!0,visibleTable:!0,uploadPath:window.pathBase+":"+window.portBaseLaravel+"/api/v1/thermalConfig/importExcel/"+this.$route.params.id,showUpload:!1,selectedRow:null,rows:[],columns:[],allColumns:[{key:"name",name:"Nombre",width:200,type:"text",resizable:!0,display:!0},{key:"area",keyName:"name",originalForeign:"area_id",name:"Area",type:"select",entity:"areas",resizable:!0,display:!0},{key:"min_storage",name:"Almacenamiento mínimo (min:0, max:1)",unit:"pu",min:0,max:1,width:80,precision:6,decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"max_storage",name:"Almacenamiento máximo (min:0, max:1)",unit:"pu",min:0,max:1,width:80,precision:6,decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"capacity",name:"Capacidad",unit:"MWh",width:80,precision:5,decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"efficiency",name:"Eficiencia",unit:"%",width:80,precision:6,decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"max_outflow",name:"Descarga máxima",unit:"MWh/s",width:80,precision:5,decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"portfolio",name:"Portafolio",width:80,type:"text",resizable:!0,display:!1},{key:"power_rate",name:"Potencia",unit:"MW",width:80,precision:5,decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"linked",name:"Enlace",width:80,precision:6,decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"initial_storage",name:"Almacenamiento inicial (max:1, min:0)",unit:"pu",width:80,precision:6,max:1,min:0,decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"forced_unavailability",name:"Indisponibilidad forzada",precision:6,unit:"%",decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"historic_unavailability",name:"Indisponibilidad historica",precision:6,unit:"%",decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"entrance_stage",type:"select",originalForeign:"entrance_stage_id",entity:"entranceStages",name:"Etapa de entrada",resizable:!0,display:!1}]}}},Se={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"Tienes que esperar un poco..."}},[a("el-dialog",{attrs:{title:"Nuevo",visible:e.dialogCreateVisible,width:"30%"},on:{"update:visible":function(t){e.dialogCreateVisible=t}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("label",{staticClass:"control-label"},[e._v("Nombre de el sistema de almacenamiento")]),e._v(" "),a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.storageConfigName,expression:"storageConfigName"}],staticClass:"form-control",attrs:{type:"text",name:"name",placeholder:"Ingrese el sistema de almacenamiento"},domProps:{value:e.storageConfigName},on:{input:function(t){t.target.composing||(e.storageConfigName=t.target.value)}}})])])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogCreateVisible=!1}}},[e._v("Cancelar")]),e._v(" "),a("el-button",{attrs:{disabled:!e.storageConfigName,type:"primary"},on:{click:function(t){e.addRow()}}},[e._v("Continuar")])],1)]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12",staticStyle:{"margin-bottom":"10px"}},[!e.showUpload&&e.visibleTable?a("button",{staticClass:"btn btn-sm btn-warning float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.dialogCreateVisible=!0}}},[a("i",{staticClass:"icon plus"}),e._v("Agregar")]):e._e(),e._v(" "),e.selectedRow&&!e.showUpload?a("button",{staticClass:"btn btn-sm btn-danger float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.deleteRow(e.selectedRow)}}},[a("i",{staticClass:"icon trash"}),e._v("Eliminar seleccionado (id:"+e._s(e.selectedRow.id)+")")]):e._e()])]),e._v(" "),e.showUpload||!e.visibleTable||e.loading?e._e():a("div",[a("el-alert",{staticStyle:{"margin-bottom":"20px"},attrs:{title:"Para editar las propiedades de la planta selecciona un registro.",type:"warning","show-icon":""}}),e._v(" "),a("ReactDataGrid",{key:"storageConfig",attrs:{enableCellSelect:!0,columns:e.columns,rowsCount:e.getCounter(),minHeight:500},on:{rowGetter:e.rowGetter,onRowClick:e.clickedRow}})],1),e._v(" "),a("div",{staticClass:"row"},[e.selectedRow&&!e.visibleTable?a("div",{staticClass:"col-md-12"},[e.selectedRow.min_storage>e.selectedRow.max_storage?a("el-alert",{staticStyle:{"margin-bottom":"10px"},attrs:{title:"El almacenamiento mínimo debe de ser menor al almacenamiento máximo.",type:"warning"}}):e._e(),e._v(" "),e.selectedRow.initial_storage<e.selectedRow.min_storage?a("el-alert",{staticStyle:{"margin-bottom":"10px"},attrs:{title:"El almacenamiento inicial debe de ser mayor o igual al almacenamiento mínimo.",type:"warning"}}):e._e(),e._v(" "),e.selectedRow.initial_storage>e.selectedRow.max_storage?a("el-alert",{staticStyle:{"margin-bottom":"10px"},attrs:{title:"El almacenamiento inicial debe de ser menor o igual al almacenamiento máximo.",type:"warning"}}):e._e()],1):e._e()]),e._v(" "),e.showUpload||e.visibleTable?e._e():a("div",{staticClass:"row"},[e._l(e.allColumns,function(t){return a("div",{staticClass:"col-md-6"},["numeric"===t.type?a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name)+"           "),t.unit?a("el-tag",{attrs:{type:"primary",size:"small"}},[e._v(e._s(t.unit))]):e._e()],1),e._v(" "),a("vue-numeric",{staticClass:"form-control",attrs:{max:t.max,min:t.min,precision:t.precision,"decimal-separator":t.decimalSeparator,"thousand-separator":t.thousandSeparator},model:{value:e.selectedRow[t.key],callback:function(a){e.$set(e.selectedRow,t.key,a)},expression:"selectedRow[column.key]"}})],1):e._e(),e._v(" "),"text"===t.type?a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name)+"           "),t.unit?a("el-tag",{attrs:{type:"primary",size:"small"}},[e._v(e._s(t.unit))]):e._e()],1),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedRow[t.key],expression:"selectedRow[column.key]"}],staticClass:"form-control",attrs:{disabled:e.isDisabledField(t.key),type:"text",name:"name",placeholder:t.key},domProps:{value:e.selectedRow[t.key]},on:{input:function(a){a.target.composing||e.$set(e.selectedRow,t.key,a.target.value)}}})]):e._e(),e._v(" "),"select"===t.type?a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name))]),e._v(" "),a("el-select",{staticStyle:{width:"100%"},model:{value:e.selectedRow[t.originalForeign],callback:function(a){e.$set(e.selectedRow,t.originalForeign,a)},expression:"selectedRow[column.originalForeign]"}},e._l(e.data[t.entity],function(i){return a("el-option",{key:i.id,attrs:{label:e.getLabelSelect(t,i),value:i.id}})}))],1):e._e(),e._v(" "),3===e.selectedRow.entrance_stage_id&&"entrance_stage"===t.key?a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label"},[e._v("Ingrese fecha de entrada")]),e._v(" "),a("el-select",{staticStyle:{width:"100%"},model:{value:e.selectedRow.entrance_stage_date,callback:function(t){e.$set(e.selectedRow,"entrance_stage_date",t)},expression:"selectedRow['entrance_stage_date']"}},e._l(e.data.horizonts,function(t){return a("el-option",{key:t.id,attrs:{label:e.formatMonthDate(t.period),value:t.id}})}))],1):e._e()])}),e._v(" "),a("div",{staticClass:"col-md-12"},[a("button",{staticClass:"btn btn-dark float-right",on:{click:function(t){e.visibleTable=!0}}},[a("i",{staticClass:"icon cancel"}),e._v("Cancelar ")]),e._v(" "),a("button",{staticClass:"btn btn-primary float-right",staticStyle:{"margin-right":"10px"},on:{click:e.update}},[a("i",{staticClass:"icon save"}),e._v("Actualizar\n      ")])])],2),e._v(" "),e.showUpload?a("div",{staticStyle:{"margin-top":"100px"}},[a("center",[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"","on-success":e.successUpload,action:e.uploadPath,multiple:""}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("Suelta tu archivo aquí o "),a("em",[e._v("haz clic para cargar")])]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("Solo archivos excel")])]),e._v(" "),a("hr"),e._v(" "),a("button",{staticClass:"btn btn-outline-danger btn-lg",on:{click:function(t){e.showUpload=!1}}},[e._v("\n        Cancelar subida")])],1)],1):e._e()],1)},staticRenderFns:[]},ke=a("VU/8")(Re,Se,!1,null,null,null).exports,$e={name:"storageExpansion",mounted:function(){var e=this;if(!this.$auth.check(["storageExpansions"]))return this.$message({message:"No tienes permisos",type:"error"}),void this.$parent.goToCategory(1);this.data.horizonts.length<1&&this.$alert("No hay horizontes definidos, vas a ser redirigido al modulo de demanda.","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"error"}).then(function(){e.$parent.goToCategory(2)}),this.data.storageConfig.length<1&&this.$alert("No hay plantas definidas, vas a ser redirigido al modulo.","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"error"}).then(function(){e.$parent.goToCategory(25)}),this.columns=this.filterHiddenColumns(),this.onPropsChanged()},watch:{data:{handler:function(e,t){this.onPropsChanged()},deep:!0,immediate:!0}},props:["data"],components:{ReactDataGrid:u.a},methods:{getLabelSelect:function(e,t){return"entrance_stage"===e.key?t.description:"initial_storage_stage"===e.key||"horizont_id"===e.key?this.formatMonthDate(t.period):t[e.keyName]},getSelectValues:function(e){var t=this;if("horizonts"===e){var a=[];return l.a.each(this.data.horizonts,function(e){a.push({id:e.id,name:t.formatMonthDate(e.period),period:t.formatMonthDate(e.period)})}),a}return this.data[e]},showModal:function(){this.dialogCreateVisible=!0},formatMonthDate:function(e){var t=new Date(e);e=t.getUTCMonth()+1,t.getUTCDate();return t.getUTCFullYear()+"/"+e},filterHiddenColumns:function(){return l.a.filter(this.allColumns,{display:!0})},onPropsChanged:function(e){var t=this;this.rows=l.a.clone(this.data.storageExpansion,!0),this.rows.length<1&&(this.loading=!1),l.a.each(this.rows,function(e,a){e.name=e.storage_config.name,e.modifcationFormatted=t.formatMonthDate(e.horizont.period),a===t.rows.length-1&&setTimeout(function(){t.loading=!1},2e3)})},getCounter:function(){return this.rows.length},update:function(){var e=this;c.a.updateStorageExpansion(this.selectedRow.id,{name:this.selectedRow.name,process_id:this.selectedRow.process_id,storage_config_id:this.selectedRow.storage_config_id,horizont_id:this.selectedRow.horizont_id,capacity:this.selectedRow.capacity,efficiency:this.selectedRow.efficiency,max_outflow:this.selectedRow.max_outflow,forced_unavailability:this.selectedRow.forced_unavailability,historic_unavailability:this.selectedRow.historic_unavailability}).then(function(){e.$message({message:"Notificación: Acción realizada correctamente",type:"success"}),e.$bus.emit("getModulesData",[{reference:"storageExpansion",url:"getStorageExpansion"}]),e.visibleTable=!0})},isDisabledField:function(e){return"id"===e},successUpload:function(e){this.rows=e,this.rows.splice(0,0),this.showUpload=!1,this.$message({message:"Notificación: Importación realizada correctamente",type:"success"})},addRow:function(){var e=this;this.dialogCreateVisible=!1,this.selectedRow=null,c.a.createStorageExpansion({storage_config_id:this.selectedStorageExpansion,horizont_id:this.selectedHorizont,capacity:0,efficiency:0,max_outflow:0,forced_unavailability:0,historic_unavailability:0,process_id:this.$route.params.id}).then(function(t){e.$bus.emit("getModulesData",[{reference:"storageExpansion",url:"getStorageExpansion"}])})},deleteRow:function(e){var t=this;c.a.deleteStorageExpansion(e.id).then(function(){t.rows.splice(t.rows.indexOf(e),1),t.selectedRow=null,t.visibleTable=!0,t.$bus.emit("getModulesData",[{reference:"storageExpansion",url:"getStorageExpansion"}]),t.$message({message:"El registro se ha eliminado",type:"success"})})},clickedRow:function(e){var t=this;this.$confirm("¿Quieres entrar al detalle de la configuración?","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"warning"}).then(function(){t.visibleTable=!1,t.selectedRow=t.rows[e]})},rowGetter:function(e){return this.rows[e]},handleGridRowsUpdated:function(e){var t=this;alert(1);for(var a=e.fromRow;a<=e.toRow;a++){var i=this.rows[a],s=l.a.extend(i,e.updated);c.a.updateStorageExpansion(s.id,{}).then(function(){t.$bus.emit("getModulesData",[{reference:"storageExpansion",url:"getStorageExpansion"}])}).catch(function(e){console.log(e)})}}},data:function(){return{selectedHorizont:null,dialogCreateVisible:!1,selectedStorageExpansionMonth:null,selectedStorageExpansion:null,loading:!0,visibleTable:!0,uploadPath:window.pathBase+":"+window.portBaseLaravel+"/api/v1/hydroConfig/importExcel/"+this.$route.params.id,showUpload:!1,selectedRow:null,rows:[],columns:[],allColumns:[{key:"name",originalForeign:"storage_config_id",name:"Nombre",type:"select",entity:"storageConfig",resizable:!0,display:!0,displayInForm:!1},{key:"horizont_id",keyName:"period",originalForeign:"horizont_id",name:"Modificación",type:"select",keySelect:"period",entity:"horizonts",resizable:!0,display:!1,displayInForm:!0},{key:"modifcationFormatted",name:"Modificación",resizable:!0,type:"month",display:!0,displayInForm:!1},{key:"capacity",name:"Capacidad",resizable:!0,unit:"MWh",precision:5,decimalSeparator:".",thousandSeparator:",",type:"numeric",display:!1,displayInForm:!0},{key:"efficiency",name:"Eficiencia",max:1,min:0,unit:"%",resizable:!0,precision:6,decimalSeparator:".",thousandSeparator:",",type:"numeric",display:!1,displayInForm:!0},{key:"max_outflow",name:"Descarga máxima",unit:"MWh/s",resizable:!0,precision:6,decimalSeparator:".",thousandSeparator:",",type:"numeric",display:!1,displayInForm:!0},{key:"forced_unavailability",name:"Indisponibilidad forzada",resizable:!0,unit:"%",precision:6,decimalSeparator:".",thousandSeparator:",",type:"numeric",display:!1,displayInForm:!0},{key:"historic_unavailability",name:"Indisponibilidad historica",resizable:!0,precision:6,unit:"%",decimalSeparator:".",thousandSeparator:",",type:"numeric",display:!1,displayInForm:!0}]}}},De={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"Tienes que esperar un poco..."}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12",staticStyle:{"margin-bottom":"10px"}},[!e.showUpload&&e.visibleTable?a("button",{staticClass:"btn btn-sm btn-warning float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.showModal()}}},[a("i",{staticClass:"icon plus"}),e._v("Agregar")]):e._e(),e._v(" "),e.selectedRow&&!e.showUpload?a("button",{staticClass:"btn btn-sm btn-danger float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.deleteRow(e.selectedRow)}}},[a("i",{staticClass:"icon trash"}),e._v("Eliminar seleccionado (id:"+e._s(e.selectedRow.id)+")")]):e._e()])]),e._v(" "),e.showUpload||!e.visibleTable||e.loading?e._e():a("div",[e.rows.length>0?a("el-alert",{staticStyle:{"margin-bottom":"20px"},attrs:{title:"Para editar las propiedades de la planta selecciona un registro.",type:"warning","show-icon":""}}):e._e(),e._v(" "),e.rows.length>0?a("div",[a("ReactDataGrid",{key:"storageConfig",attrs:{enableCellSelect:!0,columns:e.columns,rowsCount:e.getCounter(),minHeight:500,";":""},on:{rowGetter:e.rowGetter,onRowClick:e.clickedRow}})],1):a("div",[a("center",[a("h2",[e._v("No existen expansiones")]),e._v(" "),a("img",{attrs:{width:"200",src:"/static/expansion.svg"}}),e._v(" "),a("hr"),e._v(" "),a("button",{staticClass:"btn btn-lg btn-primary",on:{click:function(t){e.showModal()}}},[a("i",{staticClass:"icon add"}),e._v("Agregar nueva")])])],1)],1),e._v(" "),e.showUpload||e.visibleTable?e._e():a("div",{staticClass:"row"},[e._l(e.allColumns,function(t){return t.displayInForm?a("div",{staticClass:"col-md-6"},["numeric"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name)+"\n          "),t.unit?a("el-tag",{attrs:{type:"primary",size:"small"}},[e._v(e._s(t.unit))]):e._e()],1),e._v(" "),a("vue-numeric",{staticClass:"form-control",attrs:{max:t.max,min:t.min,precision:t.precision,"decimal-separator":t.decimalSeparator,"thousand-separator":t.thousandSeparator},model:{value:e.selectedRow[t.key],callback:function(a){e.$set(e.selectedRow,t.key,a)},expression:"selectedRow[column.key]"}})],1):e._e(),e._v(" "),"text"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name))]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedRow[t.key],expression:"selectedRow[column.key]"}],staticClass:"form-control",attrs:{disabled:e.isDisabledField(t.key),type:"text",name:"name",placeholder:t.key},domProps:{value:e.selectedRow[t.key]},on:{input:function(a){a.target.composing||e.$set(e.selectedRow,t.key,a.target.value)}}})]):e._e(),e._v(" "),"month"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name))]),e._v(" "),a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"month",placeholder:"Seleccione"},model:{value:e.selectedRow[t.key],callback:function(a){e.$set(e.selectedRow,t.key,a)},expression:"selectedRow[column.key]"}})],1):e._e(),e._v(" "),"select"===t.type?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name))]),e._v(" "),a("el-select",{staticStyle:{width:"100%"},model:{value:e.selectedRow[t.originalForeign],callback:function(a){e.$set(e.selectedRow,t.originalForeign,a)},expression:"selectedRow[column.originalForeign]"}},e._l(e.data[t.entity],function(i){return a("el-option",{key:i.id,attrs:{label:e.getLabelSelect(t,i),value:i.id}})}))],1):e._e()]):e._e()}),e._v(" "),a("div",{staticClass:"col-md-12"},[a("button",{staticClass:"btn btn-dark float-right",on:{click:function(t){e.visibleTable=!0}}},[a("i",{staticClass:"icon cancel"}),e._v("Cancelar ")]),e._v(" "),a("button",{staticClass:"btn btn-primary float-right",staticStyle:{"margin-right":"10px"},on:{click:e.update}},[a("i",{staticClass:"icon save"}),e._v("Actualizar\n      ")])])],2),e._v(" "),e.showUpload?a("div",{staticStyle:{"margin-top":"100px"}},[a("center",[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"","on-success":e.successUpload,action:e.uploadPath,multiple:""}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("Suelta tu archivo aquí o "),a("em",[e._v("haz clic para cargar")])]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("Solo archivos excel")])]),e._v(" "),a("hr"),e._v(" "),a("button",{staticClass:"btn btn-outline-danger btn-lg",on:{click:function(t){e.showUpload=!1}}},[e._v("\n        Cancelar subida")])],1)],1):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"Nueva expansión",visible:e.dialogCreateVisible,width:"30%"},on:{"update:visible":function(t){e.dialogCreateVisible=t}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Seleccione configuración a expandir")]),e._v(" "),a("el-select",{staticStyle:{width:"100%"},model:{value:e.selectedStorageExpansion,callback:function(t){e.selectedStorageExpansion=t},expression:"selectedStorageExpansion"}},e._l(e.data.storageConfig,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)])]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("label",{staticClass:"control-label"},[e._v("Fecha Modificación")]),e._v(" "),a("div",{staticClass:"form-group required"},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.selectedHorizont,callback:function(t){e.selectedHorizont=t},expression:"selectedHorizont"}},e._l(e.getSelectValues("horizonts"),function(e){return a("el-option",{key:e.id,attrs:{label:e.period,value:e.id}})}))],1)])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogCreateVisible=!1}}},[e._v("Cancelar")]),e._v(" "),a("el-button",{attrs:{disabled:!e.selectedStorageExpansion&&e.selectedStorageExpansionMonth,type:"primary"},on:{click:function(t){e.addRow()}}},[e._v("Continuar")])],1)])],1)},staticRenderFns:[]},Ee=a("VU/8")($e,De,!1,null,null,null).exports,Te={name:"windM2Config",mounted:function(){var e=this;if(!this.$auth.check(["Experimental"]))return this.$message({message:"No tienes permisos, esta funcionalidad es experimental.",type:"error"}),void this.$parent.goToCategory(1);this.data.areas.length<1&&this.$alert("No existen áreas, vas a ser redirigido al modulo de áreas.","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"error"}).then(function(){e.$parent.goToCategory(14)}),this.columns=this.filterHiddenColumns(),this.onPropsChanged()},watch:{data:{handler:function(e,t){this.onPropsChanged()},deep:!0,immediate:!0}},props:["data"],components:{ReactDataGrid:u.a},methods:{getLabelSelect:function(e,t){return"entrance_stage"===e.key?t.description:"initial_storage_stage"===e.key?this.formatMonthDate(t.period):t[e.keySelect]},filterHiddenColumns:function(){return l.a.filter(this.allColumns,{display:!0})},onPropsChanged:function(e){var t=this;this.rows=l.a.clone(this.data.windM2Config,!0),this.rows.length<1&&(this.loading=!1),l.a.each(this.rows,function(e,a){e.area=e.areas.name,e.entrance_stage=e.entrance_stages.name,a===t.rows.length-1&&setTimeout(function(){t.loading=!1},2e3)})},getCounter:function(){return this.rows.length},update:function(){var e=this;c.a.updateWindM2Config(this.selectedRow.id,this.selectedRow).then(function(){e.$message({message:"Notificación: Acción realizada correctamente",type:"success"}),e.$bus.emit("getModulesData",[{url:"getWindM2Config",reference:"windM2Config"}]),e.visibleTable=!0})},isDisabledField:function(e){return"id"===e},successUpload:function(e){this.rows=e,this.rows.splice(0,0),this.showUpload=!1,this.$message({message:"Notificación: Importación realizada correctamente",type:"success"})},addRow:function(){var e,t=this;this.dialogCreateVisible=!1,this.selectedRow=null,c.a.createWindM2Config((e={nombre_planta:this.windM2ConfigName,speed_resolution:0,capacity:0,losses:0,process_id:this.$route.params.id,area_id:this.data.areas[0].id,entrance_stage_id:this.data.entranceStages[0].id,wSpeed_min:0,wSpeed_max:0},f()(e,"speed_resolution",0),f()(e,"measuring_height",0),f()(e,"hub_height",0),f()(e,"adjustment",0),f()(e,"density",0),f()(e,"distance",0),f()(e,"diameter",0),f()(e,"area",0),f()(e,"speedDataMinutes",0),f()(e,"efficiency",0),e)).then(function(e){t.$bus.emit("getModulesData",[{url:"getWindM2Config",reference:"windM2Config"}])})},deleteRow:function(e){var t=this;c.a.deleteWindM2Config(e.id).then(function(){t.rows.splice(t.rows.indexOf(e),1),t.selectedRow=null,t.visibleTable=!0,t.$message({message:"El registro se ha eliminado",type:"success"})})},clickedRow:function(e){var t=this;this.$confirm("¿Quieres entrar al detalle de la configuración?","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"warning"}).then(function(){t.visibleTable=!1,t.selectedRow=t.rows[e]})},download:function(){[].unshift(["ID","name"]),c.a.donwloadExcelThermalConfig(this.$route.params.id).then(function(e){var t=document.createElement("a");t.href=e.data.file,t.download=e.data.name,document.body.appendChild(t),t.click(),t.remove()})},rowGetter:function(e){return this.rows[e]},formatMonthDate:function(e){var t=new Date(e);e=t.getUTCMonth()+1,t.getUTCDate();return t.getUTCFullYear()+"/"+e},handleGridRowsUpdated:function(e){for(var t=this,a=function(a){var i=t.rows[a],s=l.a.extend(i,e.updated);c.a.updateArea(s.id,s).then(function(){t.rows[a]=s,t.$bus.emit("getModulesData",[{url:"getWindM2Config",reference:"windM2Config"}])}).catch(function(e){console.log(e)})},i=e.fromRow;i<=e.toRow;i++)a(i)}},data:function(){return{windM2ConfigName:"",dialogCreateVisible:!1,loading:!0,visibleTable:!0,uploadPath:window.pathBase+":"+window.portBaseLaravel+"/api/v1/windM2Config/importExcel/"+this.$route.params.id,showUpload:!1,selectedRow:null,rows:[],columns:[],allColumns:[{key:"nombre_planta",name:"Nombre",width:200,type:"text",resizable:!0,display:!0},{key:"capacity",name:"Capacidad",unit:"MW",precision:5,decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"losses",name:"Perdidas: (min:0 max:1)",unit:"%",precision:6,max:1,min:0,decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"wSpeed_min",name:"Velocidad mínima",unit:"m/s",precision:6,decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"wSpeed_max",name:"Velocidad máxima",unit:"m/s",precision:6,decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"speed_resolution",name:"Resolución de medida",precision:6,decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"measuring_height",name:"Measuring height",precision:6,decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"hub_height",name:"hub height",precision:6,decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"adjustment",name:"Ajuste",precision:6,decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"density",name:"Densidad",unit:"Kg/m3",precision:6,decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"distance",name:"Distancia",unit:"m",precision:6,decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"diameter",name:"Diametro",precision:6,unit:"m",decimalSeparator:".",thousandSeparator:",",type:"numeric",resizable:!0,display:!1},{key:"area",originalForeign:"area_id",name:"Area",type:"select",keySelect:"name",entity:"areas",resizable:!0,display:!0},{key:"speedDataMinutes",name:"Velodidad corto plazo",precision:6,decimalSeparator:".",thousandSeparator:",",type:"text",disabled:!0,resizable:!0,display:!1},{key:"entrance_stage",keySelect:"name",type:"select",originalForeign:"entrance_stage_id",entity:"entranceStages",name:"Etapa de entrada",resizable:!0,display:!1}]}}},ze={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"Tienes que esperar un poco..."}},[a("el-dialog",{attrs:{title:"Nuevo",visible:e.dialogCreateVisible,width:"30%"},on:{"update:visible":function(t){e.dialogCreateVisible=t}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("label",{staticClass:"control-label"},[e._v("Nombre de la planta")]),e._v(" "),a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.windM2ConfigName,expression:"windM2ConfigName"}],staticClass:"form-control",attrs:{type:"text",name:"name",placeholder:"Ingrese el nombre"},domProps:{value:e.windM2ConfigName},on:{input:function(t){t.target.composing||(e.windM2ConfigName=t.target.value)}}})])])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogCreateVisible=!1}}},[e._v("Cancelar")]),e._v(" "),a("el-button",{attrs:{disabled:!e.windM2ConfigName,type:"primary"},on:{click:function(t){e.addRow()}}},[e._v("Continuar")])],1)]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12",staticStyle:{"margin-bottom":"10px"}},[!e.showUpload&&e.visibleTable?a("button",{staticClass:"btn btn-sm btn-warning float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.dialogCreateVisible=!0}}},[a("i",{staticClass:"icon plus"}),e._v("Agregar")]):e._e(),e._v(" "),e.selectedRow&&!e.showUpload?a("button",{staticClass:"btn btn-sm btn-danger float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.deleteRow(e.selectedRow)}}},[a("i",{staticClass:"icon trash"}),e._v("Eliminar seleccionado (id:"+e._s(e.selectedRow.id)+")")]):e._e()])]),e._v(" "),e.visibleTable&&!e.loading?a("div",[e.rows.length>0?a("el-alert",{staticStyle:{"margin-bottom":"20px"},attrs:{title:"Para editar las propiedades de la planta selecciona un registro.",type:"warning","show-icon":""}}):e._e(),e._v(" "),a("ReactDataGrid",{key:"windM2Config",attrs:{enableCellSelect:!0,columns:e.columns,rowsCount:e.getCounter(),minHeight:500,";":""},on:{rowGetter:e.rowGetter,onRowClick:e.clickedRow,onGridRowsUpdated:e.handleGridRowsUpdated}})],1):e._e(),e._v(" "),a("div",{staticClass:"row"},[e.selectedRow&&!e.visibleTable?a("div",{staticClass:"col-md-12"},[e.selectedRow.wSpeed_min>e.selectedRow.wSpeed_max?a("el-alert",{staticStyle:{"margin-bottom":"10px"},attrs:{title:"La velocidad mínima debe de ser menor a la velocidad máxima",type:"warning"}}):e._e()],1):e._e()]),e._v(" "),e.showUpload||e.visibleTable?e._e():a("div",{staticClass:"row"},[e._l(e.allColumns,function(t){return a("div",{staticClass:"col-md-6"},["text"===t.type?a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name)+"\n          "),t.unit?a("el-tag",{attrs:{type:"primary",size:"small"}},[e._v(e._s(t.unit))]):e._e()],1),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedRow[t.key],expression:"selectedRow[column.key]"}],staticClass:"form-control",attrs:{disabled:e.isDisabledField(t.key),type:"text",name:"name",placeholder:t.key},domProps:{value:e.selectedRow[t.key]},on:{input:function(a){a.target.composing||e.$set(e.selectedRow,t.key,a.target.value)}}})]):e._e(),e._v(" "),"numeric"===t.type?a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name)+"\n          "),t.unit?a("el-tag",{attrs:{type:"primary",size:"small"}},[e._v(e._s(t.unit))]):e._e()],1),e._v(" "),a("vue-numeric",{staticClass:"form-control",attrs:{max:t.max,min:t.min,precision:t.precision,"decimal-separator":t.decimalSeparator,"thousand-separator":t.thousandSeparator},model:{value:e.selectedRow[t.key],callback:function(a){e.$set(e.selectedRow,t.key,a)},expression:"selectedRow[column.key]"}})],1):e._e(),e._v(" "),"select"===t.type?a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label"},[e._v(e._s(t.name))]),e._v(" "),a("el-select",{staticStyle:{width:"100%"},model:{value:e.selectedRow[t.originalForeign],callback:function(a){e.$set(e.selectedRow,t.originalForeign,a)},expression:"selectedRow[column.originalForeign]"}},e._l(e.data[t.entity],function(i){return a("el-option",{key:i.id,attrs:{label:e.getLabelSelect(t,i),value:i.id}})}))],1):e._e(),e._v(" "),3===e.selectedRow.entrance_stage_id&&"entrance_stage"===t.key?a("div",{staticClass:"form-group required"},[a("label",{staticClass:"control-label"},[e._v("Ingrese fecha de entrada")]),e._v(" "),a("el-select",{staticStyle:{width:"100%"},model:{value:e.selectedRow.entrance_stage_date,callback:function(t){e.$set(e.selectedRow,"entrance_stage_date",t)},expression:"selectedRow['entrance_stage_date']"}},e._l(e.data.horizonts,function(t){return a("el-option",{key:t.id,attrs:{label:e.formatMonthDate(t.period),value:t.id}})}))],1):e._e()])}),e._v(" "),a("div",{staticClass:"col-md-12"},[a("button",{staticClass:"btn btn-dark float-right",on:{click:function(t){e.visibleTable=!0}}},[a("i",{staticClass:"icon cancel"}),e._v("Cancelar ")]),e._v(" "),a("button",{staticClass:"btn btn-primary float-right",staticStyle:{"margin-right":"10px"},on:{click:e.update}},[a("i",{staticClass:"icon save"}),e._v("Actualizar\n      ")])])],2)],1)},staticRenderFns:[]},Ne=a("VU/8")(Te,ze,!1,null,null,null).exports,Ue={components:{ReactDataGrid:u.a},name:"SpeedIndices",props:["data"],mounted:function(){var e=this;if(!this.$auth.check(["speedIndices"]))return this.$message({message:"No tienes permisos",type:"error"}),void this.$parent.goToCategory(1);this.data.blocks.length<1&&this.$alert("No hay bloques, vas a ser redirigido al modulo de bloques.","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"error"}).then(function(){e.$parent.goToCategory(19)}),this.data.windConfig.length<1&&this.$alert("No hay plantas eólicas, vas a ser redirigido al modulo.","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"error"}).then(function(){e.$parent.goToCategory(12)}),this.windConfig=this.data.windConfig,this.formatHorizontDate(),this.onPropsChanged()},methods:{changePlant:function(){var e=this,t=[];l.a.each(this.data.blocks,function(a,i){l.a.each(e.data.months,function(e,i){t.push({id_month:e.id,fecha:e.name,block_name:a.name,block_id:a.id,value:null})})}),c.a.getSpeedIndicesById(this.windSelected).then(function(a){l.a.each(t,function(t){l.a.each(a.data,function(a){a.month_id===t.id_month&&a.wind_config_id===e.windSelected&&t.block_id===a.block_id&&(t.value=a.value,t.month_id=a.month_id,t.wind_config_id=a.wind_config_id,t.id=a.id)})}),e.speedIndices=t})},onPropsChanged:function(e){e&&(this.speedIndices=e.months)},formatHorizontDate:function(){var e=this;l.a.each(this.speedIndices,function(t){t.fecha=e.formatMonthDate(t.period)})},formatMonthDate:function(e){var t=new Date(e);e=t.getUTCMonth()+1,t.getUTCDate();return t.getUTCFullYear()+"/"+e},addFuel:function(){},rowGetterFuelCost:function(e){return this.speedIndices[e]},countRowsHorizont:function(){return this.speedIndices.length},clickedRowHorizon:function(e){this.selectedRowFuelCost=this.speedIndices[e]},handleFuelUpdated:function(e){var t=this;if(!l.a.isNil(e.updated.value)){if(isNaN(e.updated.value))return void this.$message({message:"Debes introducir un valor numérico",type:"error"});if(e.updated.value<0)return void this.$message({message:"El valor debe ser positivo.",type:"error"})}e.fromRowData.value=e.updated.value,e.fromRowData.month_id=e.fromRowData.id_month,e.fromRowData.process_id=this.$route.params.id,l.a.isNil(e.fromRowData.wind_config_id)?(e.fromRowData.wind_config_id=this.windSelected,c.a.createSpeedIndices(e.fromRowData).then(function(a){200===a.status&&(e.fromRowData.demand_id=a.data.id,t.$message({message:"El indice ha sido creado",type:"success"}))})):c.a.updateSpeedIndices(e.fromRowData.id,e.fromRowData).then(function(e){console.log(e)})}},data:function(){var e;return e={speedIndices:[],loading:!1,selectedRowFuelCost:"",windSelected:null,windConfig:[]},f()(e,"speedIndices",[]),f()(e,"columnsFuelCost",[{key:"fecha",name:"Mes",editable:!1},{key:"block_name",name:"Bloque",editable:!1},{key:"value",name:"Factor de velocidad",editable:!0}]),e}},Pe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("h3",[e._v("Seleccione Planta de viento")]),e._v(" "),a("el-select",{attrs:{placeholder:"Seleccioné"},on:{change:function(t){e.changePlant()}},model:{value:e.windSelected,callback:function(t){e.windSelected=t},expression:"windSelected"}},e._l(e.windConfig,function(e){return a("el-option",{key:e.id,attrs:{label:e.planta,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"col-md-8"},[a("button",{staticClass:"btn btn-warning float-right",staticStyle:{"margin-top":"10px"},on:{click:function(t){e.$parent.goToCategory(12)}}},[a("i",{staticClass:"icon cube"}),e._v("Agregar planta")])])]),e._v(" "),a("div",{staticClass:"row",staticStyle:{"margin-top":"10px"}},[e.windSelected?a("div",{staticClass:"col-md-12"},[a("ReactDataGrid",{key:"FuelCost",attrs:{enableCellSelect:!0,enableDragAndDrop:!0,columns:e.columnsFuelCost,rowsCount:e.countRowsHorizont(),minHeight:500,";":""},on:{rowGetter:e.rowGetterFuelCost,onRowClick:e.clickedRowHorizon,onGridRowsUpdated:e.handleFuelUpdated}})],1):e._e()]),e._v(" "),e.windSelected?e._e():a("div",{staticClass:"row",staticStyle:{"margin-top":"50px"}},[a("div",{staticClass:"col-md-12"},[a("center",[a("h4",[e._v("Debes seleccionar una planta para comenzar a asignar los valores.")]),e._v(" "),a("img",{attrs:{src:"/static/layers.png"}})])],1)])])},staticRenderFns:[]},Me=a("VU/8")(Ue,Pe,!1,null,null,null).exports,Ie={components:{ReactDataGrid:u.a},name:"SpeedIndicesM2",props:["data"],mounted:function(){var e=this;if(!this.$auth.check(["Experimental"]))return this.$message({message:"No tienes permisos, esta funcionalidad es experimental.",type:"error"}),void this.$parent.goToCategory(1);this.data.blocks.length<1&&this.$alert("No hay bloques, vas a ser redirigido al modulo de bloques.","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"error"}).then(function(){e.$parent.goToCategory(19)}),this.data.windM2Config.length<1&&this.$alert("No hay plantas eólicas, vas a ser redirigido al modulo.","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"error"}).then(function(){e.$parent.goToCategory(22)}),this.windM2Config=this.data.windM2Config,this.formatHorizontDate(),this.onPropsChanged()},methods:{changePlant:function(){var e=this,t=[];l.a.each(this.data.blocks,function(a,i){l.a.each(e.data.months,function(e,i){t.push({id_month:e.id,fecha:e.name,block_id:a.id,block_name:a.name,value:null})})}),c.a.getSpeedIndicesByIdM2(this.windSelected).then(function(a){l.a.each(t,function(t){l.a.each(a.data,function(a){a.month_id===t.id_month&&a.wind_config_id===e.windSelected&&t.block_id===a.block_id&&(t.value=a.value,t.month_id=a.month_id,t.wind_config_id=a.wind_config_id,t.id=a.id)})}),e.speedIndices=t})},onPropsChanged:function(e){e&&(this.speedIndices=e.months,this.formatHorizontDate())},formatHorizontDate:function(){var e=this;l.a.each(this.speedIndices,function(t){t.fecha=e.formatMonthDate(t.period)})},formatMonthDate:function(e){var t=new Date(e);e=t.getUTCMonth()+1,t.getUTCDate();return t.getUTCFullYear()+"/"+e},addFuel:function(){},rowGetterFuelCost:function(e){return this.speedIndices[e]},countRowsHorizont:function(){return this.speedIndices.length},clickedRowHorizon:function(e){this.selectedRowFuelCost=this.speedIndices[e]},handleFuelUpdated:function(e){var t=this;if(!l.a.isNil(e.updated.value)){if(isNaN(e.updated.value))return void this.$message({message:"Debes introducir un valor numérico",type:"error"});if(e.updated.value<0)return void this.$message({message:"El valor debe ser positivo.",type:"error"})}e.fromRowData.value=e.updated.value,e.fromRowData.month_id=e.fromRowData.id_month,e.fromRowData.process_id=this.$route.params.id,l.a.isNil(e.fromRowData.wind_config_id)?(e.fromRowData.wind_config_id=this.windSelected,c.a.createSpeedIndicesM2(e.fromRowData).then(function(a){200===a.status&&(e.fromRowData.demand_id=a.data.id,t.$message({message:"El indice ha sido creado",type:"success"}))})):c.a.updateSpeedIndicesM2(e.fromRowData.id,e.fromRowData).then(function(e){console.log(e)})}},data:function(){var e;return e={speedIndices:[],loading:!1,selectedRowFuelCost:"",windSelected:null,windM2Config:[]},f()(e,"speedIndices",[]),f()(e,"columnsFuelCost",[{key:"fecha",name:"Mes",editable:!1},{key:"block_name",name:"Bloque",editable:!1},{key:"value",name:"Factor de velocidad",editable:!0}]),e}},Ae={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("h3",[e._v("Seleccione Planta de viento")]),e._v(" "),a("el-select",{attrs:{placeholder:"Seleccioné"},on:{change:function(t){e.changePlant()}},model:{value:e.windSelected,callback:function(t){e.windSelected=t},expression:"windSelected"}},e._l(e.windM2Config,function(e){return a("el-option",{key:e.id,attrs:{label:e.nombre_planta,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"col-md-8"},[a("button",{staticClass:"btn btn-warning float-right",staticStyle:{"margin-top":"10px"},on:{click:function(t){e.$parent.goToCategory(22)}}},[a("i",{staticClass:"icon cube"}),e._v("Agregar planta")])])]),e._v(" "),a("div",{staticClass:"row",staticStyle:{"margin-top":"10px"}},[e.windSelected?a("div",{staticClass:"col-md-12"},[a("ReactDataGrid",{key:"FuelCost",attrs:{enableCellSelect:!0,enableDragAndDrop:!0,columns:e.columnsFuelCost,rowsCount:e.countRowsHorizont(),minHeight:500,";":""},on:{rowGetter:e.rowGetterFuelCost,onRowClick:e.clickedRowHorizon,onGridRowsUpdated:e.handleFuelUpdated}})],1):e._e()]),e._v(" "),e.windSelected?e._e():a("div",{staticClass:"row",staticStyle:{"margin-top":"50px"}},[a("div",{staticClass:"col-md-12"},[a("center",[a("h4",[e._v("Debes seleccionar una planta para comenzar a asignar los valores.")]),e._v(" "),a("img",{attrs:{src:"/static/layers.png"}})])],1)])])},staticRenderFns:[]},Fe=a("VU/8")(Ie,Ae,!1,null,null,null).exports,Le={name:"Scenario",mounted:function(){if(!this.$auth.check(["scenarios"]))return this.$message({message:"No tienes permisos",type:"error"}),void this.$parent.goToCategory(1)},props:["data"],computed:{rows:function(e){return this.data.scenarios}},components:{ReactDataGrid:u.a},methods:{openModal:function(){this.dialogCreateVisible=!0,this.nameScenario="Escenario "+parseInt(this.rows.length+1,10)},successUpload:function(e){this.rows=e,this.rows.splice(0,0),this.showUpload=!1,this.$message({message:"Importación realizada correctamente",type:"success"}),this.$bus.emit("getModulesData",[{reference:"scenarios",url:"getScenarios"}])},addRow:function(){var e=this;this.dialogCreateVisible=!1,this.selectedRow=null,c.a.createScenario({name:this.nameScenario,process_id:this.$route.params.id}).then(function(t){200===t.status?e.$bus.emit("getModulesData",[{reference:"scenarios",url:"getScenarios"}]):e.$message({message:"Error al agregar fila.",type:"error"})}).catch(function(){console.log("error")})},deleteRow:function(){var e=this,t=l.a.last(this.rows);c.a.deleteScenario(t.id).then(function(a){l.a.isNil(a.response)?(e.rows.splice(e.rows.indexOf(t),1),e.selectedRow=null,e.$bus.emit("getModulesData",[{reference:"scenarios",url:"getScenarios"}]),e.$message({message:"Escenario eliminado correctamente",type:"success"})):e.$message({message:"No se ha podido eliminar el registro, esta siendo usado en otra dependencia.",type:"error"})}).catch(function(e){console.log(e)})},clickedRow:function(e){this.selectedRow=this.rows[e]},download:function(){[].unshift(["ID","name"]),c.a.donwloadExcelAreas(this.$route.params.id).then(function(e){var t=document.createElement("a");t.href=e.data.file,t.download=e.data.name,document.body.appendChild(t),t.click(),t.remove()})},rowGetter:function(e){return this.rows[e]},handleGridRowsUpdated:function(e){for(var t=this,a=function(a){var i=t.rows[a],s=l.a.extend(i,e.updated);c.a.updateScenario(s.id,s).then(function(e){200===e.status?(t.rows[a]=s,t.$bus.emit("getModulesData",[{reference:"scenarios",url:"getScenarios"}])):(t.rows[a].name="Inserte nuevo valor",t.$forceUpdate(),t.$message({message:"Error al modificar, el area ya existe.",type:"error"}))}).catch(function(e){console.log(e)})},i=e.fromRow;i<=e.toRow;i++)a(i)},countRows:function(){return this.rows.length}},data:function(){return{dialogCreateVisible:!1,nameScenario:"",uploadPath:window.pathBase+":"+window.portBaseLaravel+"/api/v1/areas/importExcel/"+this.$route.params.id,showUpload:!1,selectedRow:null,columns:[{key:"name",name:"Nombre",editable:!0}]}}},Be={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:"Nuevo",visible:e.dialogCreateVisible,width:"30%"},on:{"update:visible":function(t){e.dialogCreateVisible=t}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("label",{staticClass:"control-label"},[e._v("Nombre del escenario")]),e._v(" "),a("div",{staticClass:"form-group required"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.nameScenario,expression:"nameScenario"}],staticClass:"form-control",attrs:{type:"text",name:"name",placeholder:"Ingrese el nombre del escenario"},domProps:{value:e.nameScenario},on:{input:function(t){t.target.composing||(e.nameScenario=t.target.value)}}})])])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogCreateVisible=!1}}},[e._v("Cancelar")]),e._v(" "),a("el-button",{attrs:{disabled:!e.nameScenario,type:"primary"},on:{click:function(t){e.addRow()}}},[e._v("Continuar")])],1)]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12",staticStyle:{"margin-bottom":"10px"}},[e.showUpload?e._e():a("button",{staticClass:"btn btn-sm btn-warning float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.openModal()}}},[a("i",{staticClass:"icon plus"}),e._v("Agregar")]),e._v(" "),!e.showUpload&&e.rows.length>0?a("button",{staticClass:"btn btn-sm btn-danger float-right",staticStyle:{"margin-left":"10px"},on:{click:function(t){e.deleteRow()}}},[a("i",{staticClass:"icon trash"}),e._v("Reducir escenarios (-1)")]):e._e()])]),e._v(" "),!e.showUpload&&this.rows.length>0?a("div",[a("ReactDataGrid",{key:"Areas",attrs:{enableCellSelect:!0,enableDragAndDrop:!0,columns:e.columns,rowsCount:e.countRows(),minHeight:500,";":""},on:{rowGetter:e.rowGetter,onRowClick:e.clickedRow,onGridRowsUpdated:e.handleGridRowsUpdated}})],1):e._e(),e._v(" "),this.rows.length<1?a("div",[a("center",[a("h2",[e._v("No existen escenarios")]),e._v(" "),a("img",{staticStyle:{"margin-bottom":"10px"},attrs:{width:"100",src:"/static/scenario.png"}}),e._v(" "),a("hr"),e._v(" "),a("button",{staticClass:"btn btn-lg btn-primary",on:{click:function(t){e.openModal()}}},[a("i",{staticClass:"icon add"}),e._v("Agregar nuevo")])])],1):e._e(),e._v(" "),e.showUpload?a("div",{staticStyle:{"margin-top":"100px"}},[a("center",[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"","on-success":e.successUpload,action:e.uploadPath,multiple:""}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("Suelta tu archivo aquí o "),a("em",[e._v("haz clic para cargar")])]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("Solo archivos excel")])]),e._v(" "),a("hr"),e._v(" "),a("button",{staticClass:"btn btn-outline-danger btn-lg",on:{click:function(t){e.showUpload=!1}}},[e._v("\n        Cancelar subida")])],1)],1):e._e()],1)},staticRenderFns:[]},qe=a("VU/8")(Le,Be,!1,null,null,null).exports,Oe={components:{ReactDataGrid:u.a},name:"InflowWind",props:["data","canEdit"],mounted:function(){var e=this;if(!this.$auth.check(["inflowWinds"]))return this.$message({message:"No tienes permisos",type:"error"}),void this.$parent.goToCategory(1);this.data.horizonts.length<1&&!this.canEdit&&this.$alert("No hay horizontes, vas a ser redirigido al modulo de demanda.","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"error"}).then(function(){e.$parent.goToCategory(2)}),this.data.scenarios.length<1&&!this.canEdit&&this.$alert("No hay escenarios, vas a ser redirigido al modulo.","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"error"}).then(function(){e.$parent.goToCategory(29)}),this.data.windConfig.length<1&&!this.canEdit&&this.$alert("No hay plantas eólicas, vas a ser redirigido al modulo.","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"error"}).then(function(){e.$parent.goToCategory(12)}),this.windConfig=this.data.windConfig,this.formatHorizontDate(),this.onPropsChanged()},methods:{changePlant:function(){var e=this,t=[];l.a.each(this.data.scenarios,function(a,i){l.a.each(e.data.horizonts,function(i,s){t.push({scenario:a.name,id_horizont:i.id,fecha:e.formatMonthDate(i.period),scenario_id:a.id,value:null})})}),c.a.getInflowWindById(this.windSelected).then(function(a){l.a.each(t,function(t){l.a.each(a.data,function(a){a.horizont_id===t.id_horizont&&a.wind_config_id===e.windSelected&&t.scenario_id===a.scenario_id&&(t.value=a.value,t.horizont_id=a.horizont_id,t.wind_config_id=a.wind_config_id,t.id=a.id)})}),e.speedIndices=t})},onPropsChanged:function(e){e&&(this.speedIndices=e.horizonts),this.formatHorizontDate()},formatHorizontDate:function(){var e=this;l.a.each(this.speedIndices,function(t){t.fecha=e.formatMonthDate(t.period),console.log(t)})},formatMonthDate:function(e){var t=new Date(e);e=t.getUTCMonth()+1,t.getUTCDate();return t.getUTCFullYear()+"/"+e},rowGetterFuelCost:function(e){return this.speedIndices[e]},countRowsHorizont:function(){return this.speedIndices.length},clickedRowHorizon:function(e){this.selectedRowFuelCost=this.speedIndices[e]},handleFuelUpdated:function(e){var t=this;if(!l.a.isNil(e.updated.value)){if(isNaN(e.updated.value))return void this.$message({message:"El valor debe de ser numérico.",type:"error"});if(e.updated.value<1)return void this.$message({message:"El valor debe de ser positivo.",type:"error"})}e.fromRowData.value=e.updated.value,e.fromRowData.horizont_id=e.fromRowData.id_horizont,e.fromRowData.process_id=this.$route.params.id,l.a.isNil(e.fromRowData.wind_config_id)?(e.fromRowData.wind_config_id=this.windSelected,c.a.createInflowWind(e.fromRowData).then(function(a){200===a.status&&(e.fromRowData.demand_id=a.data.id,t.$message({message:"El indice ha sido creado",type:"success"}))})):c.a.updateInflowWind(e.fromRowData.id,e.fromRowData).then(function(e){console.log(e)})}},data:function(){var e;return e={speedIndices:[],loading:!1,selectedRowFuelCost:"",windSelected:null,windConfig:[]},f()(e,"speedIndices",[]),f()(e,"columnsFuelCost",[{key:"fecha",name:"Mes",editable:!1},{key:"scenario",name:"Escenario",editable:!1},{key:"value",name:"Velocidad (m/s)",editable:!0}]),e}},Ge={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[e.canEdit?a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"ui message"},[a("center",[a("h3",[a("i",{staticClass:"info ui icon"}),e._v("Estos datos se generan durante la ejecución!")]),e._v(" "),a("h4",[e._v('Si desea ingresar los datos manualmente debes configurar la opción "Generar datos de viento" en el menú de configuración.')]),e._v(" "),a("img",{attrs:{src:"/static/wind-speed.svg",width:"100"}})])],1)])]):e._e(),e._v(" "),e.canEdit?e._e():a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("h3",[e._v("Seleccione planta")]),e._v(" "),a("el-select",{attrs:{placeholder:"Seleccioné"},on:{change:function(t){e.changePlant()}},model:{value:e.windSelected,callback:function(t){e.windSelected=t},expression:"windSelected"}},e._l(e.windConfig,function(e){return a("el-option",{key:e.id,attrs:{label:e.planta,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"col-md-8"},[a("button",{staticClass:"btn btn-warning float-right",staticStyle:{"margin-top":"10px"},on:{click:function(t){e.$parent.goToCategory(12)}}},[a("i",{staticClass:"icon cube"}),e._v("Agregar planta")])])]),e._v(" "),a("div",{staticClass:"row",staticStyle:{"margin-top":"10px"}},[e.windSelected?a("div",{staticClass:"col-md-12"},[a("ReactDataGrid",{key:"FuelCost",attrs:{enableCellSelect:!0,enableDragAndDrop:!0,columns:e.columnsFuelCost,rowsCount:e.countRowsHorizont(),minHeight:500,";":""},on:{rowGetter:e.rowGetterFuelCost,onRowClick:e.clickedRowHorizon,onGridRowsUpdated:e.handleFuelUpdated}})],1):e._e()]),e._v(" "),e.windSelected?e._e():a("div",{staticClass:"row",staticStyle:{"margin-top":"50px"}},[a("div",{staticClass:"col-md-12"},[a("center",[a("h4",[e._v("Debes seleccionar una planta para comenzar a asignar los valores.")]),e._v(" "),a("img",{attrs:{src:"/static/layers.png"}})])],1)])])])},staticRenderFns:[]},Ve=a("VU/8")(Oe,Ge,!1,null,null,null).exports,He={components:{ReactDataGrid:u.a},name:"InflowWindM2",props:["data","canEdit"],mounted:function(){var e=this;if(!this.$auth.check(["InflowWindM2"]))return this.$message({message:"No tienes permisos",type:"error"}),void this.$parent.goToCategory(1);this.data.horizonts.length<1&&!this.canEdit&&this.$alert("No hay horizontes, vas a ser redirigido al modulo de demanda.","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"error"}).then(function(){e.$parent.goToCategory(2)}),this.data.scenarios.length<1&&!this.canEdit&&this.$alert("No hay escenarios, vas a ser redirigido al modulo.","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"error"}).then(function(){e.$parent.goToCategory(29)}),this.data.windM2Config.length<1&&!this.canEdit&&this.$alert("No hay plantas eólicas, vas a ser redirigido al modulo.","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"error"}).then(function(){e.$parent.goToCategory(22)}),this.windConfig=this.data.windM2Config,this.formatHorizontDate(),this.onPropsChanged()},methods:{changePlant:function(){var e=this,t=[];l.a.each(this.data.scenarios,function(a,i){l.a.each(e.data.horizonts,function(i,s){t.push({id_horizont:i.id,fecha:e.formatMonthDate(i.period),scenario:a.id,name:a.name,value:null})})}),c.a.getInflowWindByIdM2(this.windSelected).then(function(a){l.a.each(t,function(t){l.a.each(a.data,function(a){a.horizont_id===t.id_horizont&&a.wind_config_id===e.windSelected&&t.scenario===a.scenario&&(t.value=a.value,t.horizont_id=a.horizont_id,t.wind_config_id=a.wind_config_id,t.id=a.id)})}),e.speedIndices=t})},onPropsChanged:function(e){this.speedIndices=e.horizonts,this.formatHorizontDate()},formatHorizontDate:function(){var e=this;l.a.each(this.speedIndices,function(t){t.fecha=e.formatMonthDate(t.period)})},formatMonthDate:function(e){var t=new Date(e);e=t.getUTCMonth()+1,t.getUTCDate();return t.getUTCFullYear()+"/"+e},addFuel:function(){},rowGetterFuelCost:function(e){return this.speedIndices[e]},countRowsHorizont:function(){return this.speedIndices.length},clickedRowHorizon:function(e){this.selectedRowFuelCost=this.speedIndices[e]},handleFuelUpdated:function(e){var t=this;if(!l.a.isNil(e.updated.value)){if(isNaN(e.updated.value))return void this.$message({message:"Debes introducir un valor numérico",type:"error"});if(e.updated.value<0)return void this.$message({message:"El valor debe ser positivo.",type:"error"})}e.fromRowData.value=e.updated.value,e.fromRowData.horizont_id=e.fromRowData.id_horizont,e.fromRowData.horizont=e.fromRowData.id_horizont,e.fromRowData.process_id=this.$route.params.id,l.a.isNil(e.fromRowData.wind_config_id)?(e.fromRowData.wind_config_id=this.windSelected,c.a.createInflowWindM2(e.fromRowData).then(function(a){200===a.status&&(e.fromRowData.demand_id=a.data.id,t.$message({message:"El indice ha sido creado",type:"success"}))})):c.a.updateInflowWindM2(e.fromRowData.id,e.fromRowData).then(function(e){console.log(e)})}},data:function(){var e;return e={speedIndices:[],loading:!1,selectedRowFuelCost:"",windSelected:null,windConfig:[]},f()(e,"speedIndices",[]),f()(e,"columnsFuelCost",[{key:"fecha",name:"Mes",editable:!1},{key:"name",name:"Escenario",editable:!1},{key:"value",name:"Velocidad (m/s)",editable:!0}]),e}},We={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[e.canEdit?a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"ui message"},[a("center",[a("h3",[a("i",{staticClass:"info ui icon"}),e._v("Estos datos se generan durante la ejecución!")]),e._v(" "),a("h4",[e._v('Si desea ingresar los datos manualmente debes configurar la opción "Generar datos de viento" en el menú de configuración.')]),e._v(" "),a("img",{attrs:{src:"/static/wind-speed.svg",width:"100"}})])],1)])]):e._e(),e._v(" "),e.canEdit?e._e():a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("h3",[e._v("Seleccione planta")]),e._v(" "),a("el-select",{attrs:{placeholder:"Seleccioné"},on:{change:function(t){e.changePlant()}},model:{value:e.windSelected,callback:function(t){e.windSelected=t},expression:"windSelected"}},e._l(e.windConfig,function(e){return a("el-option",{key:e.id,attrs:{label:e.nombre_planta,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"col-md-8"},[a("button",{staticClass:"btn btn-warning float-right",staticStyle:{"margin-top":"10px"},on:{click:function(t){e.$parent.goToCategory(12)}}},[a("i",{staticClass:"icon cube"}),e._v("Agregar planta")])])]),e._v(" "),a("div",{staticClass:"row",staticStyle:{"margin-top":"10px"}},[e.windSelected?a("div",{staticClass:"col-md-12"},[a("ReactDataGrid",{key:"FuelCost",attrs:{enableCellSelect:!0,enableDragAndDrop:!0,columns:e.columnsFuelCost,rowsCount:e.countRowsHorizont(),minHeight:500,";":""},on:{rowGetter:e.rowGetterFuelCost,onRowClick:e.clickedRowHorizon,onGridRowsUpdated:e.handleFuelUpdated}})],1):e._e()]),e._v(" "),e.windSelected?e._e():a("div",{staticClass:"row",staticStyle:{"margin-top":"50px"}},[a("div",{staticClass:"col-md-12"},[a("center",[a("h4",[e._v("Debes seleccionar una planta para comenzar a asignar los valores.")]),e._v(" "),a("img",{attrs:{src:"/static/layers.png"}})])],1)])])])},staticRenderFns:[]},Qe=a("VU/8")(He,We,!1,null,null,null).exports,Ke={mounted:function(){var e=this;if(!this.$auth.check(["Experimental"]))return this.$message({message:"No tienes permisos, esta funcionalidad es experimental.",type:"error"}),void this.$parent.goToCategory(1);this.data.windM2Config.length<1&&this.$alert("No existen plantas, vas a ser redirigido al modulo de plantas.","Advertencia",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"error"}).then(function(){e.$parent.goToCategory(22)}),this.windM2Config=this.data.windM2Config},props:["data"],name:"WPowCurve",methods:{removeRow:function(e){var t=this.registers.indexOf(e);this.registers.splice(t,1),c.a.removePowCurve(e.id).then(function(){})},createPowerCurve:function(){var e=this;c.a.saveWPowCurve({p:0,CT:0,TpR:0,wind_m2_config_id:this.windSelected,process_id:this.$route.params.id}).then(function(){e.changePlant(),e.$message({message:"Notificación: Acción realizada correctamente",type:"success"})})},saveWPowCurve:function(e){var t=this;c.a.updateWPowCurve(e.id,{p:e.p,CT:e.CT,TpR:e.TpR,wind_m2_config_id:this.windSelected,process_id:this.$route.params.id}).then(function(){t.$message({message:"Notificación: Acción realizada correctamente",type:"success"})})},changePlant:function(){var e=this;c.a.getWPowCurve(this.windSelected).then(function(t){e.registers=t.data,setTimeout(function(){e.$forceUpdate()},2e3)})}},data:function(){return{registers:[],id:null,wind_m2_config_id:null,idSelected:null,P:0,CT:0,TpR:0,loading:!1,windM2Config:[],windSelected:null}}},je={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h3",[e._v("Seleccione Planta")]),e._v(" "),a("el-select",{attrs:{placeholder:"Seleccioné"},on:{change:function(t){e.changePlant()}},model:{value:e.windSelected,callback:function(t){e.windSelected=t},expression:"windSelected"}},e._l(e.windM2Config,function(e){return a("el-option",{key:e.id,attrs:{label:e.nombre_planta,value:e.id}})}))],1)]),e._v(" "),e.windSelected?e._e():a("div",{staticClass:"row",staticStyle:{"margin-top":"50px"}},[a("div",{staticClass:"col-md-12"},[a("center",[a("h4",[e._v("Debes seleccionar una planta para comenzar a asignar los valores.")]),e._v(" "),a("img",{attrs:{src:"/static/layers.png"}})])],1)]),e._v(" "),e.windSelected?a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("button",{staticClass:"btn btn-primary float-right",on:{click:e.createPowerCurve}},[a("i",{staticClass:"icon plus"}),e._v("Agregar nueva fila")])])]):e._e(),e._v(" "),e.registers.length<1&&e.windSelected?a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("center",[a("h3",[e._v("No existen registros")])])],1)]):e._e(),e._v(" "),e._l(e.registers,function(t){return e.windSelected?a("div",{key:t.id,staticClass:"row",staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"col-md-3"},[a("h4",[e._v("P")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.p,expression:"register.p"}],staticClass:"form-control",attrs:{type:"number",precision:5,placeholder:"Inserte valor","decimal-separator":".","thousand-separator":","},domProps:{value:t.p},on:{input:function(a){a.target.composing||e.$set(t,"p",a.target.value)}}})]),e._v(" "),a("div",{staticClass:"col-md-3"},[a("h4",[e._v("CT")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.CT,expression:"register.CT"}],staticClass:"form-control",attrs:{type:"number",precision:5,placeholder:"Inserte valor","decimal-separator":".","thousand-separator":","},domProps:{value:t.CT},on:{input:function(a){a.target.composing||e.$set(t,"CT",a.target.value)}}})]),e._v(" "),a("div",{staticClass:"col-md-3"},[a("h4",[e._v("TpR")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.TpR,expression:"register.TpR"}],staticClass:"form-control",attrs:{type:"number",placeholder:"Inserte valor","decimal-separator":".","thousand-separator":","},domProps:{value:t.TpR},on:{input:function(a){a.target.composing||e.$set(t,"TpR",a.target.value)}}})]),e._v(" "),a("div",{staticClass:"col-md-3"},[a("button",{staticClass:"btn btn-danger float-right",staticStyle:{"margin-top":"32px","margin-left":"10px"},on:{click:function(a){e.removeRow(t)}}},[a("i",{staticClass:"icon delete"})]),e._v(" "),a("button",{staticClass:"btn btn-primary float-right",staticStyle:{"margin-top":"33px"},on:{click:function(a){e.saveWPowCurve(t)}}},[a("i",{staticClass:"icon save"})])])]):e._e()})],2)},staticRenderFns:[]};var Je=a("VU/8")(Ke,je,!1,function(e){a("TcFf")},"data-v-4964e24c",null).exports,Ye={name:"Configuration",props:["data","infoLoaded","infoData"],mounted:function(){var e=this;c.a.getValidation(this.$route.params.id).then(function(t){e.validation=t.data,e.validationLoaded=!0}),this.infoLoaded.typesLoaded||(this.$parent.$parent.loading=!0,this.$notify.info({title:"Información",message:"Cargando dependencias genericas.",position:"top-left",duration:1e4}),this.$bus.emit("getModulesData",[{url:"getAreas",reference:"areas"},{url:"getHorizontByProcessId",reference:"horizonts"},{url:"getMonths",reference:"months"},{url:"getTypes",reference:"types"},{url:"getEntranceStages",reference:"entranceStages"},{url:"getCombustiblesByProcessId",reference:"fuels"},{url:"getSegments",reference:"segments"},{url:"getScenarios",reference:"scenarios"},{url:"getBlocks",reference:"blocks"},{url:"getSmallConfig",reference:"smallConfig"},{url:"getSmallConfigExpansion",reference:"smallConfigExpansion"},{url:"getHydroConfig",reference:"hydroConfig"},{url:"getHydroExpansion",reference:"hydroExpansion"},{url:"getWindConfig",reference:"windConfig"},{url:"getWindExpansion",reference:"windConfigExpansion"},{url:"getWindM2Config",reference:"windM2Config"},{url:"getStorageConfig",reference:"storageConfig"},{url:"getStorageExpansion",reference:"storageExpansion"},{url:"getLinesExpansion",reference:"linesExpansion"}]))},methods:{getNameErrorsButton:function(){return this.showErrors?"Ocultar errores":"Mostrar errores"},checkIfIsValid:function(e){if(_.isNil(this.validation[e]))return!1;var t=!0;return _.each(this.validation[e],function(e){e.valid||(t=!1)}),t}},data:function(){return{validationLoaded:!1,showErrors:!1,validation:{process:{},errors:[],valid:!1,inflowCounter:[{registers:[],valid:!0}],inflowWindCounterM2:[{registers:[],valid:!0}],inflowWindCounter:[{registers:[],valid:!0}],speedIndicesCounter:[{registers:[],valid:!0}],speedIndicesM2Counter:[{registers:[],valid:!0}],rationingCounter:[{registers:[],valid:!0}],demandCounter:[{registers:[],valid:!0}],fuelCounter:[{registers:[],valid:!0}]}}}},Ze={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[e.validationLoaded?a("h3",[a("b",[a("i",{staticClass:"icon qrcode"}),e._v("CONFIGURAR "+e._s(e.validation.process.name.toUpperCase()))])]):e._e(),e._v(" "),a("el-alert",{attrs:{title:"Advertencia, para poder iniciar la ejecución, debes completar la siguiente información.",type:"warning","show-icon":""}}),e._v(" "),e.validation.errors.length>0?a("div",{staticClass:"row",staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"col-md-12"},[a("a",{staticClass:"ui button float-right",on:{click:function(t){e.showErrors=!e.showErrors}}},[a("i",{staticClass:"icon info circle red"}),e._v(e._s(e.getNameErrorsButton()))])])]):e._e(),e._v(" "),!e.validation.valid&&e.showErrors?a("div",{staticClass:"ui red message"},[a("ul",e._l(e.validation.errors,function(t){return a("li",[e._v(e._s(t))])}))]):e._e(),e._v(" "),a("hr"),e._v(" "),a("div",[a("h3",[e._v("PASO 1. INSERTAR AREA/S "),a("label",{staticClass:"badge badge-warning"},[e._v(e._s(e.data.areas.length)+"  areas insertada/s")]),e._v(" "),e.data.areas.length>0?a("i",{staticClass:"icon check large green"}):e._e()]),e._v(" "),a("p",[e._v("MAEP soporta sistemas de tipo uninodal, multi-área o multi-nodal. Un modelo de sistema uninodal o de una sola área no requiere información adicional sobre la red de transmisión. Dos o mas áreas/nodos obliga a ingresar los datos de la red de transmisión o un equivalente de la misma.")]),e._v(" "),a("button",{staticClass:"btn btn-primary",on:{click:function(t){e.$parent.goToCategory(14)}}},[a("i",{staticClass:"ui icon plus"}),e._v("CONFIGURAR AREA")])]),e._v(" "),a("div",{staticStyle:{marginTop:"20px"}},[a("h3",[e._v("PASO 2. CONFIGURAR HORIZONTE PARA LA DEMANDA "),a("label",{staticClass:"badge badge-warning"},[e._v(e._s(e.data.horizonts.length)+"  etapa/s insertadas")]),e._v(" "),e.data.horizonts.length>0?a("i",{staticClass:"icon check large green"}):e._e()]),e._v(" "),a("p",[e._v(" Determina el horizonte de la demanda (mensual)")]),e._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{disabled:e.data.areas.length<1},on:{click:function(t){e.$parent.goToCategory(2)}}},[e._v("\n          CONFIGURAR HORIZONTE\n        ")])]),e._v(" "),a("div",{staticStyle:{marginTop:"20px"}},[a("h3",[e._v("PASO 3. CONFIGURAR DEMANDA "),e.validation.demandCounter.valid?a("i",{staticClass:"icon check large green"}):e._e()]),e._v(" "),a("p",[e._v("Ingresa la demanda total del sistema. Si el sistema es uninodal, dicha demanda corresponderá al único nodo modelado. De otra manera, será necesario ingresar los factores de participación de las áreas o nodos sobre la demanda total.")]),e._v(" "),!e.validation.demandCounter.valid&&e.data.horizonts.length>0?a("div",{staticClass:"message ui red",staticStyle:{marginTop:"10px"}},[a("h4",[e._v("Faltan datos por completar")]),e._v(" "),a("ul",e._l(e.validation.demandCounter.registers,function(t){return t.valid?e._e():a("li",{staticStyle:{"margin-top":"20px"}},[a("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.area_name))]),e._v(" tiene\n              "),a("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.demand_count))]),e._v(" valores asignados de\n              "),a("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.horizonts_count))]),e._v(" que deberia tener.")],1)}))]):e._e(),e._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{disabled:e.data.areas.length<1&&e.data.horizonts.length<1},on:{click:function(t){e.$parent.goToCategory(2,!0,"showFactorArea")}}},[a("i",{staticClass:"ui icon plus"}),e._v("CONFIGURAR DEMANDA")])]),e._v(" "),a("div",{staticStyle:{marginTop:"20px"}},[a("h3",[e._v("PASO 4. CONFIGURAR COMBUSTIBLES "),a("label",{staticClass:"badge badge-warning"},[e._v(e._s(e.data.fuels.length)+"  combustible/s insertado/s")]),e._v(" "),e.data.fuels.length>0?a("i",{staticClass:"icon check large green"}):e._e()]),e._v(" "),a("p",[e._v("Crea los tipos de combustible que se podrán asociar a las plantas térmicas para el proceso de generación eléctrica.")]),e._v(" "),a("button",{staticClass:"btn btn-primary",on:{click:function(t){e.$parent.goToCategory(17)}}},[a("i",{staticClass:"ui icon plus"}),e._v("CONFIGURAR COMBUSTIBLES")])]),e._v(" "),a("div",{staticStyle:{marginTop:"20px"}},[a("h3",[e._v("PASO 4.1 CONFIGURAR COSTOS DE COMBUSTIBLE  "),e.validation.fuelCounter.valid?a("i",{staticClass:"icon check large green"}):e._e()]),e._v(" "),!e.validation.fuelCounter.valid&&e.data.horizonts.length>0?a("div",{staticClass:"message ui red",staticStyle:{marginTop:"10px"}},[a("h4",[e._v("Faltan datos por completar")]),e._v(" "),a("ul",e._l(e.validation.fuelCounter.registers,function(t){return t.valid?e._e():a("li",{staticStyle:{"margin-top":"10px"}},[a("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.fuel_name))]),e._v(" tiene\n              "),a("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.fuel_horizont_count))]),e._v(" valores asignados de\n              "),a("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.horizonts_count))]),e._v(" que deberia tener.")],1)}))]):e._e(),e._v(" "),a("p",[e._v("Para cada una de las plantas hidroeléctricas en el sistema y de los escenarios del proceso estocástico, crea los afluentes de agua que llegan a los embalses.")]),e._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{disabled:e.data.horizonts.length<1||e.data.scenarios.length<1},on:{click:function(t){e.$parent.goToCategory(3)}}},[a("i",{staticClass:"ui icon plus"}),e._v("CONFIGURAR COSTOS DE COMBUSTIBLE")])]),e._v(" "),a("div",{staticStyle:{marginTop:"20px"}},[a("h3",[e._v("PASO 5. CONFIGURAR SEGMENTOS  "),a("label",{staticClass:"badge badge-warning"},[e._v(e._s(e.data.segments.length)+"  segmento/s insertado/s")]),e._v(" "),e.data.segments.length>0?a("i",{staticClass:"icon check large green"}):e._e()]),e._v(" "),a("p",[e._v("Los segmentos determinan cuantos niveles de impacto (en costos) hay sobre la demanda no atendida. En su versión actual, MAEP solo trabaja con el primer segmento.")]),e._v(" "),a("button",{staticClass:"btn btn-primary",on:{click:function(t){e.$parent.goToCategory(18)}}},[a("i",{staticClass:"ui icon plus"}),e._v("CONFIGURAR SEGMENTOS")])]),e._v(" "),a("div",{staticStyle:{marginTop:"20px"}},[a("h3",[e._v("PASO 6. CONFIGURAR ESCENARIOS  "),a("label",{staticClass:"badge badge-warning"},[e._v(e._s(e.data.scenarios.length)+"  escenario/s insertado/s")]),e._v(" "),e.data.scenarios.length>0?a("i",{staticClass:"icon check large green"}):e._e()]),e._v(" "),a("p",[e._v("Determina el proceso estocástico del modelo. Cuando un solo escenario es seleccionado entonces el modelo funciona de manera deterministica.")]),e._v(" "),a("button",{staticClass:"btn btn-primary",on:{click:function(t){e.$parent.goToCategory(29)}}},[a("i",{staticClass:"ui icon plus"}),e._v("CONFIGURAR ESCENARIOS")])]),e._v(" "),a("div",{staticStyle:{marginTop:"20px"}},[a("h3",[e._v("PASO 7. CONFIGURAR BLOQUES  "),a("label",{staticClass:"badge badge-warning"},[e._v(e._s(e.data.blocks.length)+"  bloque/s insertado/s")]),e.data.blocks.length>0?a("i",{staticClass:"icon check large green"}):e._e()]),e._v(" "),a("p",[e._v("Determina la resolución intra-etapa. La operación de los bloques se hace de manera secuencial, por lo tanto es ideal para un planeamiento de tipo horario (dentro de un horizonte de largo plazo).")]),e._v(" "),a("button",{staticClass:"btn btn-primary",on:{click:function(t){e.$parent.goToCategory(19)}}},[a("i",{staticClass:"ui icon plus"}),e._v("CONFIGURAR BLOQUES")])]),e._v(" "),a("div",{staticStyle:{marginTop:"20px"}},[a("h3",[e._v("PASO 8. CONFIGURAR PLANTAS TERMICAS  "),a("label",{staticClass:"badge badge-warning"},[e._v(e._s(e.data.thermalConfig.length)+"  planta/s termica/s insertada/s")]),e.data.thermalConfig.length>0?a("i",{staticClass:"icon check large green"}):e._e()]),e._v(" "),a("p",[e._v("Crea y determina las características de las plantas térmicas en el sistema.")]),e._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{disabled:e.data.areas<1||e.data.fuels<1},on:{click:function(t){e.$parent.goToCategory(4)}}},[a("i",{staticClass:"ui icon plus"}),e._v("CONFIGURAR PLANTAS")])]),e._v(" "),a("div",{staticStyle:{marginTop:"20px"}},[a("h3",[e._v("PASO 9. RACIONAMIENTO "),e.validation.rationingCounter.valid?a("i",{staticClass:"icon check large green"}):e._e()]),e._v(" "),!e.validation.rationingCounter.valid&&e.data.horizonts.length>0?a("div",{staticClass:"message ui red",staticStyle:{marginTop:"10px"}},[a("h4",[e._v("Faltan datos por completar")]),e._v(" "),a("ul",e._l(e.validation.rationingCounter.registers,function(t){return a("li",{staticStyle:{"margin-top":"10px"}},[a("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.segment_name))]),e._v(" tiene\n              "),a("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.rationing_cost_count))]),e._v(" valores asignados de\n              "),a("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.horizonts_count))]),e._v(" que deberia tener.")],1)}))]):e._e(),e._v(" "),a("p",[e._v("Para los segmentos creados sobre el nivel de impacto en la demanda no atendida, se definen los costos de racionamiento.")]),e._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{disabled:e.data.horizonts.length<1},on:{click:function(t){e.$parent.goToCategory(6)}}},[a("i",{staticClass:"ui icon plus"}),e._v("CONFIGURAR RACIONAMIENTO")])]),e._v(" "),a("div",{staticStyle:{marginTop:"20px"}},[a("h3",[e._v("PASO 10. CONFIGURAR PLANTAS MENORES "),a("div",{staticClass:"ui red label"},[e._v("ES OPCIONAL\n")]),e._v(" "),a("label",{staticClass:"badge badge-warning"},[e._v(e._s(e.data.smallConfig.length)+"  planta/s insertada/s")]),e.data.smallConfig.length>0?a("i",{staticClass:"icon check large green"}):e._e()]),e._v(" "),a("p",[e._v("Crea y determina las características de las plantas menores en el sistema.")]),e._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{disabled:e.data.areas.length<1},on:{click:function(t){e.$parent.goToCategory(7)}}},[a("i",{staticClass:"ui icon plus"}),e._v("CONFIGURAR PLANTAS")])]),e._v(" "),a("div",{staticStyle:{marginTop:"20px"}},[a("h3",[e._v("PASO 11. CONFIGURAR PLANTAS HIDROELÉCTRICA  "),a("label",{staticClass:"badge badge-warning"},[e._v(e._s(e.data.hydroConfig.length)+"  plantas insertada/s")]),e.data.hydroConfig.length>0?a("i",{staticClass:"icon check large green"}):e._e()]),e._v(" "),a("p",[e._v("Crea y determina las características de las plantas hidroeléctricas en el sistema.")]),e._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{disabled:e.data.areas.length<1||e.data.horizonts.length<1},on:{click:function(t){e.$parent.goToCategory(9)}}},[a("i",{staticClass:"ui icon plus"}),e._v("CONFIGURAR PLANTAS")])]),e._v(" "),a("div",{staticStyle:{marginTop:"20px"}},[a("h3",[e._v("PASO 12. CONFIGURAR AFLUENTES HIDRICOS  "),e.validation.inflowCounter.valid?a("i",{staticClass:"icon check large green"}):e._e()]),e._v(" "),!e.validation.inflowCounter.valid&&e.data.horizonts.length>0?a("div",{staticClass:"message ui red",staticStyle:{marginTop:"10px"}},[a("h4",[e._v("Faltan datos por completar")]),e._v(" "),a("ul",e._l(e.validation.inflowCounter.registers,function(t){return t.valid?e._e():a("li",{staticStyle:{"margin-top":"10px"}},[a("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.hydro_name))]),e._v(" tiene\n              "),a("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.inflowCount))]),e._v(" valores asignados de\n              "),a("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.horizonts_count))]),e._v(" que deberia tener.")],1)}))]):e._e(),e._v(" "),a("p",[e._v("Para cada una de las plantas hidroeléctricas en el sistema y de los escenarios del proceso estocástico, crea los afluentes de agua que llegan a los embalses.")]),e._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{disabled:e.data.horizonts.length<1||e.data.scenarios.length<1},on:{click:function(t){e.$parent.goToCategory(11)}}},[a("i",{staticClass:"ui icon plus"}),e._v("CONFIGURAR AFLUENTES")])]),e._v(" "),a("div",{staticStyle:{marginTop:"20px"}},[a("h3",[e._v("PASO 13. CONFIGURAR PLANTAS EÓLICAS "),a("div",{staticClass:"ui red label"},[e._v("ES OPCIONAL\n")]),e._v(" "),a("label",{staticClass:"badge badge-warning"},[e._v(e._s(e.data.windConfig.length)+"  plantas eólica/s insertada/s")]),e.data.windConfig.length>0?a("i",{staticClass:"icon check large green"}):e._e()]),e._v(" "),a("p",[e._v("Crea y determina las características de las plantas eólicas en el sistema.")]),e._v(" "),a("button",{staticClass:"btn btn-primary",on:{click:function(t){e.$parent.goToCategory(12)}}},[a("i",{staticClass:"ui icon plus"}),e._v("CONFIGURAR PLANTAS")])]),e._v(" "),e.data.windConfig.length>0?a("div",{staticStyle:{marginTop:"20px"}},[a("h3",[e._v("PASO 13.1. CONFIGURAR INDICES DE INTENSIDAD DE VIENTO"),e.validation.speedIndicesCounter.valid?a("i",{staticClass:"icon check large green"}):e._e()]),e._v(" "),!e.validation.speedIndicesCounter.valid&&e.data.windConfig.length>0?a("div",{staticClass:"message ui red",staticStyle:{marginTop:"10px"}},[a("h4",[e._v("Faltan datos por completar")]),e._v(" "),a("ul",e._l(e.validation.speedIndicesCounter.registers,function(t){return t.valid?e._e():a("li",{staticStyle:{"margin-top":"10px"}},[a("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.wind_config_name))]),e._v(" tiene\n              "),a("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.speedIndicesByWindConfigCounter))]),e._v(" valores asignados de\n              "),a("el-tag",{attrs:{type:"info"}},[e._v(e._s(12*t.blocksCounter))]),e._v(" que deberia tener.")],1)}))]):e._e(),e._v(" "),a("p",[e._v("Para cada una de las plantas eólicas en el sistema y de los escenarios del proceso estocástico, crea las series de intensidad de viento en el área de influencia de las plantas.")]),e._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{disabled:e.data.windConfig.length<1||e.data.blocks.length<1},on:{click:function(t){e.$parent.goToCategory(20)}}},[a("i",{staticClass:"ui icon plus"}),e._v("CONFIGURAR")])]):e._e(),e._v(" "),e.data.windM2Config.length>0?a("div",{staticStyle:{marginTop:"20px"}},[a("h3",[e._v("PASO 13.1.2. CONFIGURAR MODELO 2 INDICES DE INTENSIDAD DE VIENTO "),e.validation.speedIndicesM2Counter.valid?a("i",{staticClass:"icon check large green"}):e._e()]),e._v(" "),!e.validation.speedIndicesM2Counter.valid&&e.data.windM2Config.length>0?a("div",{staticClass:"message ui red",staticStyle:{marginTop:"10px"}},[a("h4",[e._v("Faltan datos por completar")]),e._v(" "),a("ul",e._l(e.validation.speedIndicesM2Counter.registers,function(t){return t.valid?e._e():a("li",{staticStyle:{"margin-top":"10px"}},[a("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.wind_config_name))]),e._v(" tiene\n              "),a("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.speedIndicesByWindConfigCounter))]),e._v(" valores asignados de\n              "),a("el-tag",{attrs:{type:"info"}},[e._v(e._s(12*t.blocksCounter))]),e._v(" que deberia tener.")],1)}))]):e._e(),e._v(" "),a("p",[e._v("Para cada una de las plantas eólicas en el sistema y de los escenarios del proceso estocástico, crea las series de intensidad de viento en el área de influencia de las plantas.")]),e._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{disabled:e.data.windM2Config.length<1||e.data.blocks.length<1},on:{click:function(t){e.$parent.goToCategory(24)}}},[a("i",{staticClass:"ui icon plus"}),e._v("CONFIGURAR")])]):e._e(),e._v(" "),e.data.windConfig.length>0&&!e.infoData.form.generate_wind?a("div",{staticStyle:{marginTop:"20px"}},[a("h3",[e._v("PASO 13.2 CONFIGURAR VELOCIDAD DEL VIENTO"),e.validation.inflowWindCounter.valid?a("i",{staticClass:"icon check large green"}):e._e()]),e._v(" "),!e.validation.inflowWindCounter.valid&&e.data.windConfig.length>0?a("div",{staticClass:"message ui red",staticStyle:{marginTop:"10px"}},[a("h4",[e._v("Faltan datos por completar")]),e._v(" "),a("ul",e._l(e.validation.inflowWindCounter.registers,function(t){return t.valid?e._e():a("li",{staticStyle:{"margin-top":"10px"}},[a("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.wind_name))]),e._v(" tiene\n              "),a("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.inflowCount))]),e._v(" valores asignados de\n              "),a("el-tag",{attrs:{type:"info"}},[e._v(e._s(12*t.horizonts_count))]),e._v(" que deberia tener.")],1)}))]):e._e(),e._v(" "),a("p",[e._v("Para cada una de las plantas eólicas en el sistema y de los escenarios del proceso estocástico, crea las series de las velocidades de viento en el área de influencia de las plantas.")]),e._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{disabled:e.data.windConfig.length<1||e.data.blocks.length<1},on:{click:function(t){e.$parent.goToCategory(21)}}},[a("i",{staticClass:"ui icon plus"}),e._v("CONFIGURAR")])]):e._e(),e._v(" "),e.data.windM2Config.length>0&&!e.infoData.form.generate_wind?a("div",{staticStyle:{marginTop:"20px"}},[a("h3",[e._v("PASO 13.2.1 CONFIGURAR MODELO 2 VELOCIDAD DEL VIENTO"),e.validation.inflowWindCounterM2.valid?a("i",{staticClass:"icon check large green"}):e._e()]),e._v(" "),!e.validation.inflowWindCounterM2.valid&&e.data.windM2Config.length>0?a("div",{staticClass:"message ui red",staticStyle:{marginTop:"10px"}},[a("h4",[e._v("Faltan datos por completar")]),e._v(" "),a("ul",e._l(e.validation.inflowWindCounterM2.registers,function(t){return t.valid?e._e():a("li",{staticStyle:{"margin-top":"10px"}},[a("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.wind_name))]),e._v(" tiene\n              "),a("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.inflowCount))]),e._v(" valores asignados de\n              "),a("el-tag",{attrs:{type:"info"}},[e._v(e._s(12*t.horizonts_count))]),e._v(" que deberia tener.")],1)}))]):e._e(),e._v(" "),a("p",[e._v("Para cada una de las plantas eólicas en el sistema y de los escenarios del proceso estocástico, crea las series de las velocidades de viento en el área de influencia de las plantas.")]),e._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{disabled:e.data.windM2Config.length<1||e.data.blocks.length<1},on:{click:function(t){e.$parent.goToCategory(30)}}},[a("i",{staticClass:"ui icon plus"}),e._v("CONFIGURAR")])]):e._e(),e._v(" "),e.data.areas.length>=2?a("div",{staticStyle:{marginTop:"20px"}},[a("h3",[e._v("PASO 14. CONFIGURAR LINEAS  "),a("label",{staticClass:"badge badge-warning"},[e._v(e._s(e.data.lines.length)+"  linea/s insertada/s")]),e.data.lines.length>0?a("i",{staticClass:"icon check large green"}):e._e()]),e._v(" "),a("p",[e._v("Cuando el usuario ha definido la existencia de mas de un area o nodo, es necesario definir las características de conexion entre ellas.")]),e._v(" "),a("button",{staticClass:"btn btn-primary",on:{click:function(t){e.$parent.goToCategory(27)}}},[a("i",{staticClass:"ui icon plus"}),e._v("CONFIGURAR LINEAS")])]):e._e()],1)])])},staticRenderFns:[]};var Xe=a("VU/8")(Ye,Ze,!1,function(e){a("78RL")},"data-v-beb97358",null).exports,et={name:"inputStep",props:["infoLoaded","categories","data","configData","infoData"],components:{Areas:g,ThermalConfig:b,WindConfigCategories:x,RationingCost:q,Types:k,EntranceStage:E,Demand:N,fuelCost:M,fuel:F,Segment:V,ThermalExpansion:Q,SmallConfig:J,SmallExpansion:X,HydroConfig:ae,HydroExpansion:ne,WindConfig:oe.a,WindExpansion:ce,Inflow:me,Blocks:ve,Lines:be,LinesExpansion:xe,StorageConfig:ke,StorageExpansion:Ee,WindM2Config:Ne,SpeedIndices:Me,Scenario:qe,InflowWind:Ve,WPowCurve:Je,SpeedIndicesM2:Fe,Configuration:Xe,InflowWindM2:Qe},mounted:function(){this.validate()},destroyed:function(){clearInterval(this.intervalValidation)},watch:{data:function(e){console.log(e)},filterText:function(e){this.$refs.tree.filter(e)}},methods:{validate:function(){var e=this,t=this;c.a.getValidation(this.$route.params.id).then(function(e){t.validation=e.data}),c.a.getErrorsBackend(this.$route.params.id).then(function(t){""!=t.data&&(e.logs=t.data.split("\n"),e.dialogVisible=!0)}),this.intervalValidation=setInterval(function(){c.a.getValidation(e.$route.params.id).then(function(e){t.validation=e.data})},1e4)},goToConfig:function(){this.$bus.$emit("changeStep",0),this.$router.push({name:"process",params:{id:this.$route.params.id},query:{step:0}})},goToResults:function(){this.$bus.$emit("changeStep",0),this.$router.push({name:"process",params:{id:this.$route.params.id},query:{step:3}})},goToCategory:function(e,t,a){var i=l()(this.categories).thru(function(e){return l.a.union(e,l.a.map(e,"children"))}).flatten().find({id:e});this.selectedNode=i,window.localStorage.setItem("node",o()(this.selectedNode)),window.localStorage.setItem(a,t)},start:function(){this.$router.push({query:{step:0,deploy:!0}})},filterNodeTree:function(e,t){return!e||-1!==t.name.toUpperCase().indexOf(e.toUpperCase())},handleNodeClickTree:function(e){14===e.id&&this.$bus.emit("getModulesData",[{url:"getAreas",reference:"areas"}]),4!==e.id&&5!==e.id||this.$bus.emit("getModulesData",[{url:"getThermalConfig",reference:"thermalConfig"}]),5===e.id&&this.$bus.emit("getModulesData",[{url:"getThermalConfigExpansion",reference:"thermalConfigExpansion"}]),17===e.id&&this.$bus.emit("getModulesData",[{url:"getCombustiblesByProcessId",reference:"fuels"}]),18!==e.id&&6!==e.id||this.$bus.emit("getModulesData",[{url:"getSegments",reference:"segments"}]),19!==e.id&&20!==e.id||this.$bus.emit("getModulesData",[{url:"getBlocks",reference:"blocks"}]),19!==e.id&&11!==e.id||this.$bus.emit("getModulesData",[{url:"getScenarios",reference:"scenarios"}]),2===e.id&&this.$bus.emit("getModulesData",[{url:"getHorizontByProcessId",reference:"horizonts"}]),7!==e.id&&8!==e.id||this.$bus.emit("getModulesData",[{url:"getSmallConfig",reference:"smallConfig"}]),8===e.id&&this.$bus.emit("getModulesData",[{url:"getSmallConfigExpansion",reference:"smallConfigExpansion"}]),9!==e.id&&11!==e.id||this.$bus.emit("getModulesData",[{url:"getHydroConfig",reference:"hydroConfig"}]),10===e.id&&this.$bus.emit("getModulesData",[{url:"getHydroExpansion",reference:"hydroExpansion"}]),12!==e.id&&13!==e.id||this.$bus.emit("getModulesData",[{url:"getWindConfig",reference:"windConfig"}]),13===e.id&&this.$bus.emit("getModulesData",[{url:"getWindExpansion",reference:"windConfigExpansion"}]),22!==e.id&&21!==e.id||this.$bus.emit("getModulesData",[{url:"getWindM2Config",reference:"windM2Config"}]),25!==e.id&&26!==e.id||this.$bus.emit("getModulesData",[{url:"getStorageConfig",reference:"storageConfig"}]),26===e.id&&this.$bus.emit("getModulesData",[{url:"getStorageExpansion",reference:"storageExpansion"}]),27!==e.id&&28!==e.id||this.$bus.emit("getModulesData",[{url:"getLines",reference:"lines"}]),28===e.id&&this.$bus.emit("getModulesData",[{url:"getLinesExpansion",reference:"linesExpansion"}]),this.selectedNode=e},toggleMenu:function(){var e=this,t=this.$loading({lock:!0,spinner:"el-icon-loading",background:"rgba(255, 255, 255)"});setTimeout(function(){e.menuCategoriesIsHidden=!e.menuCategoriesIsHidden},500),setTimeout(function(){t.close(),window.dispatchEvent(new Event("resize"))},1e3)},getClassCategoriesContainer:function(){return this.menuCategoriesIsHidden?"col-md-12":"col-md-8"}},data:function(){return{logs:[],dialogVisible:!1,validation:{},loading:!1,menuCategoriesIsHidden:!1,value:"",areas:[],filterText:"",selectedNode:{},defaultPropsTree:{children:"children",label:"name"}}}},tt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.selectedNode?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"row"},[e.menuCategoriesIsHidden?e._e():a("div",{staticClass:"col-md-4",staticStyle:{marginTop:"15px"}},[a("button",{staticClass:"ui button mini",staticStyle:{marginBottom:"10px"},on:{click:function(t){e.toggleMenu()}}},[a("i",{staticClass:"icon eye"}),e._v("OCULTAR")]),e._v(" "),a("el-input",{attrs:{placeholder:"Filtrar módulo"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:e.categories,props:e.defaultPropsTree,"filter-node-method":e.filterNodeTree},on:{"node-click":e.handleNodeClickTree}})],1),e._v(" "),a("el-dialog",{attrs:{title:"Errores de ejecución",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("span",[e._v("Hay errores en la ejecución del script en el servidor")]),e._v(" "),a("div",{staticClass:"terminal-logs",staticStyle:{height:"120px !important","margin-top":"0px"},attrs:{id:"terminal-logs"}},[a("ul",{staticStyle:{"list-style-type":"none"}},e._l(e.logs,function(t){return t?a("li",[e._v(e._s(t))]):e._e()}))]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("Cerrar mensaje")])],1)]),e._v(" "),a("div",{class:e.getClassCategoriesContainer(),staticStyle:{marginTop:"10px"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[e.selectedNode.component?a("h2",{staticStyle:{color:"#575b5b"}},[a("i",[e._v(e._s(e.selectedNode.name))])]):e._e()]),e._v(" "),a("div",{staticClass:"col-md-6"},[a("button",{staticClass:"button ui  mini inverted green float-right init-button",attrs:{disabled:!e.validation.valid},on:{click:function(t){e.start()}}},[a("i",{staticClass:"icon rocket"}),e._v(" Ejecutar")]),e._v(" "),a("a",{staticClass:"button ui mini inverted red float-right",on:{click:function(t){e.goToConfig()}}},[a("i",{staticClass:"icon cogs"}),e._v("Detalles")]),e._v(" "),e.validation.valid&&4===e.infoData.phase?a("a",{staticClass:"button ui mini  yellow float-right",staticStyle:{color:"black"},on:{click:function(t){e.goToResults()}}},[a("i",{staticClass:"icon chart line ui"}),e._v("Resultados")]):e._e(),e._v(" "),e.menuCategoriesIsHidden?a("a",{staticClass:"button mini ui float-right",on:{click:function(t){e.toggleMenu()}}},[a("i",{staticClass:"icon eye"}),e._v("CAMBIAR CATEGORIA")]):e._e()])]),e._v(" "),a("hr"),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},["ThermalConfig"==e.selectedNode.component?a("thermalConfig",{attrs:{data:e.data,infoLoaded:e.infoLoaded}}):e._e(),e._v(" "),"ThermalExpansion"==e.selectedNode.component?a("thermalExpansion",{attrs:{data:e.data,infoLoaded:e.infoLoaded}}):e._e(),e._v(" "),"Areas"==e.selectedNode.component?a("Areas",{attrs:{data:e.data,infoLoaded:e.infoLoaded}}):e._e(),e._v(" "),"Scenario"==e.selectedNode.component?a("Scenario",{attrs:{data:e.data,infoLoaded:e.infoLoaded}}):e._e(),e._v(" "),"Types"==e.selectedNode.component?a("Types",{attrs:{data:e.data,infoLoaded:e.infoLoaded}}):e._e(),e._v(" "),"EntranceStages"==e.selectedNode.component?a("EntranceStage",{attrs:{data:e.data,infoLoaded:e.infoLoaded}}):e._e(),e._v(" "),"Demand"==e.selectedNode.component?a("Demand",{attrs:{data:e.data,infoLoaded:e.infoLoaded}}):e._e(),e._v(" "),"WindConfig"==e.selectedNode.component?a("WindConfigCategories",{attrs:{infoData:e.infoData,data:e.data,infoLoaded:e.infoLoaded}}):e._e(),e._v(" "),"FuelCost"==e.selectedNode.component?a("fuelCost",{attrs:{data:e.data,infoLoaded:e.infoLoaded}}):e._e(),e._v(" "),"Fuel"==e.selectedNode.component?a("fuel",{attrs:{data:e.data,infoLoaded:e.infoLoaded}}):e._e(),e._v(" "),"RationingCosts"==e.selectedNode.component?a("RationingCost",{attrs:{data:e.data,infoLoaded:e.infoLoaded}}):e._e(),e._v(" "),"Segment"==e.selectedNode.component?a("Segment",{attrs:{configData:e.configData,data:e.data,infoLoaded:e.infoLoaded}}):e._e(),e._v(" "),"SmallConfig"==e.selectedNode.component?a("SmallConfig",{attrs:{data:e.data,infoLoaded:e.infoLoaded}}):e._e(),e._v(" "),"SmallExpansion"==e.selectedNode.component?a("SmallExpansion",{attrs:{data:e.data,infoLoaded:e.infoLoaded}}):e._e(),e._v(" "),"HydroConfig"==e.selectedNode.component?a("HydroConfig",{attrs:{infoData:e.infoData,data:e.data,infoLoaded:e.infoLoaded}}):e._e(),e._v(" "),"HydroExpansion"==e.selectedNode.component?a("HydroExpansion",{attrs:{data:e.data,infoLoaded:e.infoLoaded}}):e._e(),e._v(" "),"WindExpansion"==e.selectedNode.component?a("WindExpansion",{attrs:{data:e.data,infoLoaded:e.infoLoaded}}):e._e(),e._v(" "),"Inflow"==e.selectedNode.component?a("Inflow",{attrs:{data:e.data,infoLoaded:e.infoLoaded}}):e._e(),e._v(" "),"Blocks"==e.selectedNode.component?a("Blocks",{attrs:{data:e.data,infoLoaded:e.infoLoaded}}):e._e(),e._v(" "),"Lines"==e.selectedNode.component?a("Lines",{attrs:{data:e.data,infoLoaded:e.infoLoaded}}):e._e(),e._v(" "),"LinesExpansion"==e.selectedNode.component?a("LinesExpansion",{attrs:{data:e.data,infoLoaded:e.infoLoaded}}):e._e(),e._v(" "),"StorageConfig"==e.selectedNode.component?a("StorageConfig",{attrs:{data:e.data,infoLoaded:e.infoLoaded}}):e._e(),e._v(" "),"StorageExpansion"==e.selectedNode.component?a("StorageExpansion",{attrs:{data:e.data,infoLoaded:e.infoLoaded}}):e._e(),e._v(" "),"Wind_M2_config"==e.selectedNode.component?a("windM2Config",{attrs:{data:e.data,infoLoaded:e.infoLoaded}}):e._e(),e._v(" "),"SpeedIndices"==e.selectedNode.component?a("SpeedIndices",{attrs:{data:e.data,infoLoaded:e.infoLoaded}}):e._e(),e._v(" "),"Speed_Indices_M2"==e.selectedNode.component?a("SpeedIndicesM2",{attrs:{data:e.data,infoLoaded:e.infoLoaded}}):e._e(),e._v(" "),"InflowWind"==e.selectedNode.component?a("InflowWind",{attrs:{canEdit:e.infoData.form.generate_wind,data:e.data,infoLoaded:e.infoLoaded}}):e._e(),e._v(" "),"InflowWindM2"==e.selectedNode.component?a("InflowWindM2",{attrs:{canEdit:e.infoData.form.generate_wind,data:e.data,infoLoaded:e.infoLoaded}}):e._e(),e._v(" "),"WPowCurve"==e.selectedNode.component?a("WPowCurve",{attrs:{data:e.data,infoLoaded:e.infoLoaded}}):e._e(),e._v(" "),e.selectedNode.component?e._e():a("Configuration",{attrs:{data:e.data,infoData:e.infoData,infoLoaded:e.infoLoaded}})],1)])])],1):e._e()},staticRenderFns:[]},at=a("VU/8")(et,tt,!1,null,null,null);t.a=at.exports},hCFh:function(e,t){},i6gT:function(e,t){},oPmM:function(e,t){},rUBz:function(e,t,a){"use strict";var i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("center",{staticStyle:{"margin-top":"50px"}},[a("div",{staticClass:"ui icon message success"},[a("div",{staticClass:"content"},[a("div",{staticClass:"header"},[e._v("\n        \tPuedes cerrar esta ventana. Recibiras un email cuando el proceso finalice.\n        ")])])]),e._v(" "),a("h2",{staticStyle:{"margin-bottom":"10px"}},[e._v(e._s(e.info))]),e._v(" "),a("br"),e._v(" "),"En cola"!==e.info?a("el-progress",{attrs:{"stroke-width":30,percentage:e.progress}}):e._e(),e._v(" "),"En cola"!==e.info?a("div",{staticClass:"container-lol",staticStyle:{"margin-top":"250px"}},[a("div",{staticClass:"holder"},[a("div",{staticClass:"box"})]),e._v(" "),a("div",{staticClass:"holder"},[a("div",{staticClass:"box"})]),e._v(" "),a("div",{staticClass:"holder"},[a("div",{staticClass:"box"})])]):e._e(),e._v(" "),"En cola"==e.info?a("img",{attrs:{width:"250px",src:"/static/queue.png"}}):e._e(),e._v(" "),a("br")],1)],1)},staticRenderFns:[]},s=a("VU/8")({name:"ProcessProgress",props:["info","progress"]},i,!1,null,null,null);t.a=s.exports},sXeN:function(e,t){e.exports=["ahora",["hace %s segundo","hace %s segundos"],["hace %s minuto","hace %s minutos"],["hace %s hora","hace %s horas"],["hace %s día","hace %s días"],["hace %s semana","hace %s semanas"],["hace %s mes","hace %s meses"],["hace %s año","hace %s años"]]},tvR6:function(e,t){},ux0l:function(e,t){},x95f:function(e,t,a){"use strict";var i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-steps",{attrs:{active:this.activeStep,"align-center":""}},[t("el-step",{attrs:{title:"Configuración",description:"Información general del caso"}}),this._v(" "),t("el-step",{attrs:{title:"Parámetros de entrada",description:"Captura de variables asociadas al caso"}}),this._v(" "),t("el-step",{attrs:{title:"Ejecución",description:"Estado de la Ejecución"}}),this._v(" "),t("el-step",{attrs:{title:"Visualización de Resultados",description:"Parámetros de salida"}})],1)},staticRenderFns:[]},s=a("VU/8")({name:"ProcessStep",props:["activeStep"]},i,!1,null,null,null);t.a=s.exports},"y/O0":function(e,t){},"zh/8":function(e,t,a){"use strict";var i=a("bOdI"),s=a.n(i),n=a("BqJa"),o=a("QmSG");console.log(o.a);var r={name:"ProcessResults",destroyed:function(){clearInterval(this.intervalValidation)},data:function(){var e;return e={logs:["Espere un momento. . ."],config:o.a,showLogs:!1,charts:[],loading:!0,enableResults:o.a.enableResults,areasCharts:[],intervalValidation:null,selectedChart:"General"},s()(e,"config",o.a),s()(e,"validation",{valid:!1}),e},props:["infoData"],mounted:function(){this.loading=this.$loading({lock:!0,text:"Cargando",spinner:"el-icon-loading",background:"rgba(255,255,255,.9)"}),this.enableResults?(this.getChartsGeneral(),this.getChartsAreas()):this.loading.close(),this.getLogsBackend(),this.validate()},methods:{downloadInflow:function(){location.replace(o.a.path+":"+o.a.backendPort+"/api/v1/results/getWindDataInflow/"+this.$route.params.id)},downloadInflowWind:function(){location.replace(o.a.path+":"+o.a.backendPort+"/api/v1/results/getWindDataInflowWind/"+this.$route.params.id)},downloadResults:function(){location.replace(o.a.path+":"+o.a.backendPort+"/api/v1/results/getGeneralData/"+this.$route.params.id)},getLogsBackend:function(){var e=this;n.a.getLogsBackend(this.$route.params.id).then(function(t){e.logs=t.data.split("\n")})},toggleLogs:function(){this.showLogs=!this.showLogs},isActive:function(e){return e===this.selectedChart},changeChart:function(e){this.selectedChart=e.area,console.log(e),this.renderChart(e.chart)},getChartsAreas:function(){var e=this;n.a.getChartsByArea(this.$route.params.id).then(function(t){e.areasCharts=t.data,e.areasCharts.forEach(function(t){t.chart&&e.charts.push({area:t.area,chart:JSON.parse(t.chart)})})})},getChartsGeneral:function(){var e=this;n.a.getChartsGeneral(this.$route.params.id).then(function(t){e.generalChart={area:"General",chart:t.data},e.loading.close(),e.charts.push(e.generalChart),e.renderChart(e.generalChart.chart)})},renderChart:function(e){this.chart=document.getElementById("chart"),Plotly.purge(this.chart),Plotly.plot(this.chart,e)},getValidation:function(){var e=this;n.a.getValidation(this.$route.params.id).then(function(t){e.validation=t.data})},validate:function(){var e=this;"Excel"!==this.infoData.form.type?(this.getValidation(),this.intervalValidation=setInterval(function(){e.getValidation()},1e4)):this.validation.valid=!0},start:function(){this.$router.push({query:{step:0,deploy:!0}})},goToConfig:function(){this.$router.push({name:"process",query:{step:1},params:{id:this.$route.params.id}})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("h3",[a("i",{staticClass:"tasks icon circular inverted blue"}),e._v(" RESULTADOS DE "+e._s(e.infoData.form.name.toUpperCase()))])]),e._v(" "),a("div",{staticClass:"col-md-6"},["Excel"!==e.infoData.form.type?a("button",{staticClass:"ui button mini blue float-right",on:{click:function(t){e.goToConfig()}}},[a("i",{staticClass:"cogs icon"}),e._v("Configurar")]):e._e(),e._v(" "),a("button",{staticClass:"button ui  mini inverted green float-right",attrs:{disabled:!e.validation.valid&&"Excel"!==e.infoData.form.type},on:{click:function(t){e.start()}}},[a("i",{staticClass:"icon rocket"}),e._v(" Ejecutar")])])]),e._v(" "),e.enableResults?e._e():a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("hr"),e._v(" "),a("center",[a("p",[e._v("El reporte esta completado. Puedes descargar los datos.")]),e._v(" "),e.infoData.form.generate_wind?a("a",{staticClass:"ui massive button blue",staticStyle:{"margin-top":"20px"},on:{click:function(t){e.downloadInflow()}}},[a("i",{staticClass:"download icon"}),e._v("Descargar Resultados Inflow")]):e._e(),e._v(" "),e.infoData.form.generate_wind?a("button",{staticClass:"ui button yellow",staticStyle:{"margin-top":"10px"},on:{click:function(t){e.downloadInflowWind()}}},[a("i",{staticClass:"download icon"}),e._v("Descargar Resultados InflowWind")]):e._e(),e._v(" "),a("button",{staticClass:"ui button  black",staticStyle:{"margin-top":"10px"},on:{click:function(t){e.downloadResults()}}},[a("i",{staticClass:"download icon"}),e._v("Descargar Resultados")]),e._v(" "),a("hr")])],1)]),e._v(" "),e.enableResults?a("div",{staticClass:"row",staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"col-md-4"},[e._l(e.charts,function(t){return a("div",{staticClass:"list-group"},[a("a",{staticClass:"list-group-item list-group-item-action flex-column align-items-start",class:{active:e.isActive(t.area)},attrs:{href:"#"},on:{click:function(a){e.changeChart(t)}}},[a("div",{staticClass:"d-flex w-100 justify-content-between"},[a("h5",{staticClass:"mb-1"},[e._v("SISTEMA "+e._s(t.area.toUpperCase()))])])])])}),e._v(" "),e.infoData.form.generate_wind?a("a",{staticClass:"ui button blue",staticStyle:{"margin-top":"20px"},on:{click:function(t){e.downloadInflow()}}},[a("i",{staticClass:"download icon"}),e._v("Descargar Resultados Inflow")]):e._e(),e._v(" "),e.infoData.form.generate_wind?a("button",{staticClass:"ui button yellow",staticStyle:{"margin-top":"10px"},on:{click:function(t){e.downloadInflowWind()}}},[a("i",{staticClass:"download icon"}),e._v("Descargar Resultados InflowWind")]):e._e(),e._v(" "),a("button",{staticClass:"ui button  black",staticStyle:{"margin-top":"10px"},on:{click:function(t){e.downloadResults()}}},[a("i",{staticClass:"download icon"}),e._v("Descargar Resultados")]),e._v(" "),a("hr"),e._v(" "),e.logs.length>0?a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"terminal-logs",staticStyle:{height:"140px !important","margin-top":"0px"},attrs:{id:"terminal-logs"}},[a("ul",{staticStyle:{"list-style-type":"none"}},e._l(e.logs,function(t){return t?a("li",[e._v(e._s(t))]):e._e()}))])])]):e._e()],2),e._v(" "),a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"row"},[a("h3",[e._v("SISTEMA "+e._s(e.selectedChart.toUpperCase())+" (MWh)")]),e._v(" "),a("center",[a("div",{staticStyle:{width:"100%"},attrs:{id:"chart"}})])],1)])]):e._e()])},staticRenderFns:[]},c=a("VU/8")(r,l,!1,null,null,null);t.a=c.exports}},["NHnr"]);
//# sourceMappingURL=app.71b536822e8bc97af165.js.map